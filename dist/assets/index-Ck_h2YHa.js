(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function uI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cv={exports:{}},mc={},hv={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ga=Symbol.for("react.element"),cI=Symbol.for("react.portal"),hI=Symbol.for("react.fragment"),dI=Symbol.for("react.strict_mode"),fI=Symbol.for("react.profiler"),pI=Symbol.for("react.provider"),mI=Symbol.for("react.context"),gI=Symbol.for("react.forward_ref"),yI=Symbol.for("react.suspense"),vI=Symbol.for("react.memo"),_I=Symbol.for("react.lazy"),Pm=Symbol.iterator;function wI(t){return t===null||typeof t!="object"?null:(t=Pm&&t[Pm]||t["@@iterator"],typeof t=="function"?t:null)}var dv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fv=Object.assign,pv={};function uo(t,e,n){this.props=t,this.context=e,this.refs=pv,this.updater=n||dv}uo.prototype.isReactComponent={};uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mv(){}mv.prototype=uo.prototype;function Cf(t,e,n){this.props=t,this.context=e,this.refs=pv,this.updater=n||dv}var Rf=Cf.prototype=new mv;Rf.constructor=Cf;fv(Rf,uo.prototype);Rf.isPureReactComponent=!0;var bm=Array.isArray,gv=Object.prototype.hasOwnProperty,kf={current:null},yv={key:!0,ref:!0,__self:!0,__source:!0};function vv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)gv.call(e,r)&&!yv.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Ga,type:t,key:i,ref:o,props:s,_owner:kf.current}}function EI(t,e){return{$$typeof:Ga,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ga}function II(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dm=/\/+/g;function _h(t,e){return typeof t=="object"&&t!==null&&t.key!=null?II(""+t.key):e.toString(36)}function iu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ga:case cI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+_h(o,0):r,bm(s)?(n="",t!=null&&(n=t.replace(Dm,"$&/")+"/"),iu(s,e,n,"",function(c){return c})):s!=null&&(Nf(s)&&(s=EI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",bm(t))for(var u=0;u<t.length;u++){i=t[u];var l=r+_h(i,u);o+=iu(i,e,n,l,s)}else if(l=wI(t),typeof l=="function")for(t=l.call(t),u=0;!(i=t.next()).done;)i=i.value,l=r+_h(i,u++),o+=iu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ol(t,e,n){if(t==null)return t;var r=[],s=0;return iu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function TI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},ou={transition:null},xI={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:ou,ReactCurrentOwner:kf};function _v(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Ol,forEach:function(t,e,n){Ol(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ol(t,function(){e++}),e},toArray:function(t){return Ol(t,function(e){return e})||[]},only:function(t){if(!Nf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=uo;le.Fragment=hI;le.Profiler=fI;le.PureComponent=Cf;le.StrictMode=dI;le.Suspense=yI;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xI;le.act=_v;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=kf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(l in e)gv.call(e,l)&&!yv.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&u!==void 0?u[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}return{$$typeof:Ga,type:t.type,key:s,ref:i,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:mI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pI,_context:t},t.Consumer=t};le.createElement=vv;le.createFactory=function(t){var e=vv.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:gI,render:t}};le.isValidElement=Nf;le.lazy=function(t){return{$$typeof:_I,_payload:{_status:-1,_result:t},_init:TI}};le.memo=function(t,e){return{$$typeof:vI,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=ou.transition;ou.transition={};try{t()}finally{ou.transition=e}};le.unstable_act=_v;le.useCallback=function(t,e){return Pt.current.useCallback(t,e)};le.useContext=function(t){return Pt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Pt.current.useEffect(t,e)};le.useId=function(){return Pt.current.useId()};le.useImperativeHandle=function(t,e,n){return Pt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Pt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Pt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Pt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Pt.current.useReducer(t,e,n)};le.useRef=function(t){return Pt.current.useRef(t)};le.useState=function(t){return Pt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Pt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Pt.current.useTransition()};le.version="18.3.1";hv.exports=le;var B=hv.exports;const It=uI(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SI=B,AI=Symbol.for("react.element"),CI=Symbol.for("react.fragment"),RI=Object.prototype.hasOwnProperty,kI=SI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NI={key:!0,ref:!0,__self:!0,__source:!0};function wv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)RI.call(e,r)&&!NI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:AI,type:t,key:i,ref:o,props:s,_owner:kI.current}}mc.Fragment=CI;mc.jsx=wv;mc.jsxs=wv;cv.exports=mc;var f=cv.exports,sd={},Ev={exports:{}},Kt={},Iv={exports:{}},Tv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Z){var ie=z.length;z.push(Z);e:for(;0<ie;){var Se=ie-1>>>1,ge=z[Se];if(0<s(ge,Z))z[Se]=Z,z[ie]=ge,ie=Se;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Z=z[0],ie=z.pop();if(ie!==Z){z[0]=ie;e:for(var Se=0,ge=z.length,Ae=ge>>>1;Se<Ae;){var Dt=2*(Se+1)-1,ln=z[Dt],Ut=Dt+1,Yt=z[Ut];if(0>s(ln,ie))Ut<ge&&0>s(Yt,ln)?(z[Se]=Yt,z[Ut]=ie,Se=Ut):(z[Se]=ln,z[Dt]=ie,Se=Dt);else if(Ut<ge&&0>s(Yt,ie))z[Se]=Yt,z[Ut]=ie,Se=Ut;else break e}}return Z}function s(z,Z){var ie=z.sortIndex-Z.sortIndex;return ie!==0?ie:z.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var l=[],c=[],d=1,m=null,g=3,_=!1,C=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(z){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=z)r(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(c)}}function D(z){if(k=!1,w(z),!C)if(n(l)!==null)C=!0,Be(V);else{var Z=n(c);Z!==null&&We(D,Z.startTime-z)}}function V(z,Z){C=!1,k&&(k=!1,A(v),v=-1),_=!0;var ie=g;try{for(w(Z),m=n(l);m!==null&&(!(m.expirationTime>Z)||z&&!R());){var Se=m.callback;if(typeof Se=="function"){m.callback=null,g=m.priorityLevel;var ge=Se(m.expirationTime<=Z);Z=t.unstable_now(),typeof ge=="function"?m.callback=ge:m===n(l)&&r(l),w(Z)}else r(l);m=n(l)}if(m!==null)var Ae=!0;else{var Dt=n(c);Dt!==null&&We(D,Dt.startTime-Z),Ae=!1}return Ae}finally{m=null,g=ie,_=!1}}var F=!1,I=null,v=-1,T=5,S=-1;function R(){return!(t.unstable_now()-S<T)}function N(){if(I!==null){var z=t.unstable_now();S=z;var Z=!0;try{Z=I(!0,z)}finally{Z?x():(F=!1,I=null)}}else F=!1}var x;if(typeof E=="function")x=function(){E(N)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,J=xe.port2;xe.port1.onmessage=N,x=function(){J.postMessage(null)}}else x=function(){b(N,0)};function Be(z){I=z,F||(F=!0,x())}function We(z,Z){v=b(function(){z(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){C||_||(C=!0,Be(V))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var ie=g;g=Z;try{return z()}finally{g=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Z){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ie=g;g=z;try{return Z()}finally{g=ie}},t.unstable_scheduleCallback=function(z,Z,ie){var Se=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Se+ie:Se):ie=Se,z){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ie+ge,z={id:d++,callback:Z,priorityLevel:z,startTime:ie,expirationTime:ge,sortIndex:-1},ie>Se?(z.sortIndex=ie,e(c,z),n(l)===null&&z===n(c)&&(k?(A(v),v=-1):k=!0,We(D,ie-Se))):(z.sortIndex=ge,e(l,z),C||_||(C=!0,Be(V))),z},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(z){var Z=g;return function(){var ie=g;g=Z;try{return z.apply(this,arguments)}finally{g=ie}}}})(Tv);Iv.exports=Tv;var PI=Iv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bI=B,Gt=PI;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xv=new Set,_a={};function Ks(t,e){Ki(t,e),Ki(t+"Capture",e)}function Ki(t,e){for(_a[t]=e,t=0;t<e.length;t++)xv.add(e[t])}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),id=Object.prototype.hasOwnProperty,DI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Om={},Lm={};function OI(t){return id.call(Lm,t)?!0:id.call(Om,t)?!1:DI.test(t)?Lm[t]=!0:(Om[t]=!0,!1)}function LI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MI(t,e,n,r){if(e===null||typeof e>"u"||LI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pf=/[\-:]([a-z])/g;function bf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pf,bf);dt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pf,bf);dt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pf,bf);dt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Df(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MI(e,n,s,r)&&(n=null),r||s===null?OI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mr=bI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ll=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),xi=Symbol.for("react.fragment"),Of=Symbol.for("react.strict_mode"),od=Symbol.for("react.profiler"),Sv=Symbol.for("react.provider"),Av=Symbol.for("react.context"),Lf=Symbol.for("react.forward_ref"),ad=Symbol.for("react.suspense"),ld=Symbol.for("react.suspense_list"),Mf=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),Cv=Symbol.for("react.offscreen"),Mm=Symbol.iterator;function Bo(t){return t===null||typeof t!="object"?null:(t=Mm&&t[Mm]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,wh;function Yo(t){if(wh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wh=e&&e[1]||""}return`
`+wh+t}var Eh=!1;function Ih(t,e){if(!t||Eh)return"";Eh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=u);break}}}finally{Eh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yo(t):""}function VI(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=Ih(t.type,!1),t;case 11:return t=Ih(t.type.render,!1),t;case 1:return t=Ih(t.type,!0),t;default:return""}}function ud(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xi:return"Fragment";case Ti:return"Portal";case od:return"Profiler";case Of:return"StrictMode";case ad:return"Suspense";case ld:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Av:return(t.displayName||"Context")+".Consumer";case Sv:return(t._context.displayName||"Context")+".Provider";case Lf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mf:return e=t.displayName||null,e!==null?e:ud(t.type)||"Memo";case Cr:e=t._payload,t=t._init;try{return ud(t(e))}catch{}}return null}function jI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ud(e);case 8:return e===Of?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FI(t){var e=Rv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ml(t){t._valueTracker||(t._valueTracker=FI(t))}function kv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Au(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cd(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Nv(t,e){e=e.checked,e!=null&&Df(t,"checked",e,!1)}function hd(t,e){Nv(t,e);var n=Xr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dd(t,e.type,n):e.hasOwnProperty("defaultValue")&&dd(t,e.type,Xr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dd(t,e,n){(e!=="number"||Au(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xo=Array.isArray;function Vi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function fd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Xo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xr(n)}}function Pv(t,e){var n=Xr(e.value),r=Xr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Um(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vl,Dv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vl=Vl||document.createElement("div"),Vl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UI=["Webkit","ms","Moz","O"];Object.keys(ia).forEach(function(t){UI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ia[e]=ia[t]})});function Ov(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ia.hasOwnProperty(t)&&ia[t]?(""+e).trim():e+"px"}function Lv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ov(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var BI=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function md(t,e){if(e){if(BI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function gd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yd=null;function Vf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vd=null,ji=null,Fi=null;function Bm(t){if(t=Ya(t)){if(typeof vd!="function")throw Error(U(280));var e=t.stateNode;e&&(e=wc(e),vd(t.stateNode,t.type,e))}}function Mv(t){ji?Fi?Fi.push(t):Fi=[t]:ji=t}function Vv(){if(ji){var t=ji,e=Fi;if(Fi=ji=null,Bm(t),e)for(t=0;t<e.length;t++)Bm(e[t])}}function jv(t,e){return t(e)}function Fv(){}var Th=!1;function Uv(t,e,n){if(Th)return t(e,n);Th=!0;try{return jv(t,e,n)}finally{Th=!1,(ji!==null||Fi!==null)&&(Fv(),Vv())}}function Ea(t,e){var n=t.stateNode;if(n===null)return null;var r=wc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var _d=!1;if(or)try{var zo={};Object.defineProperty(zo,"passive",{get:function(){_d=!0}}),window.addEventListener("test",zo,zo),window.removeEventListener("test",zo,zo)}catch{_d=!1}function zI(t,e,n,r,s,i,o,u,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var oa=!1,Cu=null,Ru=!1,wd=null,$I={onError:function(t){oa=!0,Cu=t}};function HI(t,e,n,r,s,i,o,u,l){oa=!1,Cu=null,zI.apply($I,arguments)}function qI(t,e,n,r,s,i,o,u,l){if(HI.apply(this,arguments),oa){if(oa){var c=Cu;oa=!1,Cu=null}else throw Error(U(198));Ru||(Ru=!0,wd=c)}}function Qs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zm(t){if(Qs(t)!==t)throw Error(U(188))}function WI(t){var e=t.alternate;if(!e){if(e=Qs(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return zm(s),t;if(i===r)return zm(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function zv(t){return t=WI(t),t!==null?$v(t):null}function $v(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$v(t);if(e!==null)return e;t=t.sibling}return null}var Hv=Gt.unstable_scheduleCallback,$m=Gt.unstable_cancelCallback,GI=Gt.unstable_shouldYield,KI=Gt.unstable_requestPaint,Ue=Gt.unstable_now,QI=Gt.unstable_getCurrentPriorityLevel,jf=Gt.unstable_ImmediatePriority,qv=Gt.unstable_UserBlockingPriority,ku=Gt.unstable_NormalPriority,YI=Gt.unstable_LowPriority,Wv=Gt.unstable_IdlePriority,gc=null,Nn=null;function XI(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(gc,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:eT,JI=Math.log,ZI=Math.LN2;function eT(t){return t>>>=0,t===0?32:31-(JI(t)/ZI|0)|0}var jl=64,Fl=4194304;function Jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Jo(u):(i&=o,i!==0&&(r=Jo(i)))}else o=n&~s,o!==0?r=Jo(o):i!==0&&(r=Jo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),s=1<<n,r|=t[n],e&=~s;return r}function tT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-yn(i),u=1<<o,l=s[o];l===-1?(!(u&n)||u&r)&&(s[o]=tT(u,e)):l<=e&&(t.expiredLanes|=u),i&=~u}}function Ed(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gv(){var t=jl;return jl<<=1,!(jl&4194240)&&(jl=64),t}function xh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ka(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function rT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-yn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ff(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function Kv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qv,Uf,Yv,Xv,Jv,Id=!1,Ul=[],Fr=null,Ur=null,Br=null,Ia=new Map,Ta=new Map,kr=[],sT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hm(t,e){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":Ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ta.delete(e.pointerId)}}function $o(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ya(e),e!==null&&Uf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function iT(t,e,n,r,s){switch(e){case"focusin":return Fr=$o(Fr,t,e,n,r,s),!0;case"dragenter":return Ur=$o(Ur,t,e,n,r,s),!0;case"mouseover":return Br=$o(Br,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ia.set(i,$o(Ia.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ta.set(i,$o(Ta.get(i)||null,t,e,n,r,s)),!0}return!1}function Zv(t){var e=ks(t.target);if(e!==null){var n=Qs(e);if(n!==null){if(e=n.tag,e===13){if(e=Bv(n),e!==null){t.blockedOn=e,Jv(t.priority,function(){Yv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function au(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Td(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yd=r,n.target.dispatchEvent(r),yd=null}else return e=Ya(n),e!==null&&Uf(e),t.blockedOn=n,!1;e.shift()}return!0}function qm(t,e,n){au(t)&&n.delete(e)}function oT(){Id=!1,Fr!==null&&au(Fr)&&(Fr=null),Ur!==null&&au(Ur)&&(Ur=null),Br!==null&&au(Br)&&(Br=null),Ia.forEach(qm),Ta.forEach(qm)}function Ho(t,e){t.blockedOn===e&&(t.blockedOn=null,Id||(Id=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,oT)))}function xa(t){function e(s){return Ho(s,t)}if(0<Ul.length){Ho(Ul[0],t);for(var n=1;n<Ul.length;n++){var r=Ul[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fr!==null&&Ho(Fr,t),Ur!==null&&Ho(Ur,t),Br!==null&&Ho(Br,t),Ia.forEach(e),Ta.forEach(e),n=0;n<kr.length;n++)r=kr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<kr.length&&(n=kr[0],n.blockedOn===null);)Zv(n),n.blockedOn===null&&kr.shift()}var Ui=mr.ReactCurrentBatchConfig,Pu=!0;function aT(t,e,n,r){var s=_e,i=Ui.transition;Ui.transition=null;try{_e=1,Bf(t,e,n,r)}finally{_e=s,Ui.transition=i}}function lT(t,e,n,r){var s=_e,i=Ui.transition;Ui.transition=null;try{_e=4,Bf(t,e,n,r)}finally{_e=s,Ui.transition=i}}function Bf(t,e,n,r){if(Pu){var s=Td(t,e,n,r);if(s===null)Oh(t,e,r,bu,n),Hm(t,r);else if(iT(s,t,e,n,r))r.stopPropagation();else if(Hm(t,r),e&4&&-1<sT.indexOf(t)){for(;s!==null;){var i=Ya(s);if(i!==null&&Qv(i),i=Td(t,e,n,r),i===null&&Oh(t,e,r,bu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Oh(t,e,r,null,n)}}var bu=null;function Td(t,e,n,r){if(bu=null,t=Vf(r),t=ks(t),t!==null)if(e=Qs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bu=t,null}function e_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QI()){case jf:return 1;case qv:return 4;case ku:case YI:return 16;case Wv:return 536870912;default:return 16}default:return 16}}var Lr=null,zf=null,lu=null;function t_(){if(lu)return lu;var t,e=zf,n=e.length,r,s="value"in Lr?Lr.value:Lr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return lu=s.slice(t,1<r?1-r:void 0)}function uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bl(){return!0}function Wm(){return!1}function Qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bl:Wm,this.isPropagationStopped=Wm,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bl)},persist:function(){},isPersistent:Bl}),e}var co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$f=Qt(co),Qa=Le({},co,{view:0,detail:0}),uT=Qt(Qa),Sh,Ah,qo,yc=Le({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qo&&(qo&&t.type==="mousemove"?(Sh=t.screenX-qo.screenX,Ah=t.screenY-qo.screenY):Ah=Sh=0,qo=t),Sh)},movementY:function(t){return"movementY"in t?t.movementY:Ah}}),Gm=Qt(yc),cT=Le({},yc,{dataTransfer:0}),hT=Qt(cT),dT=Le({},Qa,{relatedTarget:0}),Ch=Qt(dT),fT=Le({},co,{animationName:0,elapsedTime:0,pseudoElement:0}),pT=Qt(fT),mT=Le({},co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gT=Qt(mT),yT=Le({},co,{data:0}),Km=Qt(yT),vT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_T={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ET(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wT[t])?!!e[t]:!1}function Hf(){return ET}var IT=Le({},Qa,{key:function(t){if(t.key){var e=vT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_T[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hf,charCode:function(t){return t.type==="keypress"?uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TT=Qt(IT),xT=Le({},yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qm=Qt(xT),ST=Le({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hf}),AT=Qt(ST),CT=Le({},co,{propertyName:0,elapsedTime:0,pseudoElement:0}),RT=Qt(CT),kT=Le({},yc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NT=Qt(kT),PT=[9,13,27,32],qf=or&&"CompositionEvent"in window,aa=null;or&&"documentMode"in document&&(aa=document.documentMode);var bT=or&&"TextEvent"in window&&!aa,n_=or&&(!qf||aa&&8<aa&&11>=aa),Ym=" ",Xm=!1;function r_(t,e){switch(t){case"keyup":return PT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Si=!1;function DT(t,e){switch(t){case"compositionend":return s_(e);case"keypress":return e.which!==32?null:(Xm=!0,Ym);case"textInput":return t=e.data,t===Ym&&Xm?null:t;default:return null}}function OT(t,e){if(Si)return t==="compositionend"||!qf&&r_(t,e)?(t=t_(),lu=zf=Lr=null,Si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return n_&&e.locale!=="ko"?null:e.data;default:return null}}var LT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LT[t.type]:e==="textarea"}function i_(t,e,n,r){Mv(r),e=Du(e,"onChange"),0<e.length&&(n=new $f("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var la=null,Sa=null;function MT(t){g_(t,0)}function vc(t){var e=Ri(t);if(kv(e))return t}function VT(t,e){if(t==="change")return e}var o_=!1;if(or){var Rh;if(or){var kh="oninput"in document;if(!kh){var Zm=document.createElement("div");Zm.setAttribute("oninput","return;"),kh=typeof Zm.oninput=="function"}Rh=kh}else Rh=!1;o_=Rh&&(!document.documentMode||9<document.documentMode)}function eg(){la&&(la.detachEvent("onpropertychange",a_),Sa=la=null)}function a_(t){if(t.propertyName==="value"&&vc(Sa)){var e=[];i_(e,Sa,t,Vf(t)),Uv(MT,e)}}function jT(t,e,n){t==="focusin"?(eg(),la=e,Sa=n,la.attachEvent("onpropertychange",a_)):t==="focusout"&&eg()}function FT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vc(Sa)}function UT(t,e){if(t==="click")return vc(e)}function BT(t,e){if(t==="input"||t==="change")return vc(e)}function zT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:zT;function Aa(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!id.call(e,s)||!wn(t[s],e[s]))return!1}return!0}function tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ng(t,e){var n=tg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tg(n)}}function l_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?l_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function u_(){for(var t=window,e=Au();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Au(t.document)}return e}function Wf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $T(t){var e=u_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&l_(n.ownerDocument.documentElement,n)){if(r!==null&&Wf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ng(n,i);var o=ng(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HT=or&&"documentMode"in document&&11>=document.documentMode,Ai=null,xd=null,ua=null,Sd=!1;function rg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sd||Ai==null||Ai!==Au(r)||(r=Ai,"selectionStart"in r&&Wf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ua&&Aa(ua,r)||(ua=r,r=Du(xd,"onSelect"),0<r.length&&(e=new $f("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ai)))}function zl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ci={animationend:zl("Animation","AnimationEnd"),animationiteration:zl("Animation","AnimationIteration"),animationstart:zl("Animation","AnimationStart"),transitionend:zl("Transition","TransitionEnd")},Nh={},c_={};or&&(c_=document.createElement("div").style,"AnimationEvent"in window||(delete Ci.animationend.animation,delete Ci.animationiteration.animation,delete Ci.animationstart.animation),"TransitionEvent"in window||delete Ci.transitionend.transition);function _c(t){if(Nh[t])return Nh[t];if(!Ci[t])return t;var e=Ci[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in c_)return Nh[t]=e[n];return t}var h_=_c("animationend"),d_=_c("animationiteration"),f_=_c("animationstart"),p_=_c("transitionend"),m_=new Map,sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function is(t,e){m_.set(t,e),Ks(e,[t])}for(var Ph=0;Ph<sg.length;Ph++){var bh=sg[Ph],qT=bh.toLowerCase(),WT=bh[0].toUpperCase()+bh.slice(1);is(qT,"on"+WT)}is(h_,"onAnimationEnd");is(d_,"onAnimationIteration");is(f_,"onAnimationStart");is("dblclick","onDoubleClick");is("focusin","onFocus");is("focusout","onBlur");is(p_,"onTransitionEnd");Ki("onMouseEnter",["mouseout","mouseover"]);Ki("onMouseLeave",["mouseout","mouseover"]);Ki("onPointerEnter",["pointerout","pointerover"]);Ki("onPointerLeave",["pointerout","pointerover"]);Ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function ig(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qI(r,e,void 0,t),t.currentTarget=null}function g_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],l=u.instance,c=u.currentTarget;if(u=u.listener,l!==i&&s.isPropagationStopped())break e;ig(s,u,c),i=l}else for(o=0;o<r.length;o++){if(u=r[o],l=u.instance,c=u.currentTarget,u=u.listener,l!==i&&s.isPropagationStopped())break e;ig(s,u,c),i=l}}}if(Ru)throw t=wd,Ru=!1,wd=null,t}function Re(t,e){var n=e[Nd];n===void 0&&(n=e[Nd]=new Set);var r=t+"__bubble";n.has(r)||(y_(e,t,2,!1),n.add(r))}function Dh(t,e,n){var r=0;e&&(r|=4),y_(n,t,r,e)}var $l="_reactListening"+Math.random().toString(36).slice(2);function Ca(t){if(!t[$l]){t[$l]=!0,xv.forEach(function(n){n!=="selectionchange"&&(GT.has(n)||Dh(n,!1,t),Dh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$l]||(e[$l]=!0,Dh("selectionchange",!1,e))}}function y_(t,e,n,r){switch(e_(e)){case 1:var s=aT;break;case 4:s=lT;break;default:s=Bf}n=s.bind(null,e,n,t),s=void 0,!_d||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Oh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;u!==null;){if(o=ks(u),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}u=u.parentNode}}r=r.return}Uv(function(){var c=i,d=Vf(n),m=[];e:{var g=m_.get(t);if(g!==void 0){var _=$f,C=t;switch(t){case"keypress":if(uu(n)===0)break e;case"keydown":case"keyup":_=TT;break;case"focusin":C="focus",_=Ch;break;case"focusout":C="blur",_=Ch;break;case"beforeblur":case"afterblur":_=Ch;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=hT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=AT;break;case h_:case d_:case f_:_=pT;break;case p_:_=RT;break;case"scroll":_=uT;break;case"wheel":_=NT;break;case"copy":case"cut":case"paste":_=gT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Qm}var k=(e&4)!==0,b=!k&&t==="scroll",A=k?g!==null?g+"Capture":null:g;k=[];for(var E=c,w;E!==null;){w=E;var D=w.stateNode;if(w.tag===5&&D!==null&&(w=D,A!==null&&(D=Ea(E,A),D!=null&&k.push(Ra(E,D,w)))),b)break;E=E.return}0<k.length&&(g=new _(g,C,null,n,d),m.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==yd&&(C=n.relatedTarget||n.fromElement)&&(ks(C)||C[ar]))break e;if((_||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,_?(C=n.relatedTarget||n.toElement,_=c,C=C?ks(C):null,C!==null&&(b=Qs(C),C!==b||C.tag!==5&&C.tag!==6)&&(C=null)):(_=null,C=c),_!==C)){if(k=Gm,D="onMouseLeave",A="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(k=Qm,D="onPointerLeave",A="onPointerEnter",E="pointer"),b=_==null?g:Ri(_),w=C==null?g:Ri(C),g=new k(D,E+"leave",_,n,d),g.target=b,g.relatedTarget=w,D=null,ks(d)===c&&(k=new k(A,E+"enter",C,n,d),k.target=w,k.relatedTarget=b,D=k),b=D,_&&C)t:{for(k=_,A=C,E=0,w=k;w;w=vi(w))E++;for(w=0,D=A;D;D=vi(D))w++;for(;0<E-w;)k=vi(k),E--;for(;0<w-E;)A=vi(A),w--;for(;E--;){if(k===A||A!==null&&k===A.alternate)break t;k=vi(k),A=vi(A)}k=null}else k=null;_!==null&&og(m,g,_,k,!1),C!==null&&b!==null&&og(m,b,C,k,!0)}}e:{if(g=c?Ri(c):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var V=VT;else if(Jm(g))if(o_)V=BT;else{V=FT;var F=jT}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=UT);if(V&&(V=V(t,c))){i_(m,V,n,d);break e}F&&F(t,g,c),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&dd(g,"number",g.value)}switch(F=c?Ri(c):window,t){case"focusin":(Jm(F)||F.contentEditable==="true")&&(Ai=F,xd=c,ua=null);break;case"focusout":ua=xd=Ai=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,rg(m,n,d);break;case"selectionchange":if(HT)break;case"keydown":case"keyup":rg(m,n,d)}var I;if(qf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Si?r_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(n_&&n.locale!=="ko"&&(Si||v!=="onCompositionStart"?v==="onCompositionEnd"&&Si&&(I=t_()):(Lr=d,zf="value"in Lr?Lr.value:Lr.textContent,Si=!0)),F=Du(c,v),0<F.length&&(v=new Km(v,t,null,n,d),m.push({event:v,listeners:F}),I?v.data=I:(I=s_(n),I!==null&&(v.data=I)))),(I=bT?DT(t,n):OT(t,n))&&(c=Du(c,"onBeforeInput"),0<c.length&&(d=new Km("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:c}),d.data=I))}g_(m,e)})}function Ra(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Du(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ea(t,n),i!=null&&r.unshift(Ra(t,i,s)),i=Ea(t,e),i!=null&&r.push(Ra(t,i,s))),t=t.return}return r}function vi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function og(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,l=u.alternate,c=u.stateNode;if(l!==null&&l===r)break;u.tag===5&&c!==null&&(u=c,s?(l=Ea(n,i),l!=null&&o.unshift(Ra(n,l,u))):s||(l=Ea(n,i),l!=null&&o.push(Ra(n,l,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var KT=/\r\n?/g,QT=/\u0000|\uFFFD/g;function ag(t){return(typeof t=="string"?t:""+t).replace(KT,`
`).replace(QT,"")}function Hl(t,e,n){if(e=ag(e),ag(t)!==e&&n)throw Error(U(425))}function Ou(){}var Ad=null,Cd=null;function Rd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kd=typeof setTimeout=="function"?setTimeout:void 0,YT=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,XT=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(t){return lg.resolve(null).then(t).catch(JT)}:kd;function JT(t){setTimeout(function(){throw t})}function Lh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xa(e)}function zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ug(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ho=Math.random().toString(36).slice(2),kn="__reactFiber$"+ho,ka="__reactProps$"+ho,ar="__reactContainer$"+ho,Nd="__reactEvents$"+ho,ZT="__reactListeners$"+ho,ex="__reactHandles$"+ho;function ks(t){var e=t[kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ar]||n[kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ug(t);t!==null;){if(n=t[kn])return n;t=ug(t)}return e}t=n,n=t.parentNode}return null}function Ya(t){return t=t[kn]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ri(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function wc(t){return t[ka]||null}var Pd=[],ki=-1;function os(t){return{current:t}}function Ne(t){0>ki||(t.current=Pd[ki],Pd[ki]=null,ki--)}function Te(t,e){ki++,Pd[ki]=t.current,t.current=e}var Jr={},Ct=os(Jr),Vt=os(!1),Ms=Jr;function Qi(t,e){var n=t.type.contextTypes;if(!n)return Jr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function Lu(){Ne(Vt),Ne(Ct)}function cg(t,e,n){if(Ct.current!==Jr)throw Error(U(168));Te(Ct,e),Te(Vt,n)}function v_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,jI(t)||"Unknown",s));return Le({},n,r)}function Mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jr,Ms=Ct.current,Te(Ct,t),Te(Vt,Vt.current),!0}function hg(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=v_(t,e,Ms),r.__reactInternalMemoizedMergedChildContext=t,Ne(Vt),Ne(Ct),Te(Ct,t)):Ne(Vt),Te(Vt,n)}var Yn=null,Ec=!1,Mh=!1;function __(t){Yn===null?Yn=[t]:Yn.push(t)}function tx(t){Ec=!0,__(t)}function as(){if(!Mh&&Yn!==null){Mh=!0;var t=0,e=_e;try{var n=Yn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yn=null,Ec=!1}catch(s){throw Yn!==null&&(Yn=Yn.slice(t+1)),Hv(jf,as),s}finally{_e=e,Mh=!1}}return null}var Ni=[],Pi=0,Vu=null,ju=0,tn=[],nn=0,Vs=null,Xn=1,Jn="";function As(t,e){Ni[Pi++]=ju,Ni[Pi++]=Vu,Vu=t,ju=e}function w_(t,e,n){tn[nn++]=Xn,tn[nn++]=Jn,tn[nn++]=Vs,Vs=t;var r=Xn;t=Jn;var s=32-yn(r)-1;r&=~(1<<s),n+=1;var i=32-yn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xn=1<<32-yn(e)+s|n<<s|r,Jn=i+t}else Xn=1<<i|n<<s|r,Jn=t}function Gf(t){t.return!==null&&(As(t,1),w_(t,1,0))}function Kf(t){for(;t===Vu;)Vu=Ni[--Pi],Ni[Pi]=null,ju=Ni[--Pi],Ni[Pi]=null;for(;t===Vs;)Vs=tn[--nn],tn[nn]=null,Jn=tn[--nn],tn[nn]=null,Xn=tn[--nn],tn[nn]=null}var qt=null,$t=null,be=!1,mn=null;function E_(t,e){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,$t=zr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vs!==null?{id:Xn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,$t=null,!0):!1;default:return!1}}function bd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dd(t){if(be){var e=$t;if(e){var n=e;if(!dg(t,e)){if(bd(t))throw Error(U(418));e=zr(n.nextSibling);var r=qt;e&&dg(t,e)?E_(r,n):(t.flags=t.flags&-4097|2,be=!1,qt=t)}}else{if(bd(t))throw Error(U(418));t.flags=t.flags&-4097|2,be=!1,qt=t}}}function fg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function ql(t){if(t!==qt)return!1;if(!be)return fg(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rd(t.type,t.memoizedProps)),e&&(e=$t)){if(bd(t))throw I_(),Error(U(418));for(;e;)E_(t,e),e=zr(e.nextSibling)}if(fg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=zr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=qt?zr(t.stateNode.nextSibling):null;return!0}function I_(){for(var t=$t;t;)t=zr(t.nextSibling)}function Yi(){$t=qt=null,be=!1}function Qf(t){mn===null?mn=[t]:mn.push(t)}var nx=mr.ReactCurrentBatchConfig;function Wo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Wl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pg(t){var e=t._init;return e(t._payload)}function T_(t){function e(A,E){if(t){var w=A.deletions;w===null?(A.deletions=[E],A.flags|=16):w.push(E)}}function n(A,E){if(!t)return null;for(;E!==null;)e(A,E),E=E.sibling;return null}function r(A,E){for(A=new Map;E!==null;)E.key!==null?A.set(E.key,E):A.set(E.index,E),E=E.sibling;return A}function s(A,E){return A=Wr(A,E),A.index=0,A.sibling=null,A}function i(A,E,w){return A.index=w,t?(w=A.alternate,w!==null?(w=w.index,w<E?(A.flags|=2,E):w):(A.flags|=2,E)):(A.flags|=1048576,E)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function u(A,E,w,D){return E===null||E.tag!==6?(E=$h(w,A.mode,D),E.return=A,E):(E=s(E,w),E.return=A,E)}function l(A,E,w,D){var V=w.type;return V===xi?d(A,E,w.props.children,D,w.key):E!==null&&(E.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Cr&&pg(V)===E.type)?(D=s(E,w.props),D.ref=Wo(A,E,w),D.return=A,D):(D=gu(w.type,w.key,w.props,null,A.mode,D),D.ref=Wo(A,E,w),D.return=A,D)}function c(A,E,w,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=Hh(w,A.mode,D),E.return=A,E):(E=s(E,w.children||[]),E.return=A,E)}function d(A,E,w,D,V){return E===null||E.tag!==7?(E=Os(w,A.mode,D,V),E.return=A,E):(E=s(E,w),E.return=A,E)}function m(A,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=$h(""+E,A.mode,w),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ll:return w=gu(E.type,E.key,E.props,null,A.mode,w),w.ref=Wo(A,null,E),w.return=A,w;case Ti:return E=Hh(E,A.mode,w),E.return=A,E;case Cr:var D=E._init;return m(A,D(E._payload),w)}if(Xo(E)||Bo(E))return E=Os(E,A.mode,w,null),E.return=A,E;Wl(A,E)}return null}function g(A,E,w,D){var V=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return V!==null?null:u(A,E,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ll:return w.key===V?l(A,E,w,D):null;case Ti:return w.key===V?c(A,E,w,D):null;case Cr:return V=w._init,g(A,E,V(w._payload),D)}if(Xo(w)||Bo(w))return V!==null?null:d(A,E,w,D,null);Wl(A,w)}return null}function _(A,E,w,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return A=A.get(w)||null,u(E,A,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ll:return A=A.get(D.key===null?w:D.key)||null,l(E,A,D,V);case Ti:return A=A.get(D.key===null?w:D.key)||null,c(E,A,D,V);case Cr:var F=D._init;return _(A,E,w,F(D._payload),V)}if(Xo(D)||Bo(D))return A=A.get(w)||null,d(E,A,D,V,null);Wl(E,D)}return null}function C(A,E,w,D){for(var V=null,F=null,I=E,v=E=0,T=null;I!==null&&v<w.length;v++){I.index>v?(T=I,I=null):T=I.sibling;var S=g(A,I,w[v],D);if(S===null){I===null&&(I=T);break}t&&I&&S.alternate===null&&e(A,I),E=i(S,E,v),F===null?V=S:F.sibling=S,F=S,I=T}if(v===w.length)return n(A,I),be&&As(A,v),V;if(I===null){for(;v<w.length;v++)I=m(A,w[v],D),I!==null&&(E=i(I,E,v),F===null?V=I:F.sibling=I,F=I);return be&&As(A,v),V}for(I=r(A,I);v<w.length;v++)T=_(I,A,v,w[v],D),T!==null&&(t&&T.alternate!==null&&I.delete(T.key===null?v:T.key),E=i(T,E,v),F===null?V=T:F.sibling=T,F=T);return t&&I.forEach(function(R){return e(A,R)}),be&&As(A,v),V}function k(A,E,w,D){var V=Bo(w);if(typeof V!="function")throw Error(U(150));if(w=V.call(w),w==null)throw Error(U(151));for(var F=V=null,I=E,v=E=0,T=null,S=w.next();I!==null&&!S.done;v++,S=w.next()){I.index>v?(T=I,I=null):T=I.sibling;var R=g(A,I,S.value,D);if(R===null){I===null&&(I=T);break}t&&I&&R.alternate===null&&e(A,I),E=i(R,E,v),F===null?V=R:F.sibling=R,F=R,I=T}if(S.done)return n(A,I),be&&As(A,v),V;if(I===null){for(;!S.done;v++,S=w.next())S=m(A,S.value,D),S!==null&&(E=i(S,E,v),F===null?V=S:F.sibling=S,F=S);return be&&As(A,v),V}for(I=r(A,I);!S.done;v++,S=w.next())S=_(I,A,v,S.value,D),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?v:S.key),E=i(S,E,v),F===null?V=S:F.sibling=S,F=S);return t&&I.forEach(function(N){return e(A,N)}),be&&As(A,v),V}function b(A,E,w,D){if(typeof w=="object"&&w!==null&&w.type===xi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ll:e:{for(var V=w.key,F=E;F!==null;){if(F.key===V){if(V=w.type,V===xi){if(F.tag===7){n(A,F.sibling),E=s(F,w.props.children),E.return=A,A=E;break e}}else if(F.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Cr&&pg(V)===F.type){n(A,F.sibling),E=s(F,w.props),E.ref=Wo(A,F,w),E.return=A,A=E;break e}n(A,F);break}else e(A,F);F=F.sibling}w.type===xi?(E=Os(w.props.children,A.mode,D,w.key),E.return=A,A=E):(D=gu(w.type,w.key,w.props,null,A.mode,D),D.ref=Wo(A,E,w),D.return=A,A=D)}return o(A);case Ti:e:{for(F=w.key;E!==null;){if(E.key===F)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){n(A,E.sibling),E=s(E,w.children||[]),E.return=A,A=E;break e}else{n(A,E);break}else e(A,E);E=E.sibling}E=Hh(w,A.mode,D),E.return=A,A=E}return o(A);case Cr:return F=w._init,b(A,E,F(w._payload),D)}if(Xo(w))return C(A,E,w,D);if(Bo(w))return k(A,E,w,D);Wl(A,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(n(A,E.sibling),E=s(E,w),E.return=A,A=E):(n(A,E),E=$h(w,A.mode,D),E.return=A,A=E),o(A)):n(A,E)}return b}var Xi=T_(!0),x_=T_(!1),Fu=os(null),Uu=null,bi=null,Yf=null;function Xf(){Yf=bi=Uu=null}function Jf(t){var e=Fu.current;Ne(Fu),t._currentValue=e}function Od(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bi(t,e){Uu=t,Yf=bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mt=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if(Yf!==t)if(t={context:t,memoizedValue:e,next:null},bi===null){if(Uu===null)throw Error(U(308));bi=t,Uu.dependencies={lanes:0,firstContext:t}}else bi=bi.next=t;return e}var Ns=null;function Zf(t){Ns===null?Ns=[t]:Ns.push(t)}function S_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Zf(e)):(n.next=s.next,s.next=n),e.interleaved=n,lr(t,r)}function lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Rr=!1;function ep(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function A_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $r(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,lr(t,n)}return s=r.interleaved,s===null?(e.next=e,Zf(r)):(e.next=s.next,s.next=e),r.interleaved=e,lr(t,n)}function cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ff(t,n)}}function mg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bu(t,e,n,r){var s=t.updateQueue;Rr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var l=u,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,u=d.lastBaseUpdate,u!==o&&(u===null?d.firstBaseUpdate=c:u.next=c,d.lastBaseUpdate=l))}if(i!==null){var m=s.baseState;o=0,d=c=l=null,u=i;do{var g=u.lane,_=u.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:_,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=t,k=u;switch(g=e,_=n,k.tag){case 1:if(C=k.payload,typeof C=="function"){m=C.call(_,m,g);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=k.payload,g=typeof C=="function"?C.call(_,m,g):C,g==null)break e;m=Le({},m,g);break e;case 2:Rr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[u]:g.push(u))}else _={eventTime:_,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},d===null?(c=d=_,l=m):d=d.next=_,o|=g;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;g=u,u=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(l=m),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Fs|=o,t.lanes=o,t.memoizedState=m}}function gg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Xa={},Pn=os(Xa),Na=os(Xa),Pa=os(Xa);function Ps(t){if(t===Xa)throw Error(U(174));return t}function tp(t,e){switch(Te(Pa,e),Te(Na,t),Te(Pn,Xa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pd(e,t)}Ne(Pn),Te(Pn,e)}function Ji(){Ne(Pn),Ne(Na),Ne(Pa)}function C_(t){Ps(Pa.current);var e=Ps(Pn.current),n=pd(e,t.type);e!==n&&(Te(Na,t),Te(Pn,n))}function np(t){Na.current===t&&(Ne(Pn),Ne(Na))}var De=os(0);function zu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vh=[];function rp(){for(var t=0;t<Vh.length;t++)Vh[t]._workInProgressVersionPrimary=null;Vh.length=0}var hu=mr.ReactCurrentDispatcher,jh=mr.ReactCurrentBatchConfig,js=0,Oe=null,Qe=null,Ze=null,$u=!1,ca=!1,ba=0,rx=0;function _t(){throw Error(U(321))}function sp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function ip(t,e,n,r,s,i){if(js=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hu.current=t===null||t.memoizedState===null?ax:lx,t=n(r,s),ca){i=0;do{if(ca=!1,ba=0,25<=i)throw Error(U(301));i+=1,Ze=Qe=null,e.updateQueue=null,hu.current=ux,t=n(r,s)}while(ca)}if(hu.current=Hu,e=Qe!==null&&Qe.next!==null,js=0,Ze=Qe=Oe=null,$u=!1,e)throw Error(U(300));return t}function op(){var t=ba!==0;return ba=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Oe.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function an(){if(Qe===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=Ze===null?Oe.memoizedState:Ze.next;if(e!==null)Ze=e,Qe=t;else{if(t===null)throw Error(U(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Ze===null?Oe.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function Da(t,e){return typeof e=="function"?e(t):e}function Fh(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,l=null,c=i;do{var d=c.lane;if((js&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(u=l=m,o=r):l=l.next=m,Oe.lanes|=d,Fs|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=u,wn(r,e.memoizedState)||(Mt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,Fs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Uh(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);wn(i,e.memoizedState)||(Mt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function R_(){}function k_(t,e){var n=Oe,r=an(),s=e(),i=!wn(r.memoizedState,s);if(i&&(r.memoizedState=s,Mt=!0),r=r.queue,ap(b_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Oa(9,P_.bind(null,n,r,s,e),void 0,null),et===null)throw Error(U(349));js&30||N_(n,e,s)}return s}function N_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function P_(t,e,n,r){e.value=n,e.getSnapshot=r,D_(e)&&O_(t)}function b_(t,e,n){return n(function(){D_(e)&&O_(t)})}function D_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function O_(t){var e=lr(t,1);e!==null&&vn(e,t,1,-1)}function yg(t){var e=Rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:t},e.queue=t,t=t.dispatch=ox.bind(null,Oe,t),[e.memoizedState,t]}function Oa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function L_(){return an().memoizedState}function du(t,e,n,r){var s=Rn();Oe.flags|=t,s.memoizedState=Oa(1|e,n,void 0,r===void 0?null:r)}function Ic(t,e,n,r){var s=an();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,r!==null&&sp(r,o.deps)){s.memoizedState=Oa(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=Oa(1|e,n,i,r)}function vg(t,e){return du(8390656,8,t,e)}function ap(t,e){return Ic(2048,8,t,e)}function M_(t,e){return Ic(4,2,t,e)}function V_(t,e){return Ic(4,4,t,e)}function j_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function F_(t,e,n){return n=n!=null?n.concat([t]):null,Ic(4,4,j_.bind(null,e,t),n)}function lp(){}function U_(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function B_(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function z_(t,e,n){return js&21?(wn(n,e)||(n=Gv(),Oe.lanes|=n,Fs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mt=!0),t.memoizedState=n)}function sx(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=jh.transition;jh.transition={};try{t(!1),e()}finally{_e=n,jh.transition=r}}function $_(){return an().memoizedState}function ix(t,e,n){var r=qr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},H_(t))q_(e,n);else if(n=S_(t,e,n,r),n!==null){var s=Nt();vn(n,t,r,s),W_(n,e,r)}}function ox(t,e,n){var r=qr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(H_(t))q_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,wn(u,o)){var l=e.interleaved;l===null?(s.next=s,Zf(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=S_(t,e,s,r),n!==null&&(s=Nt(),vn(n,t,r,s),W_(n,e,r))}}function H_(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function q_(t,e){ca=$u=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function W_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ff(t,n)}}var Hu={readContext:on,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},ax={readContext:on,useCallback:function(t,e){return Rn().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:vg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,du(4194308,4,j_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return du(4194308,4,t,e)},useInsertionEffect:function(t,e){return du(4,2,t,e)},useMemo:function(t,e){var n=Rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ix.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Rn();return t={current:t},e.memoizedState=t},useState:yg,useDebugValue:lp,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=yg(!1),e=t[0];return t=sx.bind(null,t[1]),Rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=Rn();if(be){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),et===null)throw Error(U(349));js&30||N_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,vg(b_.bind(null,r,i,t),[t]),r.flags|=2048,Oa(9,P_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Rn(),e=et.identifierPrefix;if(be){var n=Jn,r=Xn;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ba++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lx={readContext:on,useCallback:U_,useContext:on,useEffect:ap,useImperativeHandle:F_,useInsertionEffect:M_,useLayoutEffect:V_,useMemo:B_,useReducer:Fh,useRef:L_,useState:function(){return Fh(Da)},useDebugValue:lp,useDeferredValue:function(t){var e=an();return z_(e,Qe.memoizedState,t)},useTransition:function(){var t=Fh(Da)[0],e=an().memoizedState;return[t,e]},useMutableSource:R_,useSyncExternalStore:k_,useId:$_,unstable_isNewReconciler:!1},ux={readContext:on,useCallback:U_,useContext:on,useEffect:ap,useImperativeHandle:F_,useInsertionEffect:M_,useLayoutEffect:V_,useMemo:B_,useReducer:Uh,useRef:L_,useState:function(){return Uh(Da)},useDebugValue:lp,useDeferredValue:function(t){var e=an();return Qe===null?e.memoizedState=t:z_(e,Qe.memoizedState,t)},useTransition:function(){var t=Uh(Da)[0],e=an().memoizedState;return[t,e]},useMutableSource:R_,useSyncExternalStore:k_,useId:$_,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ld(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tc={isMounted:function(t){return(t=t._reactInternals)?Qs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=qr(t),i=sr(r,s);i.payload=e,n!=null&&(i.callback=n),e=$r(t,i,s),e!==null&&(vn(e,t,s,r),cu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=qr(t),i=sr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=$r(t,i,s),e!==null&&(vn(e,t,s,r),cu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=qr(t),s=sr(n,r);s.tag=2,e!=null&&(s.callback=e),e=$r(t,s,r),e!==null&&(vn(e,t,r,n),cu(e,t,r))}};function _g(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Aa(n,r)||!Aa(s,i):!0}function G_(t,e,n){var r=!1,s=Jr,i=e.contextType;return typeof i=="object"&&i!==null?i=on(i):(s=jt(e)?Ms:Ct.current,r=e.contextTypes,i=(r=r!=null)?Qi(t,s):Jr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function wg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tc.enqueueReplaceState(e,e.state,null)}function Md(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ep(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=on(i):(i=jt(e)?Ms:Ct.current,s.context=Qi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ld(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tc.enqueueReplaceState(s,s.state,null),Bu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zi(t,e){try{var n="",r=e;do n+=VI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Bh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cx=typeof WeakMap=="function"?WeakMap:Map;function K_(t,e,n){n=sr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wu||(Wu=!0,Gd=r),Vd(t,e)},n}function Q_(t,e,n){n=sr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Vd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Vd(t,e),typeof r!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Eg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=xx.bind(null,t,e,n),e.then(t,t))}function Ig(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sr(-1,1),e.tag=2,$r(n,e,1))),n.lanes|=1),t)}var hx=mr.ReactCurrentOwner,Mt=!1;function kt(t,e,n,r){e.child=t===null?x_(e,null,n,r):Xi(e,t.child,n,r)}function xg(t,e,n,r,s){n=n.render;var i=e.ref;return Bi(e,s),r=ip(t,e,n,r,i,s),n=op(),t!==null&&!Mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ur(t,e,s)):(be&&n&&Gf(e),e.flags|=1,kt(t,e,r,s),e.child)}function Sg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Y_(t,e,i,r,s)):(t=gu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Aa,n(o,r)&&t.ref===e.ref)return ur(t,e,s)}return e.flags|=1,t=Wr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Y_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Aa(i,r)&&t.ref===e.ref)if(Mt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Mt=!0);else return e.lanes=t.lanes,ur(t,e,s)}return jd(t,e,n,r,s)}function X_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Oi,zt),zt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Oi,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Oi,zt),zt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Oi,zt),zt|=r;return kt(t,e,s,n),e.child}function J_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jd(t,e,n,r,s){var i=jt(n)?Ms:Ct.current;return i=Qi(e,i),Bi(e,s),n=ip(t,e,n,r,i,s),r=op(),t!==null&&!Mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ur(t,e,s)):(be&&r&&Gf(e),e.flags|=1,kt(t,e,n,s),e.child)}function Ag(t,e,n,r,s){if(jt(n)){var i=!0;Mu(e)}else i=!1;if(Bi(e,s),e.stateNode===null)fu(t,e),G_(e,n,r),Md(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=on(c):(c=jt(n)?Ms:Ct.current,c=Qi(e,c));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||l!==c)&&wg(e,o,r,c),Rr=!1;var g=e.memoizedState;o.state=g,Bu(e,r,o,s),l=e.memoizedState,u!==r||g!==l||Vt.current||Rr?(typeof d=="function"&&(Ld(e,n,d,r),l=e.memoizedState),(u=Rr||_g(e,n,u,r,g,l,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,A_(t,e),u=e.memoizedProps,c=e.type===e.elementType?u:fn(e.type,u),o.props=c,m=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=on(l):(l=jt(n)?Ms:Ct.current,l=Qi(e,l));var _=n.getDerivedStateFromProps;(d=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==m||g!==l)&&wg(e,o,r,l),Rr=!1,g=e.memoizedState,o.state=g,Bu(e,r,o,s);var C=e.memoizedState;u!==m||g!==C||Vt.current||Rr?(typeof _=="function"&&(Ld(e,n,_,r),C=e.memoizedState),(c=Rr||_g(e,n,c,r,g,C,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Fd(t,e,n,r,i,s)}function Fd(t,e,n,r,s,i){J_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&hg(e,n,!1),ur(t,e,i);r=e.stateNode,hx.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xi(e,t.child,null,i),e.child=Xi(e,null,u,i)):kt(t,e,u,i),e.memoizedState=r.state,s&&hg(e,n,!0),e.child}function Z_(t){var e=t.stateNode;e.pendingContext?cg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cg(t,e.context,!1),tp(t,e.containerInfo)}function Cg(t,e,n,r,s){return Yi(),Qf(s),e.flags|=256,kt(t,e,n,r),e.child}var Ud={dehydrated:null,treeContext:null,retryLane:0};function Bd(t){return{baseLanes:t,cachePool:null,transitions:null}}function e0(t,e,n){var r=e.pendingProps,s=De.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(De,s&1),t===null)return Dd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ac(o,r,0,null),t=Os(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Bd(n),e.memoizedState=Ud,t):up(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return dx(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Wr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Wr(u,i):(i=Os(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Bd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ud,r}return i=t.child,t=i.sibling,r=Wr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function up(t,e){return e=Ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gl(t,e,n,r){return r!==null&&Qf(r),Xi(e,t.child,null,n),t=up(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Bh(Error(U(422))),Gl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ac({mode:"visible",children:r.children},s,0,null),i=Os(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Xi(e,t.child,null,o),e.child.memoizedState=Bd(o),e.memoizedState=Ud,i);if(!(e.mode&1))return Gl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(U(419)),r=Bh(i,r,void 0),Gl(t,e,o,r)}if(u=(o&t.childLanes)!==0,Mt||u){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,lr(t,s),vn(r,t,s,-1))}return mp(),r=Bh(Error(U(421))),Gl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Sx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$t=zr(s.nextSibling),qt=e,be=!0,mn=null,t!==null&&(tn[nn++]=Xn,tn[nn++]=Jn,tn[nn++]=Vs,Xn=t.id,Jn=t.overflow,Vs=e),e=up(e,r.children),e.flags|=4096,e)}function Rg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Od(t.return,e,n)}function zh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function t0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(kt(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rg(t,n,e);else if(t.tag===19)Rg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(De,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),zh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}zh(e,!0,n,null,i);break;case"together":zh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ur(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fx(t,e,n){switch(e.tag){case 3:Z_(e),Yi();break;case 5:C_(e);break;case 1:jt(e.type)&&Mu(e);break;case 4:tp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Fu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?e0(t,e,n):(Te(De,De.current&1),t=ur(t,e,n),t!==null?t.sibling:null);Te(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return t0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,X_(t,e,n)}return ur(t,e,n)}var n0,zd,r0,s0;n0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zd=function(){};r0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ps(Pn.current);var i=null;switch(n){case"input":s=cd(t,s),r=cd(t,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=fd(t,s),r=fd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ou)}md(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var u=s[c];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_a.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(u=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(l!=null||u!=null))if(c==="style")if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,u=u?u.__html:void 0,l!=null&&u!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_a.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Re("scroll",t),i||u===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};s0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Go(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function px(t,e,n){var r=e.pendingProps;switch(Kf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return jt(e.type)&&Lu(),wt(e),null;case 3:return r=e.stateNode,Ji(),Ne(Vt),Ne(Ct),rp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ql(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(Yd(mn),mn=null))),zd(t,e),wt(e),null;case 5:np(e);var s=Ps(Pa.current);if(n=e.type,t!==null&&e.stateNode!=null)r0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return wt(e),null}if(t=Ps(Pn.current),ql(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[kn]=e,r[ka]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Zo.length;s++)Re(Zo[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Vm(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":Fm(r,i),Re("invalid",r)}md(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Hl(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Hl(r.textContent,u,t),s=["children",""+u]):_a.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":Ml(r),jm(r,i,!0);break;case"textarea":Ml(r),Um(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ou)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[kn]=e,t[ka]=r,n0(t,e,!1,!1),e.stateNode=t;e:{switch(o=gd(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<Zo.length;s++)Re(Zo[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":Vm(t,r),s=cd(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),Re("invalid",t);break;case"textarea":Fm(t,r),s=fd(t,r),Re("invalid",t);break;default:s=r}md(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var l=u[i];i==="style"?Lv(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Dv(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wa(t,l):typeof l=="number"&&wa(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_a.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Re("scroll",t):l!=null&&Df(t,i,l,o))}switch(n){case"input":Ml(t),jm(t,r,!1);break;case"textarea":Ml(t),Um(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Vi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Vi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ou)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(t&&e.stateNode!=null)s0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Ps(Pa.current),Ps(Pn.current),ql(e)){if(r=e.stateNode,n=e.memoizedProps,r[kn]=e,(i=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Hl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kn]=e,e.stateNode=r}return wt(e),null;case 13:if(Ne(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&$t!==null&&e.mode&1&&!(e.flags&128))I_(),Yi(),e.flags|=98560,i=!1;else if(i=ql(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[kn]=e}else Yi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),i=!1}else mn!==null&&(Yd(mn),mn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ye===0&&(Ye=3):mp())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return Ji(),zd(t,e),t===null&&Ca(e.stateNode.containerInfo),wt(e),null;case 10:return Jf(e.type._context),wt(e),null;case 17:return jt(e.type)&&Lu(),wt(e),null;case 19:if(Ne(De),i=e.memoizedState,i===null)return wt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Go(i,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zu(t),o!==null){for(e.flags|=128,Go(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(De,De.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>eo&&(e.flags|=128,r=!0,Go(i,!1),e.lanes=4194304)}else{if(!r)if(t=zu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Go(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return wt(e),null}else 2*Ue()-i.renderingStartTime>eo&&n!==1073741824&&(e.flags|=128,r=!0,Go(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=De.current,Te(De,r?n&1|2:n&1),e):(wt(e),null);case 22:case 23:return pp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zt&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function mx(t,e){switch(Kf(e),e.tag){case 1:return jt(e.type)&&Lu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ji(),Ne(Vt),Ne(Ct),rp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return np(e),null;case 13:if(Ne(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Yi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(De),null;case 4:return Ji(),null;case 10:return Jf(e.type._context),null;case 22:case 23:return pp(),null;case 24:return null;default:return null}}var Kl=!1,xt=!1,gx=typeof WeakSet=="function"?WeakSet:Set,G=null;function Di(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function $d(t,e,n){try{n()}catch(r){je(t,e,r)}}var kg=!1;function yx(t,e){if(Ad=Pu,t=u_(),Wf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,l=-1,c=0,d=0,m=t,g=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(u=o+s),m!==i||r!==0&&m.nodeType!==3||(l=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++c===s&&(u=o),g===i&&++d===r&&(l=o),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=u===-1||l===-1?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cd={focusedElem:t,selectionRange:n},Pu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var k=C.memoizedProps,b=C.memoizedState,A=e.stateNode,E=A.getSnapshotBeforeUpdate(e.elementType===e.type?k:fn(e.type,k),b);A.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){je(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return C=kg,kg=!1,C}function ha(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&$d(e,n,i)}s=s.next}while(s!==r)}}function xc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function i0(t){var e=t.alternate;e!==null&&(t.alternate=null,i0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kn],delete e[ka],delete e[Nd],delete e[ZT],delete e[ex])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function o0(t){return t.tag===5||t.tag===3||t.tag===4}function Ng(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||o0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ou));else if(r!==4&&(t=t.child,t!==null))for(qd(t,e,n),t=t.sibling;t!==null;)qd(t,e,n),t=t.sibling}function Wd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wd(t,e,n),t=t.sibling;t!==null;)Wd(t,e,n),t=t.sibling}var ot=null,pn=!1;function Sr(t,e,n){for(n=n.child;n!==null;)a0(t,e,n),n=n.sibling}function a0(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(gc,n)}catch{}switch(n.tag){case 5:xt||Di(n,e);case 6:var r=ot,s=pn;ot=null,Sr(t,e,n),ot=r,pn=s,ot!==null&&(pn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(pn?(t=ot,n=n.stateNode,t.nodeType===8?Lh(t.parentNode,n):t.nodeType===1&&Lh(t,n),xa(t)):Lh(ot,n.stateNode));break;case 4:r=ot,s=pn,ot=n.stateNode.containerInfo,pn=!0,Sr(t,e,n),ot=r,pn=s;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&$d(n,e,o),s=s.next}while(s!==r)}Sr(t,e,n);break;case 1:if(!xt&&(Di(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){je(n,e,u)}Sr(t,e,n);break;case 21:Sr(t,e,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,Sr(t,e,n),xt=r):Sr(t,e,n);break;default:Sr(t,e,n)}}function Pg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gx),e.forEach(function(r){var s=Ax.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:ot=u.stateNode,pn=!1;break e;case 3:ot=u.stateNode.containerInfo,pn=!0;break e;case 4:ot=u.stateNode.containerInfo,pn=!0;break e}u=u.return}if(ot===null)throw Error(U(160));a0(i,o,s),ot=null,pn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){je(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)l0(e,t),e=e.sibling}function l0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),Cn(t),r&4){try{ha(3,t,t.return),xc(3,t)}catch(k){je(t,t.return,k)}try{ha(5,t,t.return)}catch(k){je(t,t.return,k)}}break;case 1:dn(e,t),Cn(t),r&512&&n!==null&&Di(n,n.return);break;case 5:if(dn(e,t),Cn(t),r&512&&n!==null&&Di(n,n.return),t.flags&32){var s=t.stateNode;try{wa(s,"")}catch(k){je(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Nv(s,i),gd(u,o);var c=gd(u,i);for(o=0;o<l.length;o+=2){var d=l[o],m=l[o+1];d==="style"?Lv(s,m):d==="dangerouslySetInnerHTML"?Dv(s,m):d==="children"?wa(s,m):Df(s,d,m,c)}switch(u){case"input":hd(s,i);break;case"textarea":Pv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Vi(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?Vi(s,!!i.multiple,i.defaultValue,!0):Vi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ka]=i}catch(k){je(t,t.return,k)}}break;case 6:if(dn(e,t),Cn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){je(t,t.return,k)}}break;case 3:if(dn(e,t),Cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xa(e.containerInfo)}catch(k){je(t,t.return,k)}break;case 4:dn(e,t),Cn(t);break;case 13:dn(e,t),Cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dp=Ue())),r&4&&Pg(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(xt=(c=xt)||d,dn(e,t),xt=c):dn(e,t),Cn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(m=G=d;G!==null;){switch(g=G,_=g.child,g.tag){case 0:case 11:case 14:case 15:ha(4,g,g.return);break;case 1:Di(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(k){je(r,n,k)}}break;case 5:Di(g,g.return);break;case 22:if(g.memoizedState!==null){Dg(m);continue}}_!==null?(_.return=g,G=_):Dg(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=Ov("display",o))}catch(k){je(t,t.return,k)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(k){je(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:dn(e,t),Cn(t),r&4&&Pg(t);break;case 21:break;default:dn(e,t),Cn(t)}}function Cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(o0(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wa(s,""),r.flags&=-33);var i=Ng(t);Wd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=Ng(t);qd(t,u,o);break;default:throw Error(U(161))}}catch(l){je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vx(t,e,n){G=t,u0(t)}function u0(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Kl;if(!o){var u=s.alternate,l=u!==null&&u.memoizedState!==null||xt;u=Kl;var c=xt;if(Kl=o,(xt=l)&&!c)for(G=s;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?Og(s):l!==null?(l.return=o,G=l):Og(s);for(;i!==null;)G=i,u0(i),i=i.sibling;G=s,Kl=u,xt=c}bg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):bg(t)}}function bg(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||xc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&gg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gg(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&xa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}xt||e.flags&512&&Hd(e)}catch(g){je(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Dg(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Og(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xc(4,e)}catch(l){je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){je(e,s,l)}}var i=e.return;try{Hd(e)}catch(l){je(e,i,l)}break;case 5:var o=e.return;try{Hd(e)}catch(l){je(e,o,l)}}}catch(l){je(e,e.return,l)}if(e===t){G=null;break}var u=e.sibling;if(u!==null){u.return=e.return,G=u;break}G=e.return}}var _x=Math.ceil,qu=mr.ReactCurrentDispatcher,cp=mr.ReactCurrentOwner,sn=mr.ReactCurrentBatchConfig,de=0,et=null,He=null,ct=0,zt=0,Oi=os(0),Ye=0,La=null,Fs=0,Sc=0,hp=0,da=null,Ot=null,dp=0,eo=1/0,Qn=null,Wu=!1,Gd=null,Hr=null,Ql=!1,Mr=null,Gu=0,fa=0,Kd=null,pu=-1,mu=0;function Nt(){return de&6?Ue():pu!==-1?pu:pu=Ue()}function qr(t){return t.mode&1?de&2&&ct!==0?ct&-ct:nx.transition!==null?(mu===0&&(mu=Gv()),mu):(t=_e,t!==0||(t=window.event,t=t===void 0?16:e_(t.type)),t):1}function vn(t,e,n,r){if(50<fa)throw fa=0,Kd=null,Error(U(185));Ka(t,n,r),(!(de&2)||t!==et)&&(t===et&&(!(de&2)&&(Sc|=n),Ye===4&&Nr(t,ct)),Ft(t,r),n===1&&de===0&&!(e.mode&1)&&(eo=Ue()+500,Ec&&as()))}function Ft(t,e){var n=t.callbackNode;nT(t,e);var r=Nu(t,t===et?ct:0);if(r===0)n!==null&&$m(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$m(n),e===1)t.tag===0?tx(Lg.bind(null,t)):__(Lg.bind(null,t)),XT(function(){!(de&6)&&as()}),n=null;else{switch(Kv(r)){case 1:n=jf;break;case 4:n=qv;break;case 16:n=ku;break;case 536870912:n=Wv;break;default:n=ku}n=y0(n,c0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function c0(t,e){if(pu=-1,mu=0,de&6)throw Error(U(327));var n=t.callbackNode;if(zi()&&t.callbackNode!==n)return null;var r=Nu(t,t===et?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ku(t,r);else{e=r;var s=de;de|=2;var i=d0();(et!==t||ct!==e)&&(Qn=null,eo=Ue()+500,Ds(t,e));do try{Ix();break}catch(u){h0(t,u)}while(!0);Xf(),qu.current=i,de=s,He!==null?e=0:(et=null,ct=0,e=Ye)}if(e!==0){if(e===2&&(s=Ed(t),s!==0&&(r=s,e=Qd(t,s))),e===1)throw n=La,Ds(t,0),Nr(t,r),Ft(t,Ue()),n;if(e===6)Nr(t,r);else{if(s=t.current.alternate,!(r&30)&&!wx(s)&&(e=Ku(t,r),e===2&&(i=Ed(t),i!==0&&(r=i,e=Qd(t,i))),e===1))throw n=La,Ds(t,0),Nr(t,r),Ft(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Cs(t,Ot,Qn);break;case 3:if(Nr(t,r),(r&130023424)===r&&(e=dp+500-Ue(),10<e)){if(Nu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kd(Cs.bind(null,t,Ot,Qn),e);break}Cs(t,Ot,Qn);break;case 4:if(Nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-yn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_x(r/1960))-r,10<r){t.timeoutHandle=kd(Cs.bind(null,t,Ot,Qn),r);break}Cs(t,Ot,Qn);break;case 5:Cs(t,Ot,Qn);break;default:throw Error(U(329))}}}return Ft(t,Ue()),t.callbackNode===n?c0.bind(null,t):null}function Qd(t,e){var n=da;return t.current.memoizedState.isDehydrated&&(Ds(t,e).flags|=256),t=Ku(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&Yd(e)),t}function Yd(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function wx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nr(t,e){for(e&=~hp,e&=~Sc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function Lg(t){if(de&6)throw Error(U(327));zi();var e=Nu(t,0);if(!(e&1))return Ft(t,Ue()),null;var n=Ku(t,e);if(t.tag!==0&&n===2){var r=Ed(t);r!==0&&(e=r,n=Qd(t,r))}if(n===1)throw n=La,Ds(t,0),Nr(t,e),Ft(t,Ue()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cs(t,Ot,Qn),Ft(t,Ue()),null}function fp(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(eo=Ue()+500,Ec&&as())}}function Us(t){Mr!==null&&Mr.tag===0&&!(de&6)&&zi();var e=de;de|=1;var n=sn.transition,r=_e;try{if(sn.transition=null,_e=1,t)return t()}finally{_e=r,sn.transition=n,de=e,!(de&6)&&as()}}function pp(){zt=Oi.current,Ne(Oi)}function Ds(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YT(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Kf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lu();break;case 3:Ji(),Ne(Vt),Ne(Ct),rp();break;case 5:np(r);break;case 4:Ji();break;case 13:Ne(De);break;case 19:Ne(De);break;case 10:Jf(r.type._context);break;case 22:case 23:pp()}n=n.return}if(et=t,He=t=Wr(t.current,null),ct=zt=e,Ye=0,La=null,hp=Sc=Fs=0,Ot=da=null,Ns!==null){for(e=0;e<Ns.length;e++)if(n=Ns[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ns=null}return t}function h0(t,e){do{var n=He;try{if(Xf(),hu.current=Hu,$u){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$u=!1}if(js=0,Ze=Qe=Oe=null,ca=!1,ba=0,cp.current=null,n===null||n.return===null){Ye=1,La=e,He=null;break}e:{var i=t,o=n.return,u=n,l=e;if(e=ct,u.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=u,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var _=Ig(o);if(_!==null){_.flags&=-257,Tg(_,o,u,i,e),_.mode&1&&Eg(i,c,e),e=_,l=c;var C=e.updateQueue;if(C===null){var k=new Set;k.add(l),e.updateQueue=k}else C.add(l);break e}else{if(!(e&1)){Eg(i,c,e),mp();break e}l=Error(U(426))}}else if(be&&u.mode&1){var b=Ig(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Tg(b,o,u,i,e),Qf(Zi(l,u));break e}}i=l=Zi(l,u),Ye!==4&&(Ye=2),da===null?da=[i]:da.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var A=K_(i,l,e);mg(i,A);break e;case 1:u=l;var E=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Hr===null||!Hr.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Q_(i,u,e);mg(i,D);break e}}i=i.return}while(i!==null)}p0(n)}catch(V){e=V,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function d0(){var t=qu.current;return qu.current=Hu,t===null?Hu:t}function mp(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),et===null||!(Fs&268435455)&&!(Sc&268435455)||Nr(et,ct)}function Ku(t,e){var n=de;de|=2;var r=d0();(et!==t||ct!==e)&&(Qn=null,Ds(t,e));do try{Ex();break}catch(s){h0(t,s)}while(!0);if(Xf(),de=n,qu.current=r,He!==null)throw Error(U(261));return et=null,ct=0,Ye}function Ex(){for(;He!==null;)f0(He)}function Ix(){for(;He!==null&&!GI();)f0(He)}function f0(t){var e=g0(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?p0(t):He=e,cp.current=null}function p0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mx(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,He=null;return}}else if(n=px(n,e,zt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Ye===0&&(Ye=5)}function Cs(t,e,n){var r=_e,s=sn.transition;try{sn.transition=null,_e=1,Tx(t,e,n,r)}finally{sn.transition=s,_e=r}return null}function Tx(t,e,n,r){do zi();while(Mr!==null);if(de&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(rT(t,i),t===et&&(He=et=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ql||(Ql=!0,y0(ku,function(){return zi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=sn.transition,sn.transition=null;var o=_e;_e=1;var u=de;de|=4,cp.current=null,yx(t,n),l0(n,t),$T(Cd),Pu=!!Ad,Cd=Ad=null,t.current=n,vx(n),KI(),de=u,_e=o,sn.transition=i}else t.current=n;if(Ql&&(Ql=!1,Mr=t,Gu=s),i=t.pendingLanes,i===0&&(Hr=null),XI(n.stateNode),Ft(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wu)throw Wu=!1,t=Gd,Gd=null,t;return Gu&1&&t.tag!==0&&zi(),i=t.pendingLanes,i&1?t===Kd?fa++:(fa=0,Kd=t):fa=0,as(),null}function zi(){if(Mr!==null){var t=Kv(Gu),e=sn.transition,n=_e;try{if(sn.transition=null,_e=16>t?16:t,Mr===null)var r=!1;else{if(t=Mr,Mr=null,Gu=0,de&6)throw Error(U(331));var s=de;for(de|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var u=i.deletions;if(u!==null){for(var l=0;l<u.length;l++){var c=u[l];for(G=c;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:ha(8,d,i)}var m=d.child;if(m!==null)m.return=d,G=m;else for(;G!==null;){d=G;var g=d.sibling,_=d.return;if(i0(d),d===c){G=null;break}if(g!==null){g.return=_,G=g;break}G=_}}}var C=i.alternate;if(C!==null){var k=C.child;if(k!==null){C.child=null;do{var b=k.sibling;k.sibling=null,k=b}while(k!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ha(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,G=A;break e}G=i.return}}var E=t.current;for(G=E;G!==null;){o=G;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,G=w;else e:for(o=E;G!==null;){if(u=G,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:xc(9,u)}}catch(V){je(u,u.return,V)}if(u===o){G=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,G=D;break e}G=u.return}}if(de=s,as(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(gc,t)}catch{}r=!0}return r}finally{_e=n,sn.transition=e}}return!1}function Mg(t,e,n){e=Zi(n,e),e=K_(t,e,1),t=$r(t,e,1),e=Nt(),t!==null&&(Ka(t,1,e),Ft(t,e))}function je(t,e,n){if(t.tag===3)Mg(t,t,n);else for(;e!==null;){if(e.tag===3){Mg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hr===null||!Hr.has(r))){t=Zi(n,t),t=Q_(e,t,1),e=$r(e,t,1),t=Nt(),e!==null&&(Ka(e,1,t),Ft(e,t));break}}e=e.return}}function xx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(ct&n)===n&&(Ye===4||Ye===3&&(ct&130023424)===ct&&500>Ue()-dp?Ds(t,0):hp|=n),Ft(t,e)}function m0(t,e){e===0&&(t.mode&1?(e=Fl,Fl<<=1,!(Fl&130023424)&&(Fl=4194304)):e=1);var n=Nt();t=lr(t,e),t!==null&&(Ka(t,e,n),Ft(t,n))}function Sx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),m0(t,n)}function Ax(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),m0(t,n)}var g0;g0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Mt=!1,fx(t,e,n);Mt=!!(t.flags&131072)}else Mt=!1,be&&e.flags&1048576&&w_(e,ju,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fu(t,e),t=e.pendingProps;var s=Qi(e,Ct.current);Bi(e,n),s=ip(null,e,r,t,s,n);var i=op();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,Mu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ep(e),s.updater=Tc,e.stateNode=s,s._reactInternals=e,Md(e,r,t,n),e=Fd(null,e,r,!0,i,n)):(e.tag=0,be&&i&&Gf(e),kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Rx(r),t=fn(r,t),s){case 0:e=jd(null,e,r,t,n);break e;case 1:e=Ag(null,e,r,t,n);break e;case 11:e=xg(null,e,r,t,n);break e;case 14:e=Sg(null,e,r,fn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),jd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Ag(t,e,r,s,n);case 3:e:{if(Z_(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,A_(t,e),Bu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zi(Error(U(423)),e),e=Cg(t,e,r,n,s);break e}else if(r!==s){s=Zi(Error(U(424)),e),e=Cg(t,e,r,n,s);break e}else for($t=zr(e.stateNode.containerInfo.firstChild),qt=e,be=!0,mn=null,n=x_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yi(),r===s){e=ur(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return C_(e),t===null&&Dd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Rd(r,s)?o=null:i!==null&&Rd(r,i)&&(e.flags|=32),J_(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&Dd(e),null;case 13:return e0(t,e,n);case 4:return tp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xi(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),xg(t,e,r,s,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Fu,r._currentValue),r._currentValue=o,i!==null)if(wn(i.value,o)){if(i.children===s.children&&!Vt.current){e=ur(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var l=u.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=sr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Od(i.return,n,e),u.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Od(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Bi(e,n),s=on(s),r=r(s),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,s=fn(r,e.pendingProps),s=fn(r.type,s),Sg(t,e,r,s,n);case 15:return Y_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),fu(t,e),e.tag=1,jt(r)?(t=!0,Mu(e)):t=!1,Bi(e,n),G_(e,r,s),Md(e,r,s,n),Fd(null,e,r,!0,t,n);case 19:return t0(t,e,n);case 22:return X_(t,e,n)}throw Error(U(156,e.tag))};function y0(t,e){return Hv(t,e)}function Cx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,r){return new Cx(t,e,n,r)}function gp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rx(t){if(typeof t=="function")return gp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Lf)return 11;if(t===Mf)return 14}return 2}function Wr(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")gp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xi:return Os(n.children,s,i,e);case Of:o=8,s|=8;break;case od:return t=rn(12,n,e,s|2),t.elementType=od,t.lanes=i,t;case ad:return t=rn(13,n,e,s),t.elementType=ad,t.lanes=i,t;case ld:return t=rn(19,n,e,s),t.elementType=ld,t.lanes=i,t;case Cv:return Ac(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sv:o=10;break e;case Av:o=9;break e;case Lf:o=11;break e;case Mf:o=14;break e;case Cr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=rn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Os(t,e,n,r){return t=rn(7,t,r,e),t.lanes=n,t}function Ac(t,e,n,r){return t=rn(22,t,r,e),t.elementType=Cv,t.lanes=n,t.stateNode={isHidden:!1},t}function $h(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function Hh(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xh(0),this.expirationTimes=xh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yp(t,e,n,r,s,i,o,u,l){return t=new kx(t,e,n,u,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=rn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ep(i),t}function Nx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function v0(t){if(!t)return Jr;t=t._reactInternals;e:{if(Qs(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(jt(n))return v_(t,n,e)}return e}function _0(t,e,n,r,s,i,o,u,l){return t=yp(n,r,!0,t,s,i,o,u,l),t.context=v0(null),n=t.current,r=Nt(),s=qr(n),i=sr(r,s),i.callback=e??null,$r(n,i,s),t.current.lanes=s,Ka(t,s,r),Ft(t,r),t}function Cc(t,e,n,r){var s=e.current,i=Nt(),o=qr(s);return n=v0(n),e.context===null?e.context=n:e.pendingContext=n,e=sr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=$r(s,e,o),t!==null&&(vn(t,s,o,i),cu(t,s,o)),o}function Qu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vp(t,e){Vg(t,e),(t=t.alternate)&&Vg(t,e)}function Px(){return null}var w0=typeof reportError=="function"?reportError:function(t){console.error(t)};function _p(t){this._internalRoot=t}Rc.prototype.render=_p.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Cc(t,e,null,null)};Rc.prototype.unmount=_p.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Us(function(){Cc(null,t,null,null)}),e[ar]=null}};function Rc(t){this._internalRoot=t}Rc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kr.length&&e!==0&&e<kr[n].priority;n++);kr.splice(n,0,t),n===0&&Zv(t)}};function wp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jg(){}function bx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Qu(o);i.call(c)}}var o=_0(e,r,t,0,null,!1,!1,"",jg);return t._reactRootContainer=o,t[ar]=o.current,Ca(t.nodeType===8?t.parentNode:t),Us(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var c=Qu(l);u.call(c)}}var l=yp(t,0,!1,null,null,!1,!1,"",jg);return t._reactRootContainer=l,t[ar]=l.current,Ca(t.nodeType===8?t.parentNode:t),Us(function(){Cc(e,l,n,r)}),l}function Nc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var l=Qu(o);u.call(l)}}Cc(e,o,t,s)}else o=bx(n,e,t,s,r);return Qu(o)}Qv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jo(e.pendingLanes);n!==0&&(Ff(e,n|1),Ft(e,Ue()),!(de&6)&&(eo=Ue()+500,as()))}break;case 13:Us(function(){var r=lr(t,1);if(r!==null){var s=Nt();vn(r,t,1,s)}}),vp(t,1)}};Uf=function(t){if(t.tag===13){var e=lr(t,134217728);if(e!==null){var n=Nt();vn(e,t,134217728,n)}vp(t,134217728)}};Yv=function(t){if(t.tag===13){var e=qr(t),n=lr(t,e);if(n!==null){var r=Nt();vn(n,t,e,r)}vp(t,e)}};Xv=function(){return _e};Jv=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};vd=function(t,e,n){switch(e){case"input":if(hd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wc(r);if(!s)throw Error(U(90));kv(r),hd(r,s)}}}break;case"textarea":Pv(t,n);break;case"select":e=n.value,e!=null&&Vi(t,!!n.multiple,e,!1)}};jv=fp;Fv=Us;var Dx={usingClientEntryPoint:!1,Events:[Ya,Ri,wc,Mv,Vv,fp]},Ko={findFiberByHostInstance:ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ox={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zv(t),t===null?null:t.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||Px,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{gc=Yl.inject(Ox),Nn=Yl}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dx;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wp(e))throw Error(U(200));return Nx(t,e,null,n)};Kt.createRoot=function(t,e){if(!wp(t))throw Error(U(299));var n=!1,r="",s=w0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yp(t,1,!1,null,null,n,!1,r,s),t[ar]=e.current,Ca(t.nodeType===8?t.parentNode:t),new _p(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=zv(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return Us(t)};Kt.hydrate=function(t,e,n){if(!kc(e))throw Error(U(200));return Nc(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!wp(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=w0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_0(e,null,t,1,n??null,s,!1,i,o),t[ar]=e.current,Ca(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Rc(e)};Kt.render=function(t,e,n){if(!kc(e))throw Error(U(200));return Nc(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!kc(t))throw Error(U(40));return t._reactRootContainer?(Us(function(){Nc(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1};Kt.unstable_batchedUpdates=fp;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Nc(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function E0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E0)}catch(t){console.error(t)}}E0(),Ev.exports=Kt;var Lx=Ev.exports,Fg=Lx;sd.createRoot=Fg.createRoot,sd.hydrateRoot=Fg.hydrateRoot;var Mx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Vx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pt=(t,e)=>{const n=B.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:u,...l},c)=>B.createElement("svg",{ref:c,...Mx,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${Vx(t)}`,...l},[...e.map(([d,m])=>B.createElement(d,m)),...(Array.isArray(u)?u:[u])||[]]));return n.displayName=`${t}`,n},jx=pt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),I0=pt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Fx=pt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),T0=pt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Ux=pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Bx=pt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),zx=pt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),$x=pt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Hx=pt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),x0=pt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),qx=pt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Xd=pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Wx=pt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Jd=pt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),S0=pt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Gx=pt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),to=pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class Ja{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const Kx=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},lt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Kx()},Ep=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},Qx=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=Ep(t);lt.publicKey=n.publicKey,lt.blockHeadless=n.blockHeadless,lt.storageProvider=n.storageProvider,lt.blockList=n.blockList,lt.limitRate=n.limitRate,lt.origin=n.origin||e},A0=async(t,e,n={})=>{const r=await fetch(lt.origin+t,{method:"POST",headers:n,body:e}),s=await r.text(),i=new Ja(r.status,s);if(r.ok)return i;throw i},C0=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Yx=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},R0=t=>t.webdriver||!t.languages||t.languages.length===0,k0=()=>new Ja(451,"Unavailable For Headless Browser"),Xx=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Jx=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},Zx=(t,e)=>t instanceof FormData?t.get(e):t[e],N0=(t,e)=>{if(Jx(t))return!1;Xx(t.list,t.watchVariable);const n=Zx(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},P0=()=>new Ja(403,"Forbidden"),eS=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},tS=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},b0=async(t,e,n)=>{if(!e.throttle||!n)return!1;eS(e.throttle,e.id);const r=e.id||t;return await tS(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},D0=()=>new Ja(429,"Too Many Requests"),nS=async(t,e,n,r)=>{const s=Ep(r),i=s.publicKey||lt.publicKey,o=s.blockHeadless||lt.blockHeadless,u=s.storageProvider||lt.storageProvider,l={...lt.blockList,...s.blockList},c={...lt.limitRate,...s.limitRate};return o&&R0(navigator)?Promise.reject(k0()):(C0(i,t,e),Yx(n),n&&N0(l,n)?Promise.reject(P0()):await b0(location.pathname,c,u)?Promise.reject(D0()):A0("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},rS=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},sS=t=>typeof t=="string"?document.querySelector(t):t,iS=async(t,e,n,r)=>{const s=Ep(r),i=s.publicKey||lt.publicKey,o=s.blockHeadless||lt.blockHeadless,u=lt.storageProvider||s.storageProvider,l={...lt.blockList,...s.blockList},c={...lt.limitRate,...s.limitRate};if(o&&R0(navigator))return Promise.reject(k0());const d=sS(n);C0(i,t,e),rS(d);const m=new FormData(d);return N0(l,m)?Promise.reject(P0()):await b0(location.pathname,c,u)?Promise.reject(D0()):(m.append("lib_version","4.4.1"),m.append("service_id",t),m.append("template_id",e),m.append("user_id",i),A0("/api/v1.0/email/send-form",m))},Zd={init:Qx,send:nS,sendForm:iS,EmailJSResponseStatus:Ja};var oS=Object.defineProperty,Yu=Object.getOwnPropertySymbols,O0=Object.prototype.hasOwnProperty,L0=Object.prototype.propertyIsEnumerable,Ug=(t,e,n)=>e in t?oS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ma=(t,e)=>{for(var n in e||(e={}))O0.call(e,n)&&Ug(t,n,e[n]);if(Yu)for(var n of Yu(e))L0.call(e,n)&&Ug(t,n,e[n]);return t},Ip=(t,e)=>{var n={};for(var r in t)O0.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Yu)for(var r of Yu(t))e.indexOf(r)<0&&L0.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Bs;(t=>{const e=class{constructor(l,c,d,m){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version value out of range");if(m<-1||m>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let g=[];for(let C=0;C<this.size;C++)g.push(!1);for(let C=0;C<this.size;C++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const _=this.addEccAndInterleave(d);if(this.drawCodewords(_),m==-1){let C=1e9;for(let k=0;k<8;k++){this.applyMask(k),this.drawFormatBits(k);const b=this.getPenaltyScore();b<C&&(m=k,C=b),this.applyMask(k)}}i(0<=m&&m<=7),this.mask=m,this.applyMask(m),this.drawFormatBits(m),this.isFunction=[]}static encodeText(l,c){const d=t.QrSegment.makeSegments(l);return e.encodeSegments(d,c)}static encodeBinary(l,c){const d=t.QrSegment.makeBytes(l);return e.encodeSegments([d],c)}static encodeSegments(l,c,d=1,m=40,g=-1,_=!0){if(!(e.MIN_VERSION<=d&&d<=m&&m<=e.MAX_VERSION)||g<-1||g>7)throw new RangeError("Invalid value");let C,k;for(C=d;;C++){const w=e.getNumDataCodewords(C,c)*8,D=u.getTotalBits(l,C);if(D<=w){k=D;break}if(C>=m)throw new RangeError("Data too long")}for(const w of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])_&&k<=e.getNumDataCodewords(C,w)*8&&(c=w);let b=[];for(const w of l){r(w.mode.modeBits,4,b),r(w.numChars,w.mode.numCharCountBits(C),b);for(const D of w.getData())b.push(D)}i(b.length==k);const A=e.getNumDataCodewords(C,c)*8;i(b.length<=A),r(0,Math.min(4,A-b.length),b),r(0,(8-b.length%8)%8,b),i(b.length%8==0);for(let w=236;b.length<A;w^=253)r(w,8,b);let E=[];for(;E.length*8<b.length;)E.push(0);return b.forEach((w,D)=>E[D>>>3]|=w<<7-(D&7)),new e(C,c,E,g)}getModule(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),c=l.length;for(let d=0;d<c;d++)for(let m=0;m<c;m++)d==0&&m==0||d==0&&m==c-1||d==c-1&&m==0||this.drawAlignmentPattern(l[d],l[m]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const c=this.errorCorrectionLevel.formatBits<<3|l;let d=c;for(let g=0;g<10;g++)d=d<<1^(d>>>9)*1335;const m=(c<<10|d)^21522;i(m>>>15==0);for(let g=0;g<=5;g++)this.setFunctionModule(8,g,s(m,g));this.setFunctionModule(8,7,s(m,6)),this.setFunctionModule(8,8,s(m,7)),this.setFunctionModule(7,8,s(m,8));for(let g=9;g<15;g++)this.setFunctionModule(14-g,8,s(m,g));for(let g=0;g<8;g++)this.setFunctionModule(this.size-1-g,8,s(m,g));for(let g=8;g<15;g++)this.setFunctionModule(8,this.size-15+g,s(m,g));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let d=0;d<12;d++)l=l<<1^(l>>>11)*7973;const c=this.version<<12|l;i(c>>>18==0);for(let d=0;d<18;d++){const m=s(c,d),g=this.size-11+d%3,_=Math.floor(d/3);this.setFunctionModule(g,_,m),this.setFunctionModule(_,g,m)}}drawFinderPattern(l,c){for(let d=-4;d<=4;d++)for(let m=-4;m<=4;m++){const g=Math.max(Math.abs(m),Math.abs(d)),_=l+m,C=c+d;0<=_&&_<this.size&&0<=C&&C<this.size&&this.setFunctionModule(_,C,g!=2&&g!=4)}}drawAlignmentPattern(l,c){for(let d=-2;d<=2;d++)for(let m=-2;m<=2;m++)this.setFunctionModule(l+m,c+d,Math.max(Math.abs(m),Math.abs(d))!=1)}setFunctionModule(l,c,d){this.modules[c][l]=d,this.isFunction[c][l]=!0}addEccAndInterleave(l){const c=this.version,d=this.errorCorrectionLevel;if(l.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const m=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],g=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],_=Math.floor(e.getNumRawDataModules(c)/8),C=m-_%m,k=Math.floor(_/m);let b=[];const A=e.reedSolomonComputeDivisor(g);for(let w=0,D=0;w<m;w++){let V=l.slice(D,D+k-g+(w<C?0:1));D+=V.length;const F=e.reedSolomonComputeRemainder(V,A);w<C&&V.push(0),b.push(V.concat(F))}let E=[];for(let w=0;w<b[0].length;w++)b.forEach((D,V)=>{(w!=k-g||V>=C)&&E.push(D[w])});return i(E.length==_),E}drawCodewords(l){if(l.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let m=0;m<this.size;m++)for(let g=0;g<2;g++){const _=d-g,k=(d+1&2)==0?this.size-1-m:m;!this.isFunction[k][_]&&c<l.length*8&&(this.modules[k][_]=s(l[c>>>3],7-(c&7)),c++)}}i(c==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let m;switch(l){case 0:m=(d+c)%2==0;break;case 1:m=c%2==0;break;case 2:m=d%3==0;break;case 3:m=(d+c)%3==0;break;case 4:m=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:m=d*c%2+d*c%3==0;break;case 6:m=(d*c%2+d*c%3)%2==0;break;case 7:m=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&m&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let l=0;for(let g=0;g<this.size;g++){let _=!1,C=0,k=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[g][b]==_?(C++,C==5?l+=e.PENALTY_N1:C>5&&l++):(this.finderPenaltyAddHistory(C,k),_||(l+=this.finderPenaltyCountPatterns(k)*e.PENALTY_N3),_=this.modules[g][b],C=1);l+=this.finderPenaltyTerminateAndCount(_,C,k)*e.PENALTY_N3}for(let g=0;g<this.size;g++){let _=!1,C=0,k=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[b][g]==_?(C++,C==5?l+=e.PENALTY_N1:C>5&&l++):(this.finderPenaltyAddHistory(C,k),_||(l+=this.finderPenaltyCountPatterns(k)*e.PENALTY_N3),_=this.modules[b][g],C=1);l+=this.finderPenaltyTerminateAndCount(_,C,k)*e.PENALTY_N3}for(let g=0;g<this.size-1;g++)for(let _=0;_<this.size-1;_++){const C=this.modules[g][_];C==this.modules[g][_+1]&&C==this.modules[g+1][_]&&C==this.modules[g+1][_+1]&&(l+=e.PENALTY_N2)}let c=0;for(const g of this.modules)c=g.reduce((_,C)=>_+(C?1:0),c);const d=this.size*this.size,m=Math.ceil(Math.abs(c*20-d*10)/d)-1;return i(0<=m&&m<=9),l+=m*e.PENALTY_N4,i(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let d=[6];for(let m=this.size-7;d.length<l;m-=c)d.splice(1,0,m);return d}}static getNumRawDataModules(l){if(l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*l+128)*l+64;if(l>=2){const d=Math.floor(l/7)+2;c-=(25*d-10)*d-55,l>=7&&(c-=36)}return i(208<=c&&c<=29648),c}static getNumDataCodewords(l,c){return Math.floor(e.getNumRawDataModules(l)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let c=[];for(let m=0;m<l-1;m++)c.push(0);c.push(1);let d=1;for(let m=0;m<l;m++){for(let g=0;g<c.length;g++)c[g]=e.reedSolomonMultiply(c[g],d),g+1<c.length&&(c[g]^=c[g+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(l,c){let d=c.map(m=>0);for(const m of l){const g=m^d.shift();d.push(0),c.forEach((_,C)=>d[C]^=e.reedSolomonMultiply(_,g))}return d}static reedSolomonMultiply(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let m=7;m>=0;m--)d=d<<1^(d>>>7)*285,d^=(c>>>m&1)*l;return i(d>>>8==0),d}finderPenaltyCountPatterns(l){const c=l[1];i(c<=this.size*3);const d=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(d&&l[0]>=c*4&&l[6]>=c?1:0)+(d&&l[6]>=c*4&&l[0]>=c?1:0)}finderPenaltyTerminateAndCount(l,c,d){return l&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let m=c-1;m>=0;m--)d.push(l>>>m&1)}function s(l,c){return(l>>>c&1)!=0}function i(l){if(!l)throw new Error("Assertion error")}const o=class{constructor(l,c,d){if(this.mode=l,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(l){let c=[];for(const d of l)r(d,8,c);return new o(o.Mode.BYTE,l.length,c)}static makeNumeric(l){if(!o.isNumeric(l))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<l.length;){const m=Math.min(l.length-d,3);r(parseInt(l.substr(d,m),10),m*3+1,c),d+=m}return new o(o.Mode.NUMERIC,l.length,c)}static makeAlphanumeric(l){if(!o.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=l.length;d+=2){let m=o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d))*45;m+=o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d+1)),r(m,11,c)}return d<l.length&&r(o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d)),6,c),new o(o.Mode.ALPHANUMERIC,l.length,c)}static makeSegments(l){return l==""?[]:o.isNumeric(l)?[o.makeNumeric(l)]:o.isAlphanumeric(l)?[o.makeAlphanumeric(l)]:[o.makeBytes(o.toUtf8ByteArray(l))]}static makeEci(l){let c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)r(l,8,c);else if(l<16384)r(2,2,c),r(l,14,c);else if(l<1e6)r(6,3,c),r(l,21,c);else throw new RangeError("ECI assignment value out of range");return new o(o.Mode.ECI,0,c)}static isNumeric(l){return o.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return o.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,c){let d=0;for(const m of l){const g=m.mode.numCharCountBits(c);if(m.numChars>=1<<g)return 1/0;d+=4+g+m.bitData.length}return d}static toUtf8ByteArray(l){l=encodeURI(l);let c=[];for(let d=0;d<l.length;d++)l.charAt(d)!="%"?c.push(l.charCodeAt(d)):(c.push(parseInt(l.substr(d+1,2),16)),d+=2);return c}};let u=o;u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=u})(Bs||(Bs={}));(t=>{(e=>{const n=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(Bs||(Bs={}));(t=>{(e=>{const n=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Bs||(Bs={}));var Li=Bs;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var M0={L:Li.QrCode.Ecc.LOW,M:Li.QrCode.Ecc.MEDIUM,Q:Li.QrCode.Ecc.QUARTILE,H:Li.QrCode.Ecc.HIGH},V0=128,j0="L",F0="#FFFFFF",U0="#000000",B0=!1,Tp=4,aS=.1;function z0(t,e=0){const n=[];return t.forEach(function(r,s){let i=null;r.forEach(function(o,u){if(!o&&i!==null){n.push(`M${i+e} ${s+e}h${u-i}v1H${i+e}z`),i=null;return}if(u===r.length-1){if(!o)return;i===null?n.push(`M${u+e},${s+e} h1v1H${u+e}z`):n.push(`M${i+e},${s+e} h${u+1-i}v1H${i+e}z`);return}o&&i===null&&(i=u)})}),n.join("")}function $0(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function H0(t,e,n,r){if(r==null)return null;const s=n?Tp:0,i=t.length+s*2,o=Math.floor(e*aS),u=i/e,l=(r.width||o)*u,c=(r.height||o)*u,d=r.x==null?t.length/2-l/2:r.x*u,m=r.y==null?t.length/2-c/2:r.y*u;let g=null;if(r.excavate){let _=Math.floor(d),C=Math.floor(m),k=Math.ceil(l+d-_),b=Math.ceil(c+m-C);g={x:_,y:C,w:k,h:b}}return{x:d,y:m,h:c,w:l,excavation:g}}var lS=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function uS(t){const e=t,{value:n,size:r=V0,level:s=j0,bgColor:i=F0,fgColor:o=U0,includeMargin:u=B0,style:l,imageSettings:c}=e,d=Ip(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),m=c==null?void 0:c.src,g=It.useRef(null),_=It.useRef(null),[C,k]=It.useState(!1);It.useEffect(()=>{if(g.current!=null){const E=g.current,w=E.getContext("2d");if(!w)return;let D=Li.QrCode.encodeText(n,M0[s]).getModules();const V=u?Tp:0,F=D.length+V*2,I=H0(D,r,u,c),v=_.current,T=I!=null&&v!==null&&v.complete&&v.naturalHeight!==0&&v.naturalWidth!==0;T&&I.excavation!=null&&(D=$0(D,I.excavation));const S=window.devicePixelRatio||1;E.height=E.width=r*S;const R=r/F*S;w.scale(R,R),w.fillStyle=i,w.fillRect(0,0,F,F),w.fillStyle=o,lS?w.fill(new Path2D(z0(D,V))):D.forEach(function(N,x){N.forEach(function(xe,J){xe&&w.fillRect(J+V,x+V,1,1)})}),T&&w.drawImage(v,I.x+V,I.y+V,I.w,I.h)}}),It.useEffect(()=>{k(!1)},[m]);const b=Ma({height:r,width:r},l);let A=null;return m!=null&&(A=It.createElement("img",{src:m,key:m,style:{display:"none"},onLoad:()=>{k(!0)},ref:_})),It.createElement(It.Fragment,null,It.createElement("canvas",Ma({style:b,height:r,width:r,ref:g},d)),A)}function cS(t){const e=t,{value:n,size:r=V0,level:s=j0,bgColor:i=F0,fgColor:o=U0,includeMargin:u=B0,imageSettings:l}=e,c=Ip(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Li.QrCode.encodeText(n,M0[s]).getModules();const m=u?Tp:0,g=d.length+m*2,_=H0(d,r,u,l);let C=null;l!=null&&_!=null&&(_.excavation!=null&&(d=$0(d,_.excavation)),C=It.createElement("image",{xlinkHref:l.src,height:_.h,width:_.w,x:_.x+m,y:_.y+m,preserveAspectRatio:"none"}));const k=z0(d,m);return It.createElement("svg",Ma({height:r,width:r,viewBox:`0 0 ${g} ${g}`},c),It.createElement("path",{fill:i,d:`M0,0 h${g}v${g}H0z`,shapeRendering:"crispEdges"}),It.createElement("path",{fill:o,d:k,shapeRendering:"crispEdges"}),C)}var hS=t=>{const e=t,{renderAs:n}=e,r=Ip(e,["renderAs"]);return n==="svg"?It.createElement(cS,Ma({},r)):It.createElement(uS,Ma({},r))},Bg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},W0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,m=(i&3)<<4|u>>4;let g=(u&15)<<2|c>>6,_=c&63;l||(_=64,o||(g=64)),r.push(n[d],n[m],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(q0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||c==null||m==null)throw new fS;const g=i<<2|u>>4;if(r.push(g),c!==64){const _=u<<4&240|c>>2;if(r.push(_),m!==64){const C=c<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pS=function(t){const e=q0(t);return W0.encodeByteArray(e,!0)},Xu=function(t){return pS(t).replace(/\./g,"")},G0=function(t){try{return W0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=()=>mS().__FIREBASE_DEFAULTS__,yS=()=>{if(typeof process>"u"||typeof Bg>"u")return;const t=Bg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&G0(t[1]);return e&&JSON.parse(e)},Pc=()=>{try{return gS()||yS()||vS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},K0=t=>{var e,n;return(n=(e=Pc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Q0=t=>{const e=K0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Y0=()=>{var t;return(t=Pc())===null||t===void 0?void 0:t.config},X0=t=>{var e;return(e=Pc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xu(JSON.stringify(n)),Xu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function ES(){var t;const e=(t=Pc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SS(){const t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AS(){return!ES()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CS(){try{return typeof indexedDB=="object"}catch{return!1}}function RS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="FirebaseError";class Fn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kS,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Za.prototype.create)}}class Za{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?NS(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new Fn(s,u,r)}}function NS(t,e){return t.replace(PS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PS=/\{\$([^}]+)}/g;function bS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ju(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(zg(i)&&zg(o)){if(!Ju(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function zg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function DS(t,e){const n=new OS(t,e);return n.subscribe.bind(n)}class OS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=qh),s.error===void 0&&(s.error=qh),s.complete===void 0&&(s.complete=qh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class Zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _S;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jS(e))try{this.getOrInitializeService({instanceIdentifier:Rs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Rs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rs){return this.instances.has(e)}getOptions(e=Rs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rs){return this.component?this.component.multipleInstances?e:Rs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VS(t){return t===Rs?void 0:t}function jS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const US={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},BS=ce.INFO,zS={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},$S=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=zS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xp{constructor(e){this.name=e,this._logLevel=BS,this._logHandler=$S,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?US[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const HS=(t,e)=>e.some(n=>t instanceof n);let $g,Hg;function qS(){return $g||($g=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WS(){return Hg||(Hg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z0=new WeakMap,ef=new WeakMap,ew=new WeakMap,Wh=new WeakMap,Sp=new WeakMap;function GS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Gr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Z0.set(n,t)}).catch(()=>{}),Sp.set(e,t),e}function KS(t){if(ef.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ef.set(t,e)}let tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ef.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ew.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QS(t){tf=t(tf)}function YS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gh(this),e,...n);return ew.set(r,e.sort?e.sort():[e]),Gr(r)}:WS().includes(t)?function(...e){return t.apply(Gh(this),e),Gr(Z0.get(this))}:function(...e){return Gr(t.apply(Gh(this),e))}}function XS(t){return typeof t=="function"?YS(t):(t instanceof IDBTransaction&&KS(t),HS(t,qS())?new Proxy(t,tf):t)}function Gr(t){if(t instanceof IDBRequest)return GS(t);if(Wh.has(t))return Wh.get(t);const e=XS(t);return e!==t&&(Wh.set(t,e),Sp.set(e,t)),e}const Gh=t=>Sp.get(t);function JS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Gr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Gr(o.result),l.oldVersion,l.newVersion,Gr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),u.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),u}const ZS=["get","getKey","getAll","getAllKeys","count"],e1=["put","add","delete","clear"],Kh=new Map;function qg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kh.get(e))return Kh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=e1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ZS.includes(n)))return;const i=async function(o,...u){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(u.shift())),(await Promise.all([c[n](...u),s&&l.done]))[0]};return Kh.set(e,i),i}QS(t=>({...t,get:(e,n,r)=>qg(e,n)||t.get(e,n,r),has:(e,n)=>!!qg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(n1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function n1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",Wg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new xp("@firebase/app"),r1="@firebase/app-compat",s1="@firebase/analytics-compat",i1="@firebase/analytics",o1="@firebase/app-check-compat",a1="@firebase/app-check",l1="@firebase/auth",u1="@firebase/auth-compat",c1="@firebase/database",h1="@firebase/data-connect",d1="@firebase/database-compat",f1="@firebase/functions",p1="@firebase/functions-compat",m1="@firebase/installations",g1="@firebase/installations-compat",y1="@firebase/messaging",v1="@firebase/messaging-compat",_1="@firebase/performance",w1="@firebase/performance-compat",E1="@firebase/remote-config",I1="@firebase/remote-config-compat",T1="@firebase/storage",x1="@firebase/storage-compat",S1="@firebase/firestore",A1="@firebase/vertexai-preview",C1="@firebase/firestore-compat",R1="firebase",k1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",N1={[nf]:"fire-core",[r1]:"fire-core-compat",[i1]:"fire-analytics",[s1]:"fire-analytics-compat",[a1]:"fire-app-check",[o1]:"fire-app-check-compat",[l1]:"fire-auth",[u1]:"fire-auth-compat",[c1]:"fire-rtdb",[h1]:"fire-data-connect",[d1]:"fire-rtdb-compat",[f1]:"fire-fn",[p1]:"fire-fn-compat",[m1]:"fire-iid",[g1]:"fire-iid-compat",[y1]:"fire-fcm",[v1]:"fire-fcm-compat",[_1]:"fire-perf",[w1]:"fire-perf-compat",[E1]:"fire-rc",[I1]:"fire-rc-compat",[T1]:"fire-gcs",[x1]:"fire-gcs-compat",[S1]:"fire-fst",[C1]:"fire-fst-compat",[A1]:"fire-vertex","fire-js":"fire-js",[R1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,P1=new Map,sf=new Map;function Gg(t,e){try{t.container.addComponent(e)}catch(n){cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zs(t){const e=t.name;if(sf.has(e))return cr.debug(`There were multiple attempts to register component ${e}.`),!1;sf.set(e,t);for(const n of Zu.values())Gg(n,t);for(const n of P1.values())Gg(n,t);return!0}function bc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new Za("app","Firebase",b1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=k1;function tw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Kr.create("bad-app-name",{appName:String(s)});if(n||(n=Y0()),!n)throw Kr.create("no-options");const i=Zu.get(s);if(i){if(Ju(n,i.options)&&Ju(r,i.config))return i;throw Kr.create("duplicate-app",{appName:s})}const o=new FS(s);for(const l of sf.values())o.addComponent(l);const u=new D1(n,r,o);return Zu.set(s,u),u}function Ap(t=rf){const e=Zu.get(t);if(!e&&t===rf&&Y0())return tw();if(!e)throw Kr.create("no-app",{appName:t});return e}function bn(t,e,n){var r;let s=(r=N1[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cr.warn(u.join(" "));return}zs(new Zr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="firebase-heartbeat-database",L1=1,Va="firebase-heartbeat-store";let Qh=null;function nw(){return Qh||(Qh=JS(O1,L1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Va)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kr.create("idb-open",{originalErrorMessage:t.message})})),Qh}async function M1(t){try{const n=(await nw()).transaction(Va),r=await n.objectStore(Va).get(rw(t));return await n.done,r}catch(e){if(e instanceof Fn)cr.warn(e.message);else{const n=Kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cr.warn(n.message)}}}async function Kg(t,e){try{const r=(await nw()).transaction(Va,"readwrite");await r.objectStore(Va).put(e,rw(t)),await r.done}catch(n){if(n instanceof Fn)cr.warn(n.message);else{const r=Kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cr.warn(r.message)}}}function rw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=1024,j1=30*24*60*60*1e3;class F1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new B1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=j1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){cr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qg(),{heartbeatsToSend:r,unsentEntries:s}=U1(this._heartbeatsCache.heartbeats),i=Xu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return cr.warn(n),""}}}function Qg(){return new Date().toISOString().substring(0,10)}function U1(t,e=V1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Yg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Yg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class B1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CS()?RS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await M1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Yg(t){return Xu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t){zs(new Zr("platform-logger",e=>new t1(e),"PRIVATE")),zs(new Zr("heartbeat",e=>new F1(e),"PRIVATE")),bn(nf,Wg,t),bn(nf,Wg,"esm2017"),bn("fire-js","")}z1("");var $1="firebase",H1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn($1,H1,"app");function Cp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function sw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const q1=sw,iw=new Za("auth","Firebase",sw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new xp("@firebase/auth");function W1(t,...e){ec.logLevel<=ce.WARN&&ec.warn(`Auth (${Ys}): ${t}`,...e)}function yu(t,...e){ec.logLevel<=ce.ERROR&&ec.error(`Auth (${Ys}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,...e){throw Rp(t,...e)}function Dn(t,...e){return Rp(t,...e)}function ow(t,e,n){const r=Object.assign(Object.assign({},q1()),{[e]:n});return new Za("auth","Firebase",r).create(e,{appName:t.name})}function Qr(t){return ow(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return iw.create(t,...e)}function ee(t,e,...n){if(!t)throw Rp(e,...n)}function er(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yu(e),new Error(e)}function dr(t,e){t||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function G1(){return Xg()==="http:"||Xg()==="https:"}function Xg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G1()||TS()||"connection"in navigator)?navigator.onLine:!0}function Q1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=wS()||xS()}get(){return K1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(t,e){dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new tl(3e4,6e4);function Dc(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function fo(t,e,n,r,s={}){return lw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=el(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return IS()||(c.referrerPolicy="no-referrer"),aw.fetch()(cw(t,t.config.apiHost,n,u),c)})}async function lw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Y1),e);try{const s=new J1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Xl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[l,c]=u.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Xl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Xl(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ow(t,d,c);hr(t,d)}}catch(s){if(s instanceof Fn)throw s;hr(t,"network-request-failed",{message:String(s)})}}async function uw(t,e,n,r,s={}){const i=await fo(t,e,n,r,s);return"mfaPendingCredential"in i&&hr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function cw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?kp(t.config,s):`${t.config.apiScheme}://${s}`}class J1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dn(this.auth,"network-request-failed")),X1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Dn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(t,e){return fo(t,"POST","/v1/accounts:delete",e)}async function hw(t,e){return fo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eA(t,e=!1){const n=tt(t),r=await n.getIdToken(e),s=Np(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:pa(Yh(s.auth_time)),issuedAtTime:pa(Yh(s.iat)),expirationTime:pa(Yh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Yh(t){return Number(t)*1e3}function Np(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yu("JWT malformed, contained fewer than 3 sections"),null;try{const s=G0(n);return s?JSON.parse(s):(yu("Failed to decode base64 JWT payload"),null)}catch(s){return yu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Jg(t){const e=Np(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fn&&tA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pa(this.lastLoginAt),this.creationTime=pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ja(t,hw(n,{idToken:r}));ee(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?dw(i.providerUserInfo):[],u=sA(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),d=l?c:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new af(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function rA(t){const e=tt(t);await tc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function dw(t){return t.map(e=>{var{providerId:n}=e,r=Cp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(t,e){const n=await lw(t,{},async()=>{const r=el({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=cw(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",aw.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oA(t,e){return fo(t,"POST","/v2/accounts:revokeToken",Dc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=Jg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await iA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new $i;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $i,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Cp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new af(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ja(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eA(this,e)}reload(){return rA(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Qr(this.auth));const e=await this.getIdToken();return await ja(this,Z1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,l,c,d;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(u=n.tenantId)!==null&&u!==void 0?u:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,A=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:D,isAnonymous:V,providerData:F,stsTokenManager:I}=n;ee(w&&I,e,"internal-error");const v=$i.fromJSON(this.name,I);ee(typeof w=="string",e,"internal-error"),Ar(m,e.name),Ar(g,e.name),ee(typeof D=="boolean",e,"internal-error"),ee(typeof V=="boolean",e,"internal-error"),Ar(_,e.name),Ar(C,e.name),Ar(k,e.name),Ar(b,e.name),Ar(A,e.name),Ar(E,e.name);const T=new tr({uid:w,auth:e,email:g,emailVerified:D,displayName:m,isAnonymous:V,photoURL:C,phoneNumber:_,tenantId:k,stsTokenManager:v,createdAt:A,lastLoginAt:E});return F&&Array.isArray(F)&&(T.providerData=F.map(S=>Object.assign({},S))),b&&(T._redirectEventId=b),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new $i;s.updateFromServerResponse(n);const i=new tr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await tc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?dw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new $i;u.updateFromIdToken(r);const l=new tr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new af(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=new Map;function nr(t){dr(t instanceof Function,"Expected a class definition");let e=Zg.get(t);return e?(dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Zg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fw.type="NONE";const ey=fw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t,e,n){return`firebase:${t}:${e}:${n}`}class Hi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=vu(this.userKey,s.apiKey,i),this.fullPersistenceKey=vu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?tr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hi(nr(ey),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||nr(ey);const o=vu(r,e.config.apiKey,e.name);let u=null;for(const c of n)try{const d=await c._get(o);if(d){const m=tr._fromJSON(e,d);c!==i&&(u=m),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Hi(i,e,r):(i=l[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Hi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_w(e))return"Blackberry";if(ww(e))return"Webos";if(mw(e))return"Safari";if((e.includes("chrome/")||gw(e))&&!e.includes("edge/"))return"Chrome";if(vw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pw(t=Rt()){return/firefox\//i.test(t)}function mw(t=Rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gw(t=Rt()){return/crios\//i.test(t)}function yw(t=Rt()){return/iemobile/i.test(t)}function vw(t=Rt()){return/android/i.test(t)}function _w(t=Rt()){return/blackberry/i.test(t)}function ww(t=Rt()){return/webos/i.test(t)}function Pp(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aA(t=Rt()){var e;return Pp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lA(){return SS()&&document.documentMode===10}function Ew(t=Rt()){return Pp(t)||vw(t)||ww(t)||_w(t)||/windows phone/i.test(t)||yw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t,e=[]){let n;switch(t){case"Browser":n=ty(Rt());break;case"Worker":n=`${ty(Rt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ys}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const l=e(i);o(l)}catch(l){u(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(t,e={}){return fo(t,"GET","/v2/passwordPolicy",Dc(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=6;class dA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:hA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(u=l.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ny(this),this.idTokenSubscription=new ny(this),this.beforeStateQueue=new uA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Hi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hw(this,{idToken:e}),r=await tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===u)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Qr(this));const n=e?tt(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cA(this),n=new dA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Za("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&nr(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Hi.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Iw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&W1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Oc(t){return tt(t)}class ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=DS(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pA(t){bp=t}function mA(t){return bp.loadJS(t)}function gA(){return bp.gapiScript}function yA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e){const n=bc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ju(i,e??{}))return s;hr(s,"already-initialized")}return n.initialize({options:e})}function _A(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(nr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wA(t,e,n){const r=Oc(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Tw(e),{host:o,port:u}=EA(e),l=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),IA()}function Tw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EA(t){const e=Tw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ry(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ry(o)}}}function ry(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(t,e){return uw(t,"POST","/v1/accounts:signInWithIdp",Dc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="http://localhost";class $s extends xw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Cp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new $s(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qi(e,n)}buildRequest(){const e={requestUri:TA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=el(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl extends Sw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends nl{constructor(){super("facebook.com")}static credential(e){return $s._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends nl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $s._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return br.credential(n,r)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends nl{constructor(){super("github.com")}static credential(e){return $s._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends nl{constructor(){super("twitter.com")}static credential(e,n){return $s._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Or.credential(n,r)}catch{return null}}}Or.TWITTER_SIGN_IN_METHOD="twitter.com";Or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(t,e){return uw(t,"POST","/v1/accounts:signUp",Dc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await tr._fromIdTokenResponse(e,r,s),o=sy(r);return new es({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=sy(r);return new es({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function sy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t){var e;if(Zn(t.app))return Promise.reject(Qr(t));const n=Oc(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new es({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await xA(n,{returnSecureToken:!0}),s=await es._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends Fn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,nc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new nc(e,n,r,s)}}function Aw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?nc._fromErrorAndOperation(t,i,e,r):i})}async function AA(t,e,n=!1){const r=await ja(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return es._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t,e,n=!1){const{auth:r}=t;if(Zn(r.app))return Promise.reject(Qr(r));const s="reauthenticate";try{const i=await ja(t,Aw(r,s,e,t),n);ee(i.idToken,r,"internal-error");const o=Np(i.idToken);ee(o,r,"internal-error");const{sub:u}=o;return ee(t.uid===u,r,"user-mismatch"),es._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&hr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(t,e,n=!1){if(Zn(t.app))return Promise.reject(Qr(t));const r="signIn",s=await Aw(t,r,e),i=await es._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function kA(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function NA(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function PA(t,e,n,r){return tt(t).onAuthStateChanged(e,n,r)}const rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rc,"1"),this.storage.removeItem(rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=1e3,DA=10;class Rw extends Cw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ew(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);lA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,DA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},bA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rw.type="LOCAL";const OA=Rw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw extends Cw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kw.type="SESSION";const Nw=kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Lc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async c=>c(n.origin,i)),l=await LA(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,l)=>{const c=Dp("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(g.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return window}function VA(t){On().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}async function jA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function UA(){return Pw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="firebaseLocalStorageDb",BA=1,sc="firebaseLocalStorage",Dw="fbase_key";class rl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mc(t,e){return t.transaction([sc],e?"readwrite":"readonly").objectStore(sc)}function zA(){const t=indexedDB.deleteDatabase(bw);return new rl(t).toPromise()}function lf(){const t=indexedDB.open(bw,BA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(sc,{keyPath:Dw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(sc)?e(r):(r.close(),await zA(),e(await lf()))})})}async function iy(t,e,n){const r=Mc(t,!0).put({[Dw]:e,value:n});return new rl(r).toPromise()}async function $A(t,e){const n=Mc(t,!1).get(e),r=await new rl(n).toPromise();return r===void 0?null:r.value}function oy(t,e){const n=Mc(t,!0).delete(e);return new rl(n).toPromise()}const HA=800,qA=3;class Ow{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>qA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lc._getInstance(UA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jA(),!this.activeServiceWorker)return;this.sender=new MA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lf();return await iy(e,rc,"1"),await oy(e,rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>iy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$A(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>oy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Mc(s,!1).getAll();return new rl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ow.type="LOCAL";const WA=Ow;new tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e){return e?nr(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends xw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KA(t){return RA(t.auth,new Op(t),t.bypassAuthState)}function QA(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),CA(n,new Op(t),t.bypassAuthState)}async function YA(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),AA(n,new Op(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KA;case"linkViaPopup":case"linkViaRedirect":return YA;case"reauthViaPopup":case"reauthViaRedirect":return QA;default:hr(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new tl(2e3,1e4);class Mi extends Lw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Mi.currentPopupAction&&Mi.currentPopupAction.cancel(),Mi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=Dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XA.get())};e()}}Mi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="pendingRedirect",_u=new Map;class ZA extends Lw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_u.get(this.auth._key());if(!e){try{const r=await eC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_u.set(this.auth._key(),e)}return this.bypassAuthState||_u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eC(t,e){const n=rC(e),r=nC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function tC(t,e){_u.set(t._key(),e)}function nC(t){return nr(t._redirectPersistence)}function rC(t){return vu(JA,t.config.apiKey,t.name)}async function sC(t,e,n=!1){if(Zn(t.app))return Promise.reject(Qr(t));const r=Oc(t),s=GA(r,e),o=await new ZA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=10*60*1e3;class oC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Mw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Dn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iC&&this.cachedEventUids.clear(),this.cachedEventUids.has(ay(e))}saveEventToCache(e){this.cachedEventUids.add(ay(e)),this.lastProcessedEventTime=Date.now()}}function ay(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Mw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function aC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(t,e={}){return fo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cC=/^https?/;async function hC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lC(t);for(const n of e)try{if(dC(n))return}catch{}hr(t,"unauthorized-domain")}function dC(t){const e=of(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cC.test(n))return!1;if(uC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new tl(3e4,6e4);function ly(){const t=On().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function pC(t){return new Promise((e,n)=>{var r,s,i;function o(){ly(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ly(),n(Dn(t,"network-request-failed"))},timeout:fC.get()})}if(!((s=(r=On().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=On().gapi)===null||i===void 0)&&i.load)o();else{const u=yA("iframefcb");return On()[u]=()=>{gapi.load?o():n(Dn(t,"network-request-failed"))},mA(`${gA()}?onload=${u}`).catch(l=>n(l))}}).catch(e=>{throw wu=null,e})}let wu=null;function mC(t){return wu=wu||pC(t),wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new tl(5e3,15e3),yC="__/auth/iframe",vC="emulator/auth/iframe",_C={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EC(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kp(e,vC):`https://${t.config.authDomain}/${yC}`,r={apiKey:e.apiKey,appName:t.name,v:Ys},s=wC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${el(r).slice(1)}`}async function IC(t){const e=await mC(t),n=On().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:EC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_C,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Dn(t,"network-request-failed"),u=On().setTimeout(()=>{i(o)},gC.get());function l(){On().clearTimeout(u),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xC=500,SC=600,AC="_blank",CC="http://localhost";class uy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RC(t,e,n,r=xC,s=SC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const l=Object.assign(Object.assign({},TC),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Rt().toLowerCase();n&&(u=gw(c)?AC:n),pw(c)&&(e=e||CC,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[_,C])=>`${g}${_}=${C},`,"");if(aA(c)&&u!=="_self")return kC(e||"",u),new uy(null);const m=window.open(e||"",u,d);ee(m,t,"popup-blocked");try{m.focus()}catch{}return new uy(m)}function kC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="__/auth/handler",PC="emulator/auth/handler",bC=encodeURIComponent("fac");async function cy(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ys,eventId:s};if(e instanceof Sw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof nl){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const d of Object.keys(u))u[d]===void 0&&delete u[d];const l=await t._getAppCheckToken(),c=l?`#${bC}=${encodeURIComponent(l)}`:"";return`${DC(t)}?${el(u).slice(1)}${c}`}function DC({config:t}){return t.emulator?kp(t,PC):`https://${t.authDomain}/${NC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="webStorageSupport";class OC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nw,this._completeRedirectFn=sC,this._overrideRedirectResult=tC}async _openPopup(e,n,r,s){var i;dr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await cy(e,n,r,of(),s);return RC(e,o,Dp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await cy(e,n,r,of(),s);return VA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(dr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IC(e),r=new oC(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xh,{type:Xh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Xh];o!==void 0&&n(!!o),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ew()||mw()||Pp()}}const LC=OC;var hy="@firebase/auth",dy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jC(t){zs(new Zr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Iw(t)},c=new fA(r,s,i,l);return _A(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zs(new Zr("auth-internal",e=>{const n=Oc(e.getProvider("auth").getImmediate());return(r=>new MC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(hy,dy,VC(t)),bn(hy,dy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=5*60,UC=X0("authIdTokenMaxAge")||FC;let fy=null;const BC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>UC)return;const s=n==null?void 0:n.token;fy!==s&&(fy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function zC(t=Ap()){const e=bc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vA(t,{popupRedirectResolver:LC,persistence:[WA,OA,Nw]}),r=X0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=BC(i.toString());NA(n,o,()=>o(n.currentUser)),kA(n,u=>o(u))}}const s=K0("auth");return s&&wA(n,`http://${s}`),n}function $C(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}pA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Dn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",$C().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jC("Browser");var py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ls,Vw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function T(){}T.prototype=v.prototype,I.D=v.prototype,I.prototype=new T,I.prototype.constructor=I,I.C=function(S,R,N){for(var x=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)x[xe-2]=arguments[xe];return v.prototype[R].apply(S,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,v,T){T||(T=0);var S=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)S[R]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(R=0;16>R;++R)S[R]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=I.g[0],T=I.g[1],R=I.g[2];var N=I.g[3],x=v+(N^T&(R^N))+S[0]+3614090360&4294967295;v=T+(x<<7&4294967295|x>>>25),x=N+(R^v&(T^R))+S[1]+3905402710&4294967295,N=v+(x<<12&4294967295|x>>>20),x=R+(T^N&(v^T))+S[2]+606105819&4294967295,R=N+(x<<17&4294967295|x>>>15),x=T+(v^R&(N^v))+S[3]+3250441966&4294967295,T=R+(x<<22&4294967295|x>>>10),x=v+(N^T&(R^N))+S[4]+4118548399&4294967295,v=T+(x<<7&4294967295|x>>>25),x=N+(R^v&(T^R))+S[5]+1200080426&4294967295,N=v+(x<<12&4294967295|x>>>20),x=R+(T^N&(v^T))+S[6]+2821735955&4294967295,R=N+(x<<17&4294967295|x>>>15),x=T+(v^R&(N^v))+S[7]+4249261313&4294967295,T=R+(x<<22&4294967295|x>>>10),x=v+(N^T&(R^N))+S[8]+1770035416&4294967295,v=T+(x<<7&4294967295|x>>>25),x=N+(R^v&(T^R))+S[9]+2336552879&4294967295,N=v+(x<<12&4294967295|x>>>20),x=R+(T^N&(v^T))+S[10]+4294925233&4294967295,R=N+(x<<17&4294967295|x>>>15),x=T+(v^R&(N^v))+S[11]+2304563134&4294967295,T=R+(x<<22&4294967295|x>>>10),x=v+(N^T&(R^N))+S[12]+1804603682&4294967295,v=T+(x<<7&4294967295|x>>>25),x=N+(R^v&(T^R))+S[13]+4254626195&4294967295,N=v+(x<<12&4294967295|x>>>20),x=R+(T^N&(v^T))+S[14]+2792965006&4294967295,R=N+(x<<17&4294967295|x>>>15),x=T+(v^R&(N^v))+S[15]+1236535329&4294967295,T=R+(x<<22&4294967295|x>>>10),x=v+(R^N&(T^R))+S[1]+4129170786&4294967295,v=T+(x<<5&4294967295|x>>>27),x=N+(T^R&(v^T))+S[6]+3225465664&4294967295,N=v+(x<<9&4294967295|x>>>23),x=R+(v^T&(N^v))+S[11]+643717713&4294967295,R=N+(x<<14&4294967295|x>>>18),x=T+(N^v&(R^N))+S[0]+3921069994&4294967295,T=R+(x<<20&4294967295|x>>>12),x=v+(R^N&(T^R))+S[5]+3593408605&4294967295,v=T+(x<<5&4294967295|x>>>27),x=N+(T^R&(v^T))+S[10]+38016083&4294967295,N=v+(x<<9&4294967295|x>>>23),x=R+(v^T&(N^v))+S[15]+3634488961&4294967295,R=N+(x<<14&4294967295|x>>>18),x=T+(N^v&(R^N))+S[4]+3889429448&4294967295,T=R+(x<<20&4294967295|x>>>12),x=v+(R^N&(T^R))+S[9]+568446438&4294967295,v=T+(x<<5&4294967295|x>>>27),x=N+(T^R&(v^T))+S[14]+3275163606&4294967295,N=v+(x<<9&4294967295|x>>>23),x=R+(v^T&(N^v))+S[3]+4107603335&4294967295,R=N+(x<<14&4294967295|x>>>18),x=T+(N^v&(R^N))+S[8]+1163531501&4294967295,T=R+(x<<20&4294967295|x>>>12),x=v+(R^N&(T^R))+S[13]+2850285829&4294967295,v=T+(x<<5&4294967295|x>>>27),x=N+(T^R&(v^T))+S[2]+4243563512&4294967295,N=v+(x<<9&4294967295|x>>>23),x=R+(v^T&(N^v))+S[7]+1735328473&4294967295,R=N+(x<<14&4294967295|x>>>18),x=T+(N^v&(R^N))+S[12]+2368359562&4294967295,T=R+(x<<20&4294967295|x>>>12),x=v+(T^R^N)+S[5]+4294588738&4294967295,v=T+(x<<4&4294967295|x>>>28),x=N+(v^T^R)+S[8]+2272392833&4294967295,N=v+(x<<11&4294967295|x>>>21),x=R+(N^v^T)+S[11]+1839030562&4294967295,R=N+(x<<16&4294967295|x>>>16),x=T+(R^N^v)+S[14]+4259657740&4294967295,T=R+(x<<23&4294967295|x>>>9),x=v+(T^R^N)+S[1]+2763975236&4294967295,v=T+(x<<4&4294967295|x>>>28),x=N+(v^T^R)+S[4]+1272893353&4294967295,N=v+(x<<11&4294967295|x>>>21),x=R+(N^v^T)+S[7]+4139469664&4294967295,R=N+(x<<16&4294967295|x>>>16),x=T+(R^N^v)+S[10]+3200236656&4294967295,T=R+(x<<23&4294967295|x>>>9),x=v+(T^R^N)+S[13]+681279174&4294967295,v=T+(x<<4&4294967295|x>>>28),x=N+(v^T^R)+S[0]+3936430074&4294967295,N=v+(x<<11&4294967295|x>>>21),x=R+(N^v^T)+S[3]+3572445317&4294967295,R=N+(x<<16&4294967295|x>>>16),x=T+(R^N^v)+S[6]+76029189&4294967295,T=R+(x<<23&4294967295|x>>>9),x=v+(T^R^N)+S[9]+3654602809&4294967295,v=T+(x<<4&4294967295|x>>>28),x=N+(v^T^R)+S[12]+3873151461&4294967295,N=v+(x<<11&4294967295|x>>>21),x=R+(N^v^T)+S[15]+530742520&4294967295,R=N+(x<<16&4294967295|x>>>16),x=T+(R^N^v)+S[2]+3299628645&4294967295,T=R+(x<<23&4294967295|x>>>9),x=v+(R^(T|~N))+S[0]+4096336452&4294967295,v=T+(x<<6&4294967295|x>>>26),x=N+(T^(v|~R))+S[7]+1126891415&4294967295,N=v+(x<<10&4294967295|x>>>22),x=R+(v^(N|~T))+S[14]+2878612391&4294967295,R=N+(x<<15&4294967295|x>>>17),x=T+(N^(R|~v))+S[5]+4237533241&4294967295,T=R+(x<<21&4294967295|x>>>11),x=v+(R^(T|~N))+S[12]+1700485571&4294967295,v=T+(x<<6&4294967295|x>>>26),x=N+(T^(v|~R))+S[3]+2399980690&4294967295,N=v+(x<<10&4294967295|x>>>22),x=R+(v^(N|~T))+S[10]+4293915773&4294967295,R=N+(x<<15&4294967295|x>>>17),x=T+(N^(R|~v))+S[1]+2240044497&4294967295,T=R+(x<<21&4294967295|x>>>11),x=v+(R^(T|~N))+S[8]+1873313359&4294967295,v=T+(x<<6&4294967295|x>>>26),x=N+(T^(v|~R))+S[15]+4264355552&4294967295,N=v+(x<<10&4294967295|x>>>22),x=R+(v^(N|~T))+S[6]+2734768916&4294967295,R=N+(x<<15&4294967295|x>>>17),x=T+(N^(R|~v))+S[13]+1309151649&4294967295,T=R+(x<<21&4294967295|x>>>11),x=v+(R^(T|~N))+S[4]+4149444226&4294967295,v=T+(x<<6&4294967295|x>>>26),x=N+(T^(v|~R))+S[11]+3174756917&4294967295,N=v+(x<<10&4294967295|x>>>22),x=R+(v^(N|~T))+S[2]+718787259&4294967295,R=N+(x<<15&4294967295|x>>>17),x=T+(N^(R|~v))+S[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(R+(x<<21&4294967295|x>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var T=v-this.blockSize,S=this.B,R=this.h,N=0;N<v;){if(R==0)for(;N<=T;)s(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<v;)if(S[R++]=I.charCodeAt(N++),R==this.blockSize){s(this,S),R=0;break}}else for(;N<v;)if(S[R++]=I[N++],R==this.blockSize){s(this,S),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var T=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=T&255,T/=256;for(this.u(I),I=Array(16),v=T=0;4>v;++v)for(var S=0;32>S;S+=8)I[T++]=this.g[v]>>>S&255;return I};function i(I,v){var T=u;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=v(I)}function o(I,v){this.h=v;for(var T=[],S=!0,R=I.length-1;0<=R;R--){var N=I[R]|0;S&&N==v||(T[R]=N,S=!1)}this.g=T}var u={};function l(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return b(c(-I));for(var v=[],T=1,S=0;I>=T;S++)v[S]=I/T|0,T*=4294967296;return new o(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return b(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(v,8)),S=m,R=0;R<I.length;R+=8){var N=Math.min(8,I.length-R),x=parseInt(I.substring(R,R+N),v);8>N?(N=c(Math.pow(v,N)),S=S.j(N).add(c(x))):(S=S.j(T),S=S.add(c(x)))}return S}var m=l(0),g=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-b(this).m();for(var I=0,v=1,T=0;T<this.g.length;T++){var S=this.i(T);I+=(0<=S?S:4294967296+S)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(k(this))return"-"+b(this).toString(I);for(var v=c(Math.pow(I,6)),T=this,S="";;){var R=D(T,v).g;T=A(T,R.j(v));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(I);if(T=R,C(T))return N+S;for(;6>N.length;)N="0"+N;S=N+S}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=A(this,I),k(I)?-1:C(I)?0:1};function b(I){for(var v=I.g.length,T=[],S=0;S<v;S++)T[S]=~I.g[S];return new o(T,~I.h).add(g)}t.abs=function(){return k(this)?b(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),T=[],S=0,R=0;R<=v;R++){var N=S+(this.i(R)&65535)+(I.i(R)&65535),x=(N>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);S=x>>>16,N&=65535,x&=65535,T[R]=x<<16|N}return new o(T,T[T.length-1]&-2147483648?-1:0)};function A(I,v){return I.add(b(v))}t.j=function(I){if(C(this)||C(I))return m;if(k(this))return k(I)?b(this).j(b(I)):b(b(this).j(I));if(k(I))return b(this.j(b(I)));if(0>this.l(_)&&0>I.l(_))return c(this.m()*I.m());for(var v=this.g.length+I.g.length,T=[],S=0;S<2*v;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<I.g.length;R++){var N=this.i(S)>>>16,x=this.i(S)&65535,xe=I.i(R)>>>16,J=I.i(R)&65535;T[2*S+2*R]+=x*J,E(T,2*S+2*R),T[2*S+2*R+1]+=N*J,E(T,2*S+2*R+1),T[2*S+2*R+1]+=x*xe,E(T,2*S+2*R+1),T[2*S+2*R+2]+=N*xe,E(T,2*S+2*R+2)}for(S=0;S<v;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=v;S<2*v;S++)T[S]=0;return new o(T,0)};function E(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function w(I,v){this.g=I,this.h=v}function D(I,v){if(C(v))throw Error("division by zero");if(C(I))return new w(m,m);if(k(I))return v=D(b(I),v),new w(b(v.g),b(v.h));if(k(v))return v=D(I,b(v)),new w(b(v.g),v.h);if(30<I.g.length){if(k(I)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,S=v;0>=S.l(I);)T=V(T),S=V(S);var R=F(T,1),N=F(S,1);for(S=F(S,2),T=F(T,2);!C(S);){var x=N.add(S);0>=x.l(I)&&(R=R.add(T),N=x),S=F(S,1),T=F(T,1)}return v=A(I,R.j(v)),new w(R,v)}for(R=m;0<=I.l(v);){for(T=Math.max(1,Math.floor(I.m()/v.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),N=c(T),x=N.j(v);k(x)||0<x.l(I);)T-=S,N=c(T),x=N.j(v);C(N)&&(N=g),R=R.add(N),I=A(I,x)}return new w(R,I)}t.A=function(I){return D(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),T=[],S=0;S<v;S++)T[S]=this.i(S)&I.i(S);return new o(T,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),T=[],S=0;S<v;S++)T[S]=this.i(S)|I.i(S);return new o(T,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),T=[],S=0;S<v;S++)T[S]=this.i(S)^I.i(S);return new o(T,this.h^I.h)};function V(I){for(var v=I.g.length+1,T=[],S=0;S<v;S++)T[S]=I.i(S)<<1|I.i(S-1)>>>31;return new o(T,I.h)}function F(I,v){var T=v>>5;v%=32;for(var S=I.g.length-T,R=[],N=0;N<S;N++)R[N]=0<v?I.i(N+T)>>>v|I.i(N+T+1)<<32-v:I.i(N+T);return new o(R,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Vw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ls=o}).apply(typeof py<"u"?py:typeof self<"u"?self:typeof window<"u"?window:{});var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jw,ea,Fw,Eu,uf,Uw,Bw,zw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jl=="object"&&Jl];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var P=a[y];if(!(P in p))break e;p=p[P]}a=a[a.length-1],y=p[a],h=h(y),h!=y&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,y=!1,P={next:function(){if(!y&&p<a.length){var L=p++;return{value:h(L,a[L]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function l(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function d(a,h,p){return a.call.apply(a.bind,arguments)}function m(a,h,p){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),a.apply(h,P)}}return function(){return a.apply(h,arguments)}}function g(a,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,g.apply(null,arguments)}function _(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function C(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(y,P,L){for(var $=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)$[Ie-2]=arguments[Ie];return h.prototype[P].apply(y,$)}}function k(a){const h=a.length;if(0<h){const p=Array(h);for(let y=0;y<h;y++)p[y]=a[y];return p}return[]}function b(a,h){for(let p=1;p<arguments.length;p++){const y=arguments[p];if(l(y)){const P=a.length||0,L=y.length||0;a.length=P+L;for(let $=0;$<L;$++)a[P+$]=y[$]}else a.push(y)}}class A{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(a){return/^[\s\xa0]*$/.test(a)}function w(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var V=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function F(a,h,p){for(const y in a)h.call(p,a[y],y,a)}function I(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function v(a){const h={};for(const p in a)h[p]=a[p];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,h){let p,y;for(let P=1;P<arguments.length;P++){y=arguments[P];for(p in y)a[p]=y[p];for(let L=0;L<T.length;L++)p=T[L],Object.prototype.hasOwnProperty.call(y,p)&&(a[p]=y[p])}}function R(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function N(a){u.setTimeout(()=>{throw a},0)}function x(){var a=Z;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class xe{constructor(){this.h=this.g=null}add(h,p){const y=J.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var J=new A(()=>new Be,a=>a.reset());class Be{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let We,z=!1,Z=new xe,ie=()=>{const a=u.Promise.resolve(void 0);We=()=>{a.then(Se)}};var Se=()=>{for(var a;a=x();){try{a.h.call(a.g)}catch(p){N(p)}var h=J;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}z=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Dt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};u.addEventListener("test",p,h),u.removeEventListener("test",p,h)}catch{}return a}();function ln(a,h){if(Ae.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(V){e:{try{D(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ut[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ln.aa.h.call(this)}}C(ln,Ae);var Ut={2:"touch",3:"pen",4:"mouse"};ln.prototype.h=function(){ln.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Yt="closure_listenable_"+(1e6*Math.random()|0),gr=0;function hl(a,h,p,y,P){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=P,this.key=++gr,this.da=this.fa=!1}function cs(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Zs(a){this.src=a,this.g={},this.h=0}Zs.prototype.add=function(a,h,p,y,P){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var $=vo(a,h,y,P);return-1<$?(h=a[$],p||(h.fa=!1)):(h=new hl(h,this.src,L,!!y,P),h.fa=p,a.push(h)),h};function ei(a,h){var p=h.type;if(p in a.g){var y=a.g[p],P=Array.prototype.indexOf.call(y,h,void 0),L;(L=0<=P)&&Array.prototype.splice.call(y,P,1),L&&(cs(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function vo(a,h,p,y){for(var P=0;P<a.length;++P){var L=a[P];if(!L.da&&L.listener==h&&L.capture==!!p&&L.ha==y)return P}return-1}var yr="closure_lm_"+(1e6*Math.random()|0),ti={};function ni(a,h,p,y,P){if(Array.isArray(h)){for(var L=0;L<h.length;L++)ni(a,h[L],p,y,P);return null}return p=Eo(p),a&&a[Yt]?a.K(h,p,c(y)?!!y.capture:!1,P):dl(a,h,p,!1,y,P)}function dl(a,h,p,y,P,L){if(!h)throw Error("Invalid event type");var $=c(P)?!!P.capture:!!P,Ie=fs(a);if(Ie||(a[yr]=Ie=new Zs(a)),p=Ie.add(h,p,y,$,L),p.proxy)return p;if(y=fl(),p.proxy=y,y.src=a,y.listener=p,a.addEventListener)Dt||(P=$),P===void 0&&(P=!1),a.addEventListener(h.toString(),y,P);else if(a.attachEvent)a.attachEvent(hs(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function fl(){function a(p){return h.call(a.src,a.listener,p)}const h=ds;return a}function _o(a,h,p,y,P){if(Array.isArray(h))for(var L=0;L<h.length;L++)_o(a,h[L],p,y,P);else y=c(y)?!!y.capture:!!y,p=Eo(p),a&&a[Yt]?(a=a.i,h=String(h).toString(),h in a.g&&(L=a.g[h],p=vo(L,p,y,P),-1<p&&(cs(L[p]),Array.prototype.splice.call(L,p,1),L.length==0&&(delete a.g[h],a.h--)))):a&&(a=fs(a))&&(h=a.g[h.toString()],a=-1,h&&(a=vo(h,p,y,P)),(p=-1<a?h[a]:null)&&ri(p))}function ri(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Yt])ei(h.i,a);else{var p=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(p,y,a.capture):h.detachEvent?h.detachEvent(hs(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=fs(h))?(ei(p,a),p.h==0&&(p.src=null,h[yr]=null)):cs(a)}}}function hs(a){return a in ti?ti[a]:ti[a]="on"+a}function ds(a,h){if(a.da)a=!0;else{h=new ln(h,this);var p=a.listener,y=a.ha||a.src;a.fa&&ri(a),a=p.call(y,h)}return a}function fs(a){return a=a[yr],a instanceof Zs?a:null}var wo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eo(a){return typeof a=="function"?a:(a[wo]||(a[wo]=function(h){return a.handleEvent(h)}),a[wo])}function ze(){ge.call(this),this.i=new Zs(this),this.M=this,this.F=null}C(ze,ge),ze.prototype[Yt]=!0,ze.prototype.removeEventListener=function(a,h,p,y){_o(this,a,h,p,y)};function nt(a,h){var p,y=a.F;if(y)for(p=[];y;y=y.F)p.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new Ae(h,a);else if(h instanceof Ae)h.target=h.target||a;else{var P=h;h=new Ae(y,a),S(h,P)}if(P=!0,p)for(var L=p.length-1;0<=L;L--){var $=h.g=p[L];P=In($,y,!0,h)&&P}if($=h.g=a,P=In($,y,!0,h)&&P,P=In($,y,!1,h)&&P,p)for(L=0;L<p.length;L++)$=h.g=p[L],P=In($,y,!1,h)&&P}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],y=0;y<p.length;y++)cs(p[y]);delete a.g[h],a.h--}}this.F=null},ze.prototype.K=function(a,h,p,y){return this.i.add(String(a),h,!1,p,y)},ze.prototype.L=function(a,h,p,y){return this.i.add(String(a),h,!0,p,y)};function In(a,h,p,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,L=0;L<h.length;++L){var $=h[L];if($&&!$.da&&$.capture==p){var Ie=$.listener,st=$.ha||$.src;$.fa&&ei(a.i,$),P=Ie.call(st,y)!==!1&&P}}return P&&!y.defaultPrevented}function pl(a,h,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(a,h||0)}function vr(a){a.g=pl(()=>{a.g=null,a.i&&(a.i=!1,vr(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class nh extends ge{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:vr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bn(a){ge.call(this),this.h=a,this.g={}}C(Bn,ge);var ml=[];function Io(a){F(a.g,function(h,p){this.g.hasOwnProperty(p)&&ri(h)},a),a.g={}}Bn.prototype.N=function(){Bn.aa.N.call(this),Io(this)},Bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var To=u.JSON.stringify,rh=u.JSON.parse,sh=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function gl(){}gl.prototype.h=null;function xo(a){return a.h||(a.h=a.i())}function yl(){}var _r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ps(){Ae.call(this,"d")}C(ps,Ae);function si(){Ae.call(this,"c")}C(si,Ae);var un={},So=null;function wr(){return So=So||new ze}un.La="serverreachability";function Ao(a){Ae.call(this,un.La,a)}C(Ao,Ae);function zn(a){const h=wr();nt(h,new Ao(h))}un.STAT_EVENT="statevent";function Co(a,h){Ae.call(this,un.STAT_EVENT,a),this.stat=h}C(Co,Ae);function Ge(a){const h=wr();nt(h,new Co(h,a))}un.Ma="timingevent";function Ro(a,h){Ae.call(this,un.Ma,a),this.size=h}C(Ro,Ae);function Xt(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},h)}function Er(){this.g=!0}Er.prototype.xa=function(){this.g=!1};function ms(a,h,p,y,P,L){a.info(function(){if(a.g)if(L)for(var $="",Ie=L.split("&"),st=0;st<Ie.length;st++){var pe=Ie[st].split("=");if(1<pe.length){var yt=pe[0];pe=pe[1];var vt=yt.split("_");$=2<=vt.length&&vt[1]=="type"?$+(yt+"="+pe+"&"):$+(yt+"=redacted&")}}else $=null;else $=L;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+h+`
`+p+`
`+$})}function vl(a,h,p,y,P,L,$){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+h+`
`+p+`
`+L+" "+$})}function Tn(a,h,p,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+mt(a,p)+(y?" "+y:"")})}function _l(a,h){a.info(function(){return"TIMEOUT: "+h})}Er.prototype.info=function(){};function mt(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var y=p[a];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var L=P[0];if(L!="noop"&&L!="stop"&&L!="close")for(var $=1;$<P.length;$++)P[$]=""}}}}return To(p)}catch{return h}}var Ir={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ko={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},No;function ii(){}C(ii,gl),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},No=new ii;function Jt(a,h,p,y){this.j=a,this.i=h,this.l=p,this.R=y||1,this.U=new Bn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Po}function Po(){this.i=null,this.g="",this.h=!1}var bo={},oi={};function ai(a,h,p){a.L=1,a.v=Wn(cn(h)),a.m=p,a.P=!0,Do(a,null)}function Do(a,h){a.F=Date.now(),gs(a),a.A=cn(a.v);var p=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),Al(p.i,"t",y),a.C=0,p=a.j.J,a.h=new Po,a.g=Cm(a.j,p?h:null,!a.m),0<a.O&&(a.M=new nh(g(a.Y,a,a.g),a.O)),h=a.U,p=a.g,y=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(ml[0]=P.toString()),P=ml);for(var L=0;L<P.length;L++){var $=ni(p,P[L],y||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),zn(),ms(a.i,a.u,a.A,a.l,a.R,a.m)}Jt.prototype.ca=function(a){a=a.target;const h=this.M;h&&ve(a)==3?h.j():this.Y(a)},Jt.prototype.Y=function(a){try{if(a==this.g)e:{const vt=ve(this.g);var h=this.g.Ba();const yi=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||ye(this.g)))){this.J||vt!=4||h==7||(h==8||0>=yi?zn(3):zn(2)),li(this);var p=this.g.Z();this.X=p;t:if(Oo(this)){var y=ye(this.g);a="";var P=y.length,L=ve(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hn(this),$n(this);var $="";break t}this.h.i=new u.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(L&&h==P-1)});y.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,vl(this.i,this.u,this.A,this.l,this.R,vt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,st=this.g;if((Ie=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ie)){var pe=Ie;break t}}pe=null}if(p=pe)Tn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ys(this,p);else{this.o=!1,this.s=3,Ge(12),Hn(this),$n(this);break e}}if(this.P){p=!0;let hn;for(;!this.J&&this.C<$.length;)if(hn=Lo(this,$),hn==oi){vt==4&&(this.s=4,Ge(14),p=!1),Tn(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==bo){this.s=4,Ge(15),Tn(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else Tn(this.i,this.l,hn,null),ys(this,hn);if(Oo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||$.length!=0||this.h.h||(this.s=1,Ge(16),p=!1),this.o=this.o&&p,!p)Tn(this.i,this.l,$,"[Invalid Chunked Response]"),Hn(this),$n(this);else if(0<$.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),yh(yt),yt.M=!0,Ge(11))}}else Tn(this.i,this.l,$,null),ys(this,$);vt==4&&Hn(this),this.o&&!this.J&&(vt==4?Tm(this.j,this):(this.o=!1,gs(this)))}else Ve(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),Hn(this),$n(this)}}}catch{}finally{}};function Oo(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Lo(a,h){var p=a.C,y=h.indexOf(`
`,p);return y==-1?oi:(p=Number(h.substring(p,y)),isNaN(p)?bo:(y+=1,y+p>h.length?oi:(h=h.slice(y,y+p),a.C=y+p,h)))}Jt.prototype.cancel=function(){this.J=!0,Hn(this)};function gs(a){a.S=Date.now()+a.I,Mo(a,a.I)}function Mo(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Xt(g(a.ba,a),h)}function li(a){a.B&&(u.clearTimeout(a.B),a.B=null)}Jt.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(_l(this.i,this.A),this.L!=2&&(zn(),Ge(17)),Hn(this),this.s=2,$n(this)):Mo(this,this.S-a)};function $n(a){a.j.G==0||a.J||Tm(a.j,a)}function Hn(a){li(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Io(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function ys(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||jo(p.h,a))){if(!a.K&&jo(p.h,a)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var P=y;if(P[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Pl(p),gt(p);else break e;gh(p),Ge(18)}}else p.za=P[1],0<p.za-p.T&&37500>P[2]&&p.F&&p.v==0&&!p.C&&(p.C=Xt(g(p.Za,p),6e3));if(1>=xn(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ss(p,11)}else if((a.K||p.g==a)&&Pl(p),!E(h))for(P=p.Da.g.parse(h),h=0;h<P.length;h++){let pe=P[h];if(p.T=pe[0],pe=pe[1],p.G==2)if(pe[0]=="c"){p.K=pe[1],p.ia=pe[2];const yt=pe[3];yt!=null&&(p.la=yt,p.j.info("VER="+p.la));const vt=pe[4];vt!=null&&(p.Aa=vt,p.j.info("SVER="+p.Aa));const yi=pe[5];yi!=null&&typeof yi=="number"&&0<yi&&(y=1.5*yi,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const hn=a.g;if(hn){const Dl=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dl){var L=y.h;L.g||Dl.indexOf("spdy")==-1&&Dl.indexOf("quic")==-1&&Dl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ui(L,L.h),L.h=null))}if(y.D){const vh=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;vh&&(y.ya=vh,Ee(y.I,y.D,vh))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var $=a;if(y.qa=Am(y,y.J?y.ia:null,y.W),$.K){wl(y.h,$);var Ie=$,st=y.L;st&&(Ie.I=st),Ie.B&&(li(Ie),gs(Ie)),y.g=$}else Em(y);0<p.i.length&&pi(p)}else pe[0]!="stop"&&pe[0]!="close"||Ss(p,7);else p.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Ss(p,7):X(p):pe[0]!="noop"&&p.l&&p.l.ta(pe),p.v=0)}}zn(4)}catch{}}var Zt=class{constructor(a,h){this.g=a,this.map=h}};function vs(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vo(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function xn(a){return a.h?1:a.g?a.g.size:0}function jo(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ui(a,h){a.g?a.g.add(h):a.h=h}function wl(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}vs.prototype.cancel=function(){if(this.i=Fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Fo(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return k(a.i)}function ih(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var h=[],p=a.length,y=0;y<p;y++)h.push(a[y]);return h}h=[],p=0;for(y in a)h[p++]=a[y];return h}function Uo(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const y in a)h[p++]=y;return h}}}function El(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=Uo(a),y=ih(a),P=y.length,L=0;L<P;L++)h.call(void 0,y[L],p&&p[L],a)}var _s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oh(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var y=a[p].indexOf("="),P=null;if(0<=y){var L=a[p].substring(0,y);P=a[p].substring(y+1)}else L=a[p];h(L,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function qn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof qn){this.h=a.h,ci(this,a.j),this.o=a.o,this.g=a.g,hi(this,a.s),this.l=a.l;var h=a.i,p=new Tr;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Il(this,p),this.m=a.m}else a&&(h=String(a).match(_s))?(this.h=!1,ci(this,h[1]||"",!0),this.o=ws(h[2]||""),this.g=ws(h[3]||"",!0),hi(this,h[4]),this.l=ws(h[5]||"",!0),Il(this,h[6]||"",!0),this.m=ws(h[7]||"")):(this.h=!1,this.i=new Tr(null,this.h))}qn.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Es(h,Tl,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Es(h,Tl,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Es(p,p.charAt(0)=="/"?uh:lh,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Es(p,hh)),a.join("")};function cn(a){return new qn(a)}function ci(a,h,p){a.j=p?ws(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function hi(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Il(a,h,p){h instanceof Tr?(a.i=h,dh(a.i,a.h)):(p||(h=Es(h,ch)),a.i=new Tr(h,a.h))}function Ee(a,h,p){a.i.set(h,p)}function Wn(a){return Ee(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ws(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Es(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,ah),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ah(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Tl=/[#\/\?@]/g,lh=/[#\?:]/g,uh=/[#\?]/g,ch=/[#\?@]/g,hh=/#/g;function Tr(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Sn(a){a.g||(a.g=new Map,a.h=0,a.i&&oh(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Tr.prototype,t.add=function(a,h){Sn(this),this.i=null,a=xr(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function xl(a,h){Sn(a),h=xr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Sl(a,h){return Sn(a),h=xr(a,h),a.g.has(h)}t.forEach=function(a,h){Sn(this),this.g.forEach(function(p,y){p.forEach(function(P){a.call(h,P,y,this)},this)},this)},t.na=function(){Sn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){const P=a[y];for(let L=0;L<P.length;L++)p.push(h[y])}return p},t.V=function(a){Sn(this);let h=[];if(typeof a=="string")Sl(this,a)&&(h=h.concat(this.g.get(xr(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return Sn(this),this.i=null,a=xr(this,a),Sl(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Al(a,h,p){xl(a,h),0<p.length&&(a.i=null,a.g.set(xr(a,h),k(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];const L=encodeURIComponent(String(y)),$=this.V(y);for(y=0;y<$.length;y++){var P=L;$[y]!==""&&(P+="="+encodeURIComponent(String($[y]))),a.push(P)}}return this.i=a.join("&")};function xr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function dh(a,h){h&&!a.j&&(Sn(a),a.i=null,a.g.forEach(function(p,y){var P=y.toLowerCase();y!=P&&(xl(this,y),Al(this,P,p))},a)),a.j=h}function fh(a,h){const p=new Er;if(u.Image){const y=new Image;y.onload=_(An,p,"TestLoadImage: loaded",!0,h,y),y.onerror=_(An,p,"TestLoadImage: error",!1,h,y),y.onabort=_(An,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=_(An,p,"TestLoadImage: timeout",!1,h,y),u.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function ph(a,h){const p=new Er,y=new AbortController,P=setTimeout(()=>{y.abort(),An(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(L=>{clearTimeout(P),L.ok?An(p,"TestPingServer: ok",!0,h):An(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),An(p,"TestPingServer: error",!1,h)})}function An(a,h,p,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(p)}catch{}}function mh(){this.g=new sh}function Cl(a,h,p){const y=p||"";try{El(a,function(P,L){let $=P;c(P)&&($=To(P)),h.push(y+L+"="+encodeURIComponent($))})}catch(P){throw h.push(y+"type="+encodeURIComponent("_badmap")),P}}function di(a){this.l=a.Ub||null,this.j=a.eb||!1}C(di,gl),di.prototype.g=function(){return new fi(this.l,this.j)},di.prototype.i=function(a){return function(){return a}}({});function fi(a,h){ze.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(fi,ze),t=fi.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Ts(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ts(this)),this.g&&(this.readyState=3,Ts(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rl(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rl(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Is(this):Ts(this),this.readyState==3&&Rl(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Is(this))},t.Qa=function(a){this.g&&(this.response=a,Is(this))},t.ga=function(){this.g&&Is(this)};function Is(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ts(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Ts(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function kl(a){let h="";return F(a,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function xs(a,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=kl(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Ee(a,h,p))}function O(a){ze.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(O,ze);var H=/^https?$/i,q=["POST","PUT"];t=O.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():No.g(),this.v=this.o?xo(this.o):xo(No),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){ne(this,L);return}if(a=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)p.set(P,y[P]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const L of y.keys())p.set(L,y.get(L));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),P=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(q,h,void 0))||y||P||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,$]of p)this.g.setRequestHeader(L,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fe(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){ne(this,L)}};function ne(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Y(a),ae(a)}function Y(a){a.A||(a.A=!0,nt(a,"complete"),nt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,nt(this,"complete"),nt(this,"abort"),ae(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ae(this,!0)),O.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?oe(this):this.bb())},t.bb=function(){oe(this)};function oe(a){if(a.h&&typeof o<"u"&&(!a.v[1]||ve(a)!=4||a.Z()!=2)){if(a.u&&ve(a)==4)pl(a.Ea,0,a);else if(nt(a,"readystatechange"),ve(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=$===0){var P=String(a.D).match(_s)[1]||null;!P&&u.self&&u.self.location&&(P=u.self.location.protocol.slice(0,-1)),y=!H.test(P?P.toLowerCase():"")}p=y}if(p)nt(a,"complete"),nt(a,"success");else{a.m=6;try{var L=2<ve(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Y(a)}}finally{ae(a)}}}}function ae(a,h){if(a.g){fe(a);const p=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||nt(a,"ready");try{p.onreadystatechange=y}catch{}}}function fe(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function ve(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<ve(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),rh(h)}};function ye(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ve(a){const h={};a=(a.g&&2<=ve(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(E(a[y]))continue;var p=R(a[y]);const P=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=h[P]||[];h[P]=L,L.push(p)}I(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ce(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Gn(a){this.Aa=0,this.i=[],this.j=new Er,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ce("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ce("baseRetryDelayMs",5e3,a),this.cb=Ce("retryDelaySeedMs",1e4,a),this.Wa=Ce("forwardChannelMaxRetries",2,a),this.wa=Ce("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new vs(a&&a.concurrentRequestLimit),this.Da=new mh,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Gn.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,y){Ge(0),this.W=a,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=Am(this,null,this.W),pi(this)};function X(a){if(Nl(a),a.G==3){var h=a.U++,p=cn(a.I);if(Ee(p,"SID",a.K),Ee(p,"RID",h),Ee(p,"TYPE","terminate"),mi(a,p),h=new Jt(a,a.j,h),h.L=2,h.v=Wn(cn(p)),p=!1,u.navigator&&u.navigator.sendBeacon)try{p=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&u.Image&&(new Image().src=h.v,p=!0),p||(h.g=Cm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),gs(h)}Sm(a)}function gt(a){a.g&&(yh(a),a.g.cancel(),a.g=null)}function Nl(a){gt(a),a.u&&(u.clearTimeout(a.u),a.u=null),Pl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function pi(a){if(!Vo(a.h)&&!a.s){a.s=!0;var h=a.Ga;We||ie(),z||(We(),z=!0),Z.add(h,a),a.B=0}}function rt(a,h){return xn(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Xt(g(a.Ga,a,h),xm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new Jt(this,this.j,a);let L=this.o;if(this.S&&(L?(L=v(L),S(L,this.S)):L=this.S),this.m!==null||this.O||(P.H=L,L=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=wm(this,P,h),p=cn(this.I),Ee(p,"RID",a),Ee(p,"CVER",22),this.D&&Ee(p,"X-HTTP-Session-Id",this.D),mi(this,p),L&&(this.O?h="headers="+encodeURIComponent(String(kl(L)))+"&"+h:this.m&&xs(p,this.m,L)),ui(this.h,P),this.Ua&&Ee(p,"TYPE","init"),this.P?(Ee(p,"$req",h),Ee(p,"SID","null"),P.T=!0,ai(P,p,null)):ai(P,p,h),this.G=2}}else this.G==3&&(a?Kn(this,a):this.i.length==0||Vo(this.h)||Kn(this))};function Kn(a,h){var p;h?p=h.l:p=a.U++;const y=cn(a.I);Ee(y,"SID",a.K),Ee(y,"RID",p),Ee(y,"AID",a.T),mi(a,y),a.m&&a.o&&xs(y,a.m,a.o),p=new Jt(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=wm(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ui(a.h,p),ai(p,y,h)}function mi(a,h){a.H&&F(a.H,function(p,y){Ee(h,y,p)}),a.l&&El({},function(p,y){Ee(h,y,p)})}function wm(a,h,p){p=Math.min(a.i.length,p);var y=a.l?g(a.l.Na,a.l,a):null;e:{var P=a.i;let L=-1;for(;;){const $=["count="+p];L==-1?0<p?(L=P[0].g,$.push("ofs="+L)):L=0:$.push("ofs="+L);let Ie=!0;for(let st=0;st<p;st++){let pe=P[st].g;const yt=P[st].map;if(pe-=L,0>pe)L=Math.max(0,P[st].g-100),Ie=!1;else try{Cl(yt,$,"req"+pe+"_")}catch{y&&y(yt)}}if(Ie){y=$.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,y}function Em(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;We||ie(),z||(We(),z=!0),Z.add(h,a),a.v=0}}function gh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Xt(g(a.Fa,a),xm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Im(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Xt(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ge(10),gt(this),Im(this))};function yh(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Im(a){a.g=new Jt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=cn(a.qa);Ee(h,"RID","rpc"),Ee(h,"SID",a.K),Ee(h,"AID",a.T),Ee(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ee(h,"TO",a.ja),Ee(h,"TYPE","xmlhttp"),mi(a,h),a.m&&a.o&&xs(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Wn(cn(h)),p.m=null,p.P=!0,Do(p,a)}t.Za=function(){this.C!=null&&(this.C=null,gt(this),gh(this),Ge(19))};function Pl(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function Tm(a,h){var p=null;if(a.g==h){Pl(a),yh(a),a.g=null;var y=2}else if(jo(a.h,h))p=h.D,wl(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var P=a.B;y=wr(),nt(y,new Ro(y,p)),pi(a)}else Em(a);else if(P=h.s,P==3||P==0&&0<h.X||!(y==1&&rt(a,h)||y==2&&gh(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),P){case 1:Ss(a,5);break;case 4:Ss(a,10);break;case 3:Ss(a,6);break;default:Ss(a,2)}}}function xm(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function Ss(a,h){if(a.j.info("Error code "+h),h==2){var p=g(a.fb,a),y=a.Xa;const P=!y;y=new qn(y||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ci(y,"https"),Wn(y),P?fh(y.toString(),p):ph(y.toString(),p)}else Ge(2);a.G=0,a.l&&a.l.sa(h),Sm(a),Nl(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function Sm(a){if(a.G=0,a.ka=[],a.l){const h=Fo(a.h);(h.length!=0||a.i.length!=0)&&(b(a.ka,h),b(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function Am(a,h,p){var y=p instanceof qn?cn(p):new qn(p);if(y.g!="")h&&(y.g=h+"."+y.g),hi(y,y.s);else{var P=u.location;y=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var L=new qn(null);y&&ci(L,y),h&&(L.g=h),P&&hi(L,P),p&&(L.l=p),y=L}return p=a.D,h=a.ya,p&&h&&Ee(y,p,h),Ee(y,"VER",a.la),mi(a,y),y}function Cm(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new O(new di({eb:p})):new O(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rm(){}t=Rm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function bl(){}bl.prototype.g=function(a,h){return new Bt(a,h)};function Bt(a,h){ze.call(this),this.g=new Gn(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!E(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new gi(this)}C(Bt,ze),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){X(this.g)},Bt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=To(a),a=p);h.i.push(new Zt(h.Ya++,a)),h.G==3&&pi(h)},Bt.prototype.N=function(){this.g.l=null,delete this.j,X(this.g),delete this.g,Bt.aa.N.call(this)};function km(a){ps.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}C(km,ps);function Nm(){si.call(this),this.status=1}C(Nm,si);function gi(a){this.g=a}C(gi,Rm),gi.prototype.ua=function(){nt(this.g,"a")},gi.prototype.ta=function(a){nt(this.g,new km(a))},gi.prototype.sa=function(a){nt(this.g,new Nm)},gi.prototype.ra=function(){nt(this.g,"b")},bl.prototype.createWebChannel=bl.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,zw=function(){return new bl},Bw=function(){return wr()},Uw=un,uf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ir.NO_ERROR=0,Ir.TIMEOUT=8,Ir.HTTP_ERROR=6,Eu=Ir,ko.COMPLETE="complete",Fw=ko,yl.EventType=_r,_r.OPEN="a",_r.CLOSE="b",_r.ERROR="c",_r.MESSAGE="d",ze.prototype.listen=ze.prototype.K,ea=yl,O.prototype.listenOnce=O.prototype.L,O.prototype.getLastError=O.prototype.Ka,O.prototype.getLastErrorCode=O.prototype.Ba,O.prototype.getStatus=O.prototype.Z,O.prototype.getResponseJson=O.prototype.Oa,O.prototype.getResponseText=O.prototype.oa,O.prototype.send=O.prototype.ea,O.prototype.setWithCredentials=O.prototype.Ha,jw=O}).apply(typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{});const my="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new xp("@firebase/firestore");function Qo(){return Hs.logLevel}function K(t,...e){if(Hs.logLevel<=ce.DEBUG){const n=e.map(Lp);Hs.debug(`Firestore (${po}): ${t}`,...n)}}function fr(t,...e){if(Hs.logLevel<=ce.ERROR){const n=e.map(Lp);Hs.error(`Firestore (${po}): ${t}`,...n)}}function no(t,...e){if(Hs.logLevel<=ce.WARN){const n=e.map(Lp);Hs.warn(`Firestore (${po}): ${t}`,...n)}}function Lp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: `+t;throw fr(e),new Error(e)}function we(t,e){t||te()}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class qC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class WC{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ir,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},u=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ir)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new $w(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new Tt(e)}}class GC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new GC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new QC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=XC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function ro(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new Xe(0,0))}static max(){return new re(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ke extends Fa{construct(e,n,r){return new ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const JC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends Fa{construct(e,n,r){return new ut(e,n,r)}static isValidIdentifier(e){return JC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ut(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new W(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new W(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(n)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(ke.fromString(e))}static fromName(e){return new Q(ke.fromString(e).popFirst(5))}static empty(){return new Q(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new ke(e.slice()))}}function ZC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new ts(s,Q.empty(),e)}function eR(t){return new ts(t.readTime,t.key,-1)}class ts{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ts(re.min(),Q.empty(),-1)}static max(){return new ts(re.max(),Q.empty(),-1)}}function tR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==nR)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++u,u===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new j((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function sR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function il(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mp.oe=-1;function Vc(t){return t==null}function ic(t){return t===0&&1/t==-1/0}function iR(t){return typeof t=="number"&&Number.isInteger(t)&&!ic(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zl(this.root,e,this.comparator,!0)}}class Zl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yy(this.data.getIterator())}getIteratorFrom(e){return new yy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ht(this.comparator);return n.data=e,n}}class yy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new ht(ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ww("Invalid base64 string: "+i):i}}(e);return new ft(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const oR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(t){if(we(!!t),typeof t=="string"){let e=0;const n=oR.exec(t);if(we(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qs(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jp(t){const e=t.mapValue.fields.__previous_value__;return Vp(e)?jp(e):e}function Ua(t){const e=ns(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,r,s,i,o,u,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=l,this.useFetchStreams=c}}class Ba{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ba("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu={mapValue:{}};function Ws(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vp(t)?4:uR(t)?9007199254740991:lR(t)?10:11:te()}function Vn(t,e){if(t===e)return!0;const n=Ws(t);if(n!==Ws(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ua(t).isEqual(Ua(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ns(s.timestampValue),u=ns(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return qs(s.bytesValue).isEqual(qs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),u=Fe(i.doubleValue);return o===u?ic(o)===ic(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return ro(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(gy(o)!==gy(u))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(u[l]===void 0||!Vn(o[l],u[l])))return!1;return!0}(t,e);default:return te()}}function za(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function so(t,e){if(t===e)return 0;const n=Ws(t),r=Ws(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Fe(i.integerValue||i.doubleValue),l=Fe(o.integerValue||o.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1}(t,e);case 3:return vy(t.timestampValue,e.timestampValue);case 4:return vy(Ua(t),Ua(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const u=qs(i),l=qs(o);return u.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),l=o.split("/");for(let c=0;c<u.length&&c<l.length;c++){const d=me(u[c],l[c]);if(d!==0)return d}return me(u.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=me(Fe(i.latitude),Fe(o.latitude));return u!==0?u:me(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _y(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,l,c,d;const m=i.fields||{},g=o.fields||{},_=(u=m.value)===null||u===void 0?void 0:u.arrayValue,C=(l=g.value)===null||l===void 0?void 0:l.arrayValue,k=me(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((d=C==null?void 0:C.values)===null||d===void 0?void 0:d.length)||0);return k!==0?k:_y(_,C)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===eu.mapValue&&o===eu.mapValue)return 0;if(i===eu.mapValue)return 1;if(o===eu.mapValue)return-1;const u=i.fields||{},l=Object.keys(u),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let m=0;m<l.length&&m<d.length;++m){const g=me(l[m],d[m]);if(g!==0)return g;const _=so(u[l[m]],c[d[m]]);if(_!==0)return _}return me(l.length,d.length)}(t.mapValue,e.mapValue);default:throw te()}}function vy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=ns(t),r=ns(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function _y(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=so(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function io(t){return cf(t)}function cf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=cf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${cf(n.fields[o])}`;return s+"}"}(t.mapValue):te()}function wy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hf(t){return!!t&&"integerValue"in t}function Fp(t){return!!t&&"arrayValue"in t}function Ey(t){return!!t&&"nullValue"in t}function Iy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Iu(t){return!!t&&"mapValue"in t}function lR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ma(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ma(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ma(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Iu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ma(n)}setAll(e){let n=ut.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=ma(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Iu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Iu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Xs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Lt(ma(this.value))}}function Gw(t){const e=[];return Xs(t.fields,(n,r)=>{const s=new ut([n]);if(Iu(r)){const i=Gw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new St(e,0,re.min(),re.min(),re.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,s){return new St(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new St(e,2,n,re.min(),re.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,re.min(),re.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){this.position=e,this.inclusive=n}}function Ty(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=so(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function xy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n="asc"){this.field=e,this.dir=n}}function cR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{}class qe extends Kw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new dR(e,n,r):n==="array-contains"?new mR(e,r):n==="in"?new gR(e,r):n==="not-in"?new yR(e,r):n==="array-contains-any"?new vR(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fR(e,r):new pR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(so(n,this.value)):n!==null&&Ws(this.value)===Ws(n)&&this.matchesComparison(so(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends Kw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new En(e,n)}matches(e){return Qw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qw(t){return t.op==="and"}function Yw(t){return hR(t)&&Qw(t)}function hR(t){for(const e of t.filters)if(e instanceof En)return!1;return!0}function df(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+io(t.value);if(Yw(t))return t.filters.map(e=>df(e)).join(",");{const e=t.filters.map(n=>df(n)).join(",");return`${t.op}(${e})`}}function Xw(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&Vn(r.value,s.value)}(t,e):t instanceof En?function(r,s){return s instanceof En&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&Xw(o,s.filters[u]),!0):!1}(t,e):void te()}function Jw(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${io(n.value)}`}(t):t instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(Jw).join(" ,")+"}"}(t):"Filter"}class dR extends qe{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class fR extends qe{constructor(e,n){super(e,"in",n),this.keys=Zw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pR extends qe{constructor(e,n){super(e,"not-in",n),this.keys=Zw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Zw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class mR extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fp(n)&&za(n.arrayValue,this.value)}}class gR extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&za(this.value.arrayValue,n)}}class yR extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!za(this.value.arrayValue,n)}}class vR extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>za(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function Sy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _R(t,e,n,r,s,i,o)}function Up(t){const e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>df(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>io(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>io(r)).join(",")),e.ue=n}return e.ue}function Bp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Xw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xy(t.startAt,e.startAt)&&xy(t.endAt,e.endAt)}function ff(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function wR(t,e,n,r,s,i,o,u){return new mo(t,e,n,r,s,i,o,u)}function jc(t){return new mo(t)}function Ay(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eE(t){return t.collectionGroup!==null}function ga(t){const e=se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new ht(ut.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(u=u.add(c.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new $a(i,r))}),n.has(ut.keyField().canonicalString())||e.ce.push(new $a(ut.keyField(),r))}return e.ce}function Ln(t){const e=se(t);return e.le||(e.le=ER(e,ga(t))),e.le}function ER(t,e){if(t.limitType==="F")return Sy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $a(s.field,i)});const n=t.endAt?new oc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new oc(t.startAt.position,t.startAt.inclusive):null;return Sy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function pf(t,e){const n=t.filters.concat([e]);return new mo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function mf(t,e,n){return new mo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fc(t,e){return Bp(Ln(t),Ln(e))&&t.limitType===e.limitType}function tE(t){return`${Up(Ln(t))}|lt:${t.limitType}`}function _i(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Jw(s)).join(", ")}]`),Vc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>io(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>io(s)).join(",")),`Target(${r})`}(Ln(t))}; limitType=${t.limitType})`}function Uc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ga(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,l){const c=Ty(o,u,l);return o.inclusive?c<=0:c<0}(r.startAt,ga(r),s)||r.endAt&&!function(o,u,l){const c=Ty(o,u,l);return o.inclusive?c>=0:c>0}(r.endAt,ga(r),s))}(t,e)}function IR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nE(t){return(e,n)=>{let r=!1;for(const s of ga(t)){const i=TR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function TR(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,u){const l=o.data.field(i),c=u.data.field(i);return l!==null&&c!==null?so(l,c):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return qw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new Me(Q.comparator);function pr(){return xR}const rE=new Me(Q.comparator);function ta(...t){let e=rE;for(const n of t)e=e.insert(n.key,n);return e}function sE(t){let e=rE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bs(){return ya()}function iE(){return ya()}function ya(){return new go(t=>t.toString(),(t,e)=>t.isEqual(e))}const SR=new Me(Q.comparator),AR=new ht(Q.comparator);function ue(...t){let e=AR;for(const n of t)e=e.add(n);return e}const CR=new ht(me);function RR(){return CR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ic(e)?"-0":e}}function oE(t){return{integerValue:""+t}}function kR(t,e){return iR(e)?oE(e):zp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this._=void 0}}function NR(t,e,n){return t instanceof Ha?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Vp(i)&&(i=jp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof qa?lE(t,e):t instanceof Wa?uE(t,e):function(s,i){const o=aE(s,i),u=Cy(o)+Cy(s.Pe);return hf(o)&&hf(s.Pe)?oE(u):zp(s.serializer,u)}(t,e)}function PR(t,e,n){return t instanceof qa?lE(t,e):t instanceof Wa?uE(t,e):n}function aE(t,e){return t instanceof ac?function(r){return hf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ha extends Bc{}class qa extends Bc{constructor(e){super(),this.elements=e}}function lE(t,e){const n=cE(e);for(const r of t.elements)n.some(s=>Vn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Wa extends Bc{constructor(e){super(),this.elements=e}}function uE(t,e){let n=cE(e);for(const r of t.elements)n=n.filter(s=>!Vn(s,r));return{arrayValue:{values:n}}}class ac extends Bc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Cy(t){return Fe(t.integerValue||t.doubleValue)}function cE(t){return Fp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n){this.field=e,this.transform=n}}function DR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof qa&&s instanceof qa||r instanceof Wa&&s instanceof Wa?ro(r.elements,s.elements,Vn):r instanceof ac&&s instanceof ac?Vn(r.Pe,s.Pe):r instanceof Ha&&s instanceof Ha}(t.transform,e.transform)}class OR{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zc{}function hE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fE(t.key,_n.none()):new ol(t.key,t.data,_n.none());{const n=t.data,r=Lt.empty();let s=new ht(ut.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ls(t.key,r,new Ht(s.toArray()),_n.none())}}function LR(t,e,n){t instanceof ol?function(s,i,o){const u=s.value.clone(),l=ky(s.fieldTransforms,i,o.transformResults);u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ls?function(s,i,o){if(!Tu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=ky(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(dE(s)),l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function va(t,e,n,r){return t instanceof ol?function(i,o,u,l){if(!Tu(i.precondition,o))return u;const c=i.value.clone(),d=Ny(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ls?function(i,o,u,l){if(!Tu(i.precondition,o))return u;const c=Ny(i.fieldTransforms,l,o),d=o.data;return d.setAll(dE(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,u){return Tu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function MR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=aE(r.transform,s||null);i!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,i))}return n||null}function Ry(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ro(r,s,(i,o)=>DR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ol extends zc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ls extends zc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function dE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ky(t,e,n){const r=new Map;we(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,PR(o,u,n[s]))}return r}function Ny(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,NR(i,o,e))}return r}class fE extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VR extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&LR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const l=hE(o,u);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,(n,r)=>Ry(n,r))&&ro(this.baseMutations,e.baseMutations,(n,r)=>Ry(n,r))}}class $p{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){we(e.mutations.length===r.length);let s=function(){return SR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new $p(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,he;function BR(t){switch(t){default:return te();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function pE(t){if(t===void 0)return fr("GRPC error has no .code"),M.UNKNOWN;switch(t){case $e.OK:return M.OK;case $e.CANCELLED:return M.CANCELLED;case $e.UNKNOWN:return M.UNKNOWN;case $e.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case $e.INTERNAL:return M.INTERNAL;case $e.UNAVAILABLE:return M.UNAVAILABLE;case $e.UNAUTHENTICATED:return M.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case $e.NOT_FOUND:return M.NOT_FOUND;case $e.ALREADY_EXISTS:return M.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return M.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case $e.ABORTED:return M.ABORTED;case $e.OUT_OF_RANGE:return M.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return M.UNIMPLEMENTED;case $e.DATA_LOSS:return M.DATA_LOSS;default:return te()}}(he=$e||($e={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=new Ls([4294967295,4294967295],0);function Py(t){const e=zR().encode(t),n=new Vw;return n.update(e),new Uint8Array(n.digest())}function by(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ls([n,r],0),new Ls([s,i],0)]}class Hp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new na(`Invalid padding: ${n}`);if(r<0)throw new na(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new na(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new na(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ls.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ls.fromNumber(r)));return s.compare($R)===1&&(s=new Ls([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Py(e),[r,s]=by(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Hp(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=Py(e),[r,s]=by(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $c(re.min(),s,new Me(me),pr(),ue())}}class al{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new al(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class mE{constructor(e,n){this.targetId=e,this.me=n}}class gE{constructor(e,n,r=ft.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Dy{constructor(){this.fe=0,this.ge=Ly(),this.pe=ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te()}}),new al(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ly()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class HR{constructor(e){this.Le=e,this.Be=new Map,this.ke=pr(),this.qe=Oy(),this.Qe=new Me(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(ff(i))if(r===0){const o=new Q(i.path);this.Ue(n,o,St.newNoDocument(o,re.min()))}else we(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),l=u?this.Xe(u,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=qs(r).toUint8Array()}catch(l){if(l instanceof Ww)return no("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{u=new Hp(o,s,i)}catch(l){return no(l instanceof na?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&ff(u.target)){const l=new Q(u.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,St.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ue();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new $c(e,n,this.Qe,this.ke,r);return this.ke=pr(),this.qe=Oy(),this.Qe=new Me(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Dy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ht(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Dy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Oy(){return new Me(Q.comparator)}function Ly(){return new Me(Q.comparator)}const qR={asc:"ASCENDING",desc:"DESCENDING"},WR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GR={and:"AND",or:"OR"};class KR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gf(t,e){return t.useProto3Json||Vc(e)?e:{value:e}}function lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QR(t,e){return lc(t,e.toTimestamp())}function Mn(t){return we(!!t),re.fromTimestamp(function(n){const r=ns(n);return new Xe(r.seconds,r.nanos)}(t))}function qp(t,e){return yf(t,e).canonicalString()}function yf(t,e){const n=function(s){return new ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vE(t){const e=ke.fromString(t);return we(TE(e)),e}function vf(t,e){return qp(t.databaseId,e.path)}function Jh(t,e){const n=vE(e);if(n.get(1)!==t.databaseId.projectId)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(wE(n))}function _E(t,e){return qp(t.databaseId,e)}function YR(t){const e=vE(t);return e.length===4?ke.emptyPath():wE(e)}function _f(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wE(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function My(t,e,n){return{name:vf(t,e),fields:n.value.mapValue.fields}}function XR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(we(d===void 0||typeof d=="string"),ft.fromBase64String(d||"")):(we(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ft.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(c){const d=c.code===void 0?M.UNKNOWN:pE(c.code);return new W(d,c.message||"")}(o);n=new gE(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Jh(t,r.document.name),i=Mn(r.document.updateTime),o=r.document.createTime?Mn(r.document.createTime):re.min(),u=new Lt({mapValue:{fields:r.document.fields}}),l=St.newFoundDocument(s,i,o,u),c=r.targetIds||[],d=r.removedTargetIds||[];n=new xu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Jh(t,r.document),i=r.readTime?Mn(r.readTime):re.min(),o=St.newNoDocument(s,i),u=r.removedTargetIds||[];n=new xu([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Jh(t,r.document),i=r.removedTargetIds||[];n=new xu([],i,s,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new UR(s,i),u=r.targetId;n=new mE(u,o)}}return n}function JR(t,e){let n;if(e instanceof ol)n={update:My(t,e.key,e.value)};else if(e instanceof fE)n={delete:vf(t,e.key)};else if(e instanceof ls)n={update:My(t,e.key,e.data),updateMask:ak(e.fieldMask)};else{if(!(e instanceof VR))return te();n={verify:vf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Ha)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof qa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Wa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ac)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:QR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te()}(t,e.precondition)),n}function ZR(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Mn(s.updateTime):Mn(i);return o.isEqual(re.min())&&(o=Mn(i)),new OR(o,s.transformResults||[])}(n,e))):[]}function ek(t,e){return{documents:[_E(t,e.path)]}}function tk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_E(t,s);const i=function(c){if(c.length!==0)return IE(En.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:wi(g.field),direction:sk(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=gf(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function nk(t){let e=YR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){we(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(m){const g=EE(m);return g instanceof En&&Yw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(C){return new $a(Ei(C.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(m){let g;return g=typeof m=="object"?m.value:m,Vc(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(m){const g=!!m.before,_=m.values||[];return new oc(_,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,_=m.values||[];return new oc(_,g)}(n.endAt)),wR(e,s,o,i,u,"F",l,c)}function rk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function EE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ei(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ei(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ei(n.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ei(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(Ei(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(r=>EE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function sk(t){return qR[t]}function ik(t){return WR[t]}function ok(t){return GR[t]}function wi(t){return{fieldPath:t.canonicalString()}}function Ei(t){return ut.fromServerFormat(t.fieldPath)}function IE(t){return t instanceof qe?function(n){if(n.op==="=="){if(Iy(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NAN"}};if(Ey(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Iy(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NOT_NAN"}};if(Ey(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wi(n.field),op:ik(n.op),value:n.value}}}(t):t instanceof En?function(n){const r=n.getFilters().map(s=>IE(s));return r.length===1?r[0]:{compositeFilter:{op:ok(n.op),filters:r}}}(t):te()}function ak(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,r,s,i=re.min(),o=re.min(),u=ft.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=l}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.ct=e}}function uk(t){const e=nk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.un=new hk}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(ts.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class hk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ht(ke.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ht(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new oo(0)}static kn(){return new oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.changes=new go(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&va(r.mutation,s,Ht.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const s=bs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ta();return i.forEach((u,l)=>{o=o.insert(u,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=bs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=pr();const o=ya(),u=function(){return ya()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ls)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),va(d.mutation,c,d.mutation.getFieldMask(),Xe.now())):o.set(c.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var m;return u.set(c,new fk(d,(m=o.get(c))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,n){const r=ya();let s=new Me((o,u)=>o-u),i=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Ht.empty();d=u.applyToLocalView(c,d),r.set(l,d);const m=(s.get(u.batchId)||ue()).add(l);s=s.insert(u.batchId,m)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const l=u.getNext(),c=l.key,d=l.value,m=iE();d.forEach(g=>{if(!i.has(g)){const _=hE(n.get(g),r.get(g));_!==null&&m.set(g,_),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(bs());let u=-1,l=i;return o.next(c=>j.forEach(c,(d,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),i.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ue())).next(d=>({batchId:u,changes:sE(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=ta();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ta();return this.indexManager.getCollectionParents(e,i).next(u=>j.forEach(u,l=>{const c=function(m,g){return new mo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,St.newInvalidDocument(d)))});let u=ta();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&va(d.mutation,c,Ht.empty(),Xe.now()),Uc(n,c)&&(u=u.insert(l,c))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Mn(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:uk(s.bundledQuery),readTime:Mn(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.overlays=new Me(Q.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bs();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=bs(),i=n.length+1,o=new Q(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const l=u.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Me((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=bs(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const u=bs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>u.set(c,d)),!(u.size()>=s)););return j.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FR(n,r));let i=this.Ir.get(n);i===void 0&&(i=ue(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.Tr=new ht(Je.Er),this.dr=new ht(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new ke([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new ke([])),r=new Je(n,e),s=new Je(n,e+1);let i=ue();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ht(Je.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jR(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new Je(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ht(me);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new Je(new Q(i),0);let u=new ht(me);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(u=u.add(l.wr)),!0)},o),j.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Je(n,0),s=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.Mr=e,this.docs=function(){return new Me(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let r=pr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():St.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=pr();const o=n.path,u=new Q(o.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||tR(eR(d),r)<=0||(s.has(d.key)||Uc(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new wk(this)}getSize(e){return j.resolve(this.size)}}class wk extends dk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.persistence=e,this.Nr=new go(n=>Up(n),Bp),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wp,this.targetCount=0,this.kr=oo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new oo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),j.waitFor(i).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Mp(0),this.Kr=!1,this.Kr=!0,this.$r=new yk,this.referenceDelegate=e(this),this.Ur=new Ek(this),this.indexManager=new ck,this.remoteDocumentCache=function(s){return new _k(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lk(n),this.Gr=new mk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vk(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new Tk(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Tk extends rR{constructor(e){super(),this.currentSequenceNumber=e}}class Gp{constructor(e){this.persistence=e,this.Jr=new Wp,this.Yr=null}static Zr(e){return new Gp(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const s=Q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ue(),s=ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Kp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return AS()?8:sR(Rt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new xk;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Qo()<=ce.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",_i(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Qo()<=ce.DEBUG&&K("QueryEngine","Query:",_i(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Qo()<=ce.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",_i(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):j.resolve())}Yi(e,n){if(Ay(n))return j.resolve(null);let r=Ln(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=mf(n,null,"F"),r=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ue(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,u);return this.ns(n,c,o,l.readTime)?this.Yi(e,mf(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return Ay(n)||s.isEqual(re.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?j.resolve(null):(Qo()<=ce.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_i(n)),this.rs(e,o,n,ZC(s,-1)).next(u=>u))})}ts(e,n){let r=new ht(nE(e));return n.forEach((s,i)=>{Uc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Qo()<=ce.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",_i(n)),this.Ji.getDocumentsMatchingQuery(e,n,ts.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Me(me),this._s=new go(i=>Up(i),Bp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Ck(t,e,n,r){return new Ak(t,e,n,r)}async function xE(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let l=ue();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){u.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:u}))})})}function Rk(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,l,c,d){const m=c.batch,g=m.keys();let _=j.resolve();return g.forEach(C=>{_=_.next(()=>d.getEntry(l,C)).next(k=>{const b=c.docVersions.get(C);we(b!==null),k.version.compareTo(b)<0&&(m.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),d.addEntry(k)))})}),_.next(()=>u.mutationQueue.removeMutationBatch(l,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let l=ue();for(let c=0;c<u.mutationResults.length;++c)u.mutationResults[c].transformResults.length>0&&(l=l.add(u.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function SE(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function kk(t,e){const n=se(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((d,m)=>{const g=s.get(m);if(!g)return;u.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,m)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(ft.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),s=s.insert(m,_),function(k,b,A){return k.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(g,_,d)&&u.push(n.Ur.updateTargetData(i,_))});let l=pr(),c=ue();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),u.push(Nk(i,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(re.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(d)}return j.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function Nk(t,e,n){let r=ue(),s=ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=pr();return n.forEach((u,l)=>{const c=i.get(u);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(u)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(u,l.readTime),o=o.insert(u,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(u,l)):K("LocalStore","Ignoring outdated watch update for ",u,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function Pk(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bk(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,j.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function wf(t,e,n){const r=se(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!il(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Vy(t,e,n){const r=se(t);let s=re.min(),i=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const m=se(l),g=m._s.get(d);return g!==void 0?j.resolve(m.os.get(g)):m.Ur.getTargetData(c,d)}(r,o,Ln(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:ue())).next(u=>(Dk(r,IR(e),u),{documents:u,Ts:i})))}function Dk(t,e,n){let r=t.us.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class jy{constructor(){this.activeTargetIds=RR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ok{constructor(){this.so=new jy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new jy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=null;function Zh(){return tu===null?tu=function(){return 268435456+Math.round(2147483648*Math.random())}():tu++,"0x"+tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class jk extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=Zh(),l=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${u}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(d=>(K("RestConnection",`Received RPC '${n}' ${u}: `,d),d),d=>{throw no("RestConnection",`RPC '${n}' ${u} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+po}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=Mk[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Zh();return new Promise((o,u)=>{const l=new jw;l.setWithCredentials(!0),l.listenOnce(Fw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Eu.NO_ERROR:const d=l.getResponseJson();K(Et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Eu.TIMEOUT:K(Et,`RPC '${e}' ${i} timed out`),u(new W(M.DEADLINE_EXCEEDED,"Request time out"));break;case Eu.HTTP_ERROR:const m=l.getStatus();if(K(Et,`RPC '${e}' ${i} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const C=function(b){const A=b.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(A)>=0?A:M.UNKNOWN}(_.status);u(new W(C,_.message))}else u(new W(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new W(M.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{K(Et,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);K(Et,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Zh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zw(),u=Bw(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");K(Et,`Creating RPC '${e}' stream ${s}: ${d}`,l);const m=o.createWebChannel(d,l);let g=!1,_=!1;const C=new Vk({Io:b=>{_?K(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(g||(K(Et,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),K(Et,`RPC '${e}' stream ${s} sending:`,b),m.send(b))},To:()=>m.close()}),k=(b,A,E)=>{b.listen(A,w=>{try{E(w)}catch(D){setTimeout(()=>{throw D},0)}})};return k(m,ea.EventType.OPEN,()=>{_||(K(Et,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),k(m,ea.EventType.CLOSE,()=>{_||(_=!0,K(Et,`RPC '${e}' stream ${s} transport closed`),C.So())}),k(m,ea.EventType.ERROR,b=>{_||(_=!0,no(Et,`RPC '${e}' stream ${s} transport errored:`,b),C.So(new W(M.UNAVAILABLE,"The operation could not be completed")))}),k(m,ea.EventType.MESSAGE,b=>{var A;if(!_){const E=b.data[0];we(!!E);const w=E,D=w.error||((A=w[0])===null||A===void 0?void 0:A.error);if(D){K(Et,`RPC '${e}' stream ${s} received error:`,D);const V=D.status;let F=function(T){const S=$e[T];if(S!==void 0)return pE(S)}(V),I=D.message;F===void 0&&(F=M.INTERNAL,I="Unknown error status: "+V+" with message "+D.message),_=!0,C.So(new W(F,I)),m.close()}else K(Et,`RPC '${e}' stream ${s} received:`,E),C.bo(E)}}),k(u,Uw.STAT_EVENT,b=>{b.stat===uf.PROXY?K(Et,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===uf.NOPROXY&&K(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t){return new KR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n,r,s,i,o,u,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new AE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(fr(n.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fk extends CE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=XR(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Mn(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=_f(this.serializer),n.addTarget=function(i,o){let u;const l=o.target;if(u=ff(l)?{documents:ek(i,l)}:{query:tk(i,l)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=yE(i,o.resumeToken);const c=gf(i,o.expectedCount);c!==null&&(u.expectedCount=c)}else if(o.snapshotVersion.compareTo(re.min())>0){u.readTime=lc(i,o.snapshotVersion.toTimestamp());const c=gf(i,o.expectedCount);c!==null&&(u.expectedCount=c)}return u}(this.serializer,e);const r=rk(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=_f(this.serializer),n.removeTarget=e,this.a_(n)}}class Uk extends CE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ZR(e.writeResults,e.commitTime),r=Mn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=_f(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>JR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,yf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(M.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,yf(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class zk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fr(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Js(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=se(l);c.L_.add(4),await ll(c),c.q_.set("Unknown"),c.L_.delete(4),await qc(c)}(this))})}),this.q_=new zk(r,s)}}async function qc(t){if(Js(t))for(const e of t.B_)await e(!0)}async function ll(t){for(const e of t.B_)await e(!1)}function RE(t,e){const n=se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Jp(n)?Xp(n):yo(n).r_()&&Yp(n,e))}function Qp(t,e){const n=se(t),r=yo(n);n.N_.delete(e),r.r_()&&kE(n,e),n.N_.size===0&&(r.r_()?r.o_():Js(n)&&n.q_.set("Unknown"))}function Yp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(t).A_(e)}function kE(t,e){t.Q_.xe(e),yo(t).R_(e)}function Xp(t){t.Q_=new HR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),yo(t).start(),t.q_.v_()}function Jp(t){return Js(t)&&!yo(t).n_()&&t.N_.size>0}function Js(t){return se(t).L_.size===0}function NE(t){t.Q_=void 0}async function Hk(t){t.q_.set("Online")}async function qk(t){t.N_.forEach((e,n)=>{Yp(t,e)})}async function Wk(t,e){NE(t),Jp(t)?(t.q_.M_(e),Xp(t)):t.q_.set("Unknown")}async function Gk(t,e,n){if(t.q_.set("Online"),e instanceof gE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await uc(t,r)}else if(e instanceof xu?t.Q_.Ke(e):e instanceof mE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{const r=await SE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),u.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(ft.EMPTY_BYTE_STRING,d.snapshotVersion)),kE(i,l);const m=new Vr(d.target,l,c,d.sequenceNumber);Yp(i,m)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await uc(t,r)}}async function uc(t,e,n){if(!il(e))throw e;t.L_.add(1),await ll(t),t.q_.set("Offline"),n||(n=()=>SE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await qc(t)})}function PE(t,e){return e().catch(n=>uc(t,n,e))}async function Wc(t){const e=se(t),n=rs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Kk(e);)try{const s=await Pk(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Qk(e,s)}catch(s){await uc(e,s)}bE(e)&&DE(e)}function Kk(t){return Js(t)&&t.O_.length<10}function Qk(t,e){t.O_.push(e);const n=rs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function bE(t){return Js(t)&&!rs(t).n_()&&t.O_.length>0}function DE(t){rs(t).start()}async function Yk(t){rs(t).p_()}async function Xk(t){const e=rs(t);for(const n of t.O_)e.m_(n.mutations)}async function Jk(t,e,n){const r=t.O_.shift(),s=$p.from(r,e,n);await PE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wc(t)}async function Zk(t,e){e&&rs(t).V_&&await async function(r,s){if(function(o){return BR(o)&&o!==M.ABORTED}(s.code)){const i=r.O_.shift();rs(r).s_(),await PE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Wc(r)}}(t,e),bE(t)&&DE(t)}async function Uy(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=Js(n);n.L_.add(3),await ll(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await qc(n)}async function eN(t,e){const n=se(t);e?(n.L_.delete(2),await qc(n)):e||(n.L_.add(2),await ll(n),n.q_.set("Unknown"))}function yo(t){return t.K_||(t.K_=function(n,r,s){const i=se(n);return i.w_(),new Fk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Hk.bind(null,t),Ro:qk.bind(null,t),mo:Wk.bind(null,t),d_:Gk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Jp(t)?Xp(t):t.q_.set("Unknown")):(await t.K_.stop(),NE(t))})),t.K_}function rs(t){return t.U_||(t.U_=function(n,r,s){const i=se(n);return i.w_(),new Uk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Yk.bind(null,t),mo:Zk.bind(null,t),f_:Xk.bind(null,t),g_:Jk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Wc(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Zp(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function em(t,e){if(fr("AsyncQueue",`${e}: ${t}`),il(t))return new W(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=ta(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new Wi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(){this.W_=new Me(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ao{constructor(e,n,r,s,i,o,u,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new ao(e,n,Wi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class nN{constructor(){this.queries=zy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=se(n),i=s.queries;s.queries=zy(),i.forEach((o,u)=>{for(const l of u.j_)l.onError(r)})})(this,new W(M.ABORTED,"Firestore shutting down"))}}function zy(){return new go(t=>tE(t),Fc)}async function tm(t,e){const n=se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new tN,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=em(o,`Initialization of query '${_i(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&rm(n)}async function nm(t,e){const n=se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rN(t,e){const n=se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&rm(n)}function sN(t,e,n){const r=se(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function rm(t){t.Y_.forEach(e=>{e.next()})}var Ef,$y;($y=Ef||(Ef={})).ea="default",$y.Cache="cache";class sm{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ef.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.key=e}}class LE{constructor(e){this.key=e}}class iN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=nE(e),this.Ra=new Wi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new By,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const g=s.get(d),_=Uc(this.query,m)?m:null,C=!!g&&this.mutatedKeys.has(g.key),k=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let b=!1;g&&_?g.data.isEqual(_.data)?C!==k&&(r.track({type:3,doc:_}),b=!0):this.ga(g,_)||(r.track({type:2,doc:_}),b=!0,(l&&this.Aa(_,l)>0||c&&this.Aa(_,c)<0)&&(u=!0)):!g&&_?(r.track({type:0,doc:_}),b=!0):g&&!_&&(r.track({type:1,doc:g}),b=!0,(l||c)&&(u=!0)),b&&(_?(o=o.add(_),i=k?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,m)=>function(_,C){const k=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return k(_)-k(C)}(d.type,m.type)||this.Aa(d.doc,m.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new ao(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new By,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new LE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new OE(r))}),n}ba(e){this.Ta=e.Ts,this.da=ue();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class oN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class aN{constructor(e){this.key=e,this.va=!1}}class lN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new go(u=>tE(u),Fc),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(Q.comparator),this.Na=new Map,this.La=new Wp,this.Ba={},this.ka=new Map,this.qa=oo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uN(t,e,n=!0){const r=BE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await ME(r,e,n,!0),s}async function cN(t,e){const n=BE(t);await ME(n,e,!0,!1)}async function ME(t,e,n,r){const s=await bk(t.localStore,Ln(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await hN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&RE(t.remoteStore,s),u}async function hN(t,e,n,r,s){t.Ka=(m,g,_)=>async function(k,b,A,E){let w=b.view.ma(A);w.ns&&(w=await Vy(k.localStore,b.query,!1).then(({documents:I})=>b.view.ma(I,w)));const D=E&&E.targetChanges.get(b.targetId),V=E&&E.targetMismatches.get(b.targetId)!=null,F=b.view.applyChanges(w,k.isPrimaryClient,D,V);return qy(k,b.targetId,F.wa),F.snapshot}(t,m,g,_);const i=await Vy(t.localStore,e,!0),o=new iN(e,i.Ts),u=o.ma(i.documents),l=al.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(u,t.isPrimaryClient,l);qy(t,n,c.wa);const d=new oN(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function dN(t,e,n){const r=se(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Fc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await wf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qp(r.remoteStore,s.targetId),If(r,s.targetId)}).catch(sl)):(If(r,s.targetId),await wf(r.localStore,s.targetId,!0))}async function fN(t,e){const n=se(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qp(n.remoteStore,r.targetId))}async function pN(t,e,n){const r=EN(t);try{const s=await function(o,u){const l=se(o),c=Xe.now(),d=u.reduce((_,C)=>_.add(C.key),ue());let m,g;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let C=pr(),k=ue();return l.cs.getEntries(_,d).next(b=>{C=b,C.forEach((A,E)=>{E.isValidDocument()||(k=k.add(A))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,C)).next(b=>{m=b;const A=[];for(const E of u){const w=MR(E,m.get(E.key).overlayedDocument);w!=null&&A.push(new ls(E.key,w,Gw(w.value.mapValue),_n.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,A,u)}).next(b=>{g=b;const A=b.applyToLocalDocumentSet(m,k);return l.documentOverlayCache.saveOverlays(_,b.batchId,A)})}).then(()=>({batchId:g.batchId,changes:sE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Me(me)),c=c.insert(u,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await ul(r,s.changes),await Wc(r.remoteStore)}catch(s){const i=em(s,"Failed to persist write");n.reject(i)}}async function VE(t,e){const n=se(t);try{const r=await kk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?we(o.va):s.removedDocuments.size>0&&(we(o.va),o.va=!1))}),await ul(n,r,e)}catch(r){await sl(r)}}function Hy(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const l=se(o);l.onlineState=u;let c=!1;l.queries.forEach((d,m)=>{for(const g of m.j_)g.Z_(u)&&(c=!0)}),c&&rm(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mN(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Me(Q.comparator);o=o.insert(i,St.newNoDocument(i,re.min()));const u=ue().add(i),l=new $c(re.min(),new Map,new Me(me),o,u);await VE(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),im(r)}else await wf(r.localStore,e,!1).then(()=>If(r,e,n)).catch(sl)}async function gN(t,e){const n=se(t),r=e.batch.batchId;try{const s=await Rk(n.localStore,e);FE(n,r,null),jE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ul(n,s)}catch(s){await sl(s)}}async function yN(t,e,n){const r=se(t);try{const s=await function(o,u){const l=se(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,u).next(m=>(we(m!==null),d=m.keys(),l.mutationQueue.removeMutationBatch(c,m))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);FE(r,e,n),jE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ul(r,s)}catch(s){await sl(s)}}function jE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function FE(t,e,n){const r=se(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function If(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||UE(t,r)})}function UE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Qp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),im(t))}function qy(t,e,n){for(const r of n)r instanceof OE?(t.La.addReference(r.key,e),vN(t,r)):r instanceof LE?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||UE(t,r.key)):te()}function vN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),im(t))}function im(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(ke.fromString(e)),r=t.qa.next();t.Na.set(r,new aN(n)),t.Oa=t.Oa.insert(n,r),RE(t.remoteStore,new Vr(Ln(jc(n.path)),r,"TargetPurposeLimboResolution",Mp.oe))}}async function ul(t,e,n){const r=se(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(c){s.push(c);const m=Kp.Wi(l.targetId,c);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const d=se(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>j.forEach(c,g=>j.forEach(g.$i,_=>d.persistence.referenceDelegate.addReference(m,g.targetId,_)).next(()=>j.forEach(g.Ui,_=>d.persistence.referenceDelegate.removeReference(m,g.targetId,_)))))}catch(m){if(!il(m))throw m;K("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const _=d.os.get(g),C=_.snapshotVersion,k=_.withLastLimboFreeSnapshotVersion(C);d.os=d.os.insert(g,k)}}}(r.localStore,i))}async function _N(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await xE(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(l=>{l.reject(new W(M.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ul(n,r.hs)}}function wN(t,e){const n=se(t),r=n.Na.get(e);if(r&&r.va)return ue().add(r.key);{let s=ue();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function BE(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mN.bind(null,e),e.Ca.d_=rN.bind(null,e.eventManager),e.Ca.$a=sN.bind(null,e.eventManager),e}function EN(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yN.bind(null,e),e}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Ck(this.persistence,new Sk,e.initialUser,this.serializer)}Ga(e){return new Ik(Gp.Zr,this.serializer)}Wa(e){return new Ok}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class Tf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_N.bind(null,this.syncEngine),await eN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nN}()}createDatastore(e){const n=Hc(e.databaseInfo.databaseId),r=function(i){return new jk(i)}(e.databaseInfo);return function(i,o,u,l){return new Bk(i,o,u,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new $k(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Hy(this.syncEngine,n,0),function(){return Fy.D()?new Fy:new Lk}())}createSyncEngine(e,n){return function(s,i,o,u,l,c,d){const m=new lN(s,i,o,u,l,c);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=se(s);K("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ll(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Tf.provider={build:()=>new Tf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=Hw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=em(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function td(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await xE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Wy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await TN(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Uy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Uy(e.remoteStore,s)),t._onlineComponents=e}async function TN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await td(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;no("Error using user provided cache. Falling back to memory cache: "+n),await td(t,new cc)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await td(t,new cc);return t._offlineComponents}async function zE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await Wy(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await Wy(t,new Tf))),t._onlineComponents}function xN(t){return zE(t).then(e=>e.syncEngine)}async function hc(t){const e=await zE(t),n=e.eventManager;return n.onListen=uN.bind(null,e.syncEngine),n.onUnlisten=dN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fN.bind(null,e.syncEngine),n}function SN(t,e,n={}){const r=new ir;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,l,c){const d=new om({next:g=>{d.Za(),o.enqueueAndForget(()=>nm(i,m));const _=g.docs.has(u);!_&&g.fromCache?c.reject(new W(M.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&l&&l.source==="server"?c.reject(new W(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new sm(jc(u.path),d,{includeMetadataChanges:!0,_a:!0});return tm(i,m)}(await hc(t),t.asyncQueue,e,n,r)),r.promise}function AN(t,e,n={}){const r=new ir;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,l,c){const d=new om({next:g=>{d.Za(),o.enqueueAndForget(()=>nm(i,m)),g.fromCache&&l.source==="server"?c.reject(new W(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new sm(u,d,{includeMetadataChanges:!0,_a:!0});return tm(i,m)}(await hc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e,n){if(!n)throw new W(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CN(t,e,n,r){if(e===!0&&r===!0)throw new W(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ky(t){if(!Q.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qy(t){if(Q.isDocumentKey(t))throw new W(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function Wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gc(t);throw new W(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$E((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HC;switch(r.type){case"firstParty":return new KC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gy.get(n);r&&(K("ComponentProvider","Removing Datastore"),Gy.delete(n),r.terminate())}(this),Promise.resolve()}}function RN(t,e,n,r={}){var s;const i=(t=Wt(t,Kc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,l;if(typeof r.mockUserToken=="string")u=r.mockUserToken,l=Tt.MOCK_USER;else{u=J0(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new W(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Tt(c)}t._authCredentials=new qC(new $w(u,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class At{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}}class Yr extends us{constructor(e,n,r){super(e,n,jc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new Q(e))}withConverter(e){return new Yr(this.firestore,e,this._path)}}function Ke(t,e,...n){if(t=tt(t),HE("collection","path",e),t instanceof Kc){const r=ke.fromString(e,...n);return Qy(r),new Yr(t,null,r)}{if(!(t instanceof At||t instanceof Yr))throw new W(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return Qy(r),new Yr(t.firestore,null,r)}}function Gi(t,e,...n){if(t=tt(t),arguments.length===1&&(e=Hw.newId()),HE("doc","path",e),t instanceof Kc){const r=ke.fromString(e,...n);return Ky(r),new At(t,null,new Q(r))}{if(!(t instanceof At||t instanceof Yr))throw new W(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return Ky(r),new At(t.firestore,t instanceof Yr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new AE(this,"async_queue_retry"),this.Vu=()=>{const r=ed();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ed();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ir;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!il(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw fr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Zp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Jy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ss extends Kc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Xy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xy(e),this._firestoreClient=void 0,await e}}}function kN(t,e){const n=typeof t=="object"?t:Ap(),r=typeof t=="string"?t:"(default)",s=bc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Q0("firestore");i&&RN(s,...i)}return s}function Qc(t){if(t._terminated)throw new W(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NN(t),t._firestoreClient}function NN(t){var e,n,r;const s=t._freezeSettings(),i=function(u,l,c,d){return new aR(u,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,$E(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new IN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const l=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lo(ft.fromBase64String(e))}catch(n){throw new W(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new lo(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=/^__.*__$/;class bN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new ol(e,this.data,n,this.fieldTransforms)}}class qE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ls(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class um{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new um(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return dc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(WE(this.Cu)&&PN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class DN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hc(e)}Qu(e,n,r,s=!1){return new um({Cu:e,methodName:n,qu:r,path:ut.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jc(t){const e=t._freezeSettings(),n=Hc(t._databaseId);return new DN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GE(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);hm("Data must be an object, but it was:",o,r);const u=KE(r,o);let l,c;if(i.merge)l=new Ht(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const g=xf(e,m,n);if(!o.contains(g))throw new W(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);YE(d,g)||d.push(g)}l=new Ht(d),c=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=o.fieldTransforms;return new bN(new Lt(u),l,c)}class Zc extends Xc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zc}}class cm extends Xc{_toFieldTransform(e){return new bR(e.path,new Ha)}isEqual(e){return e instanceof cm}}function ON(t,e,n,r){const s=t.Qu(1,e,n);hm("Data must be an object, but it was:",s,r);const i=[],o=Lt.empty();Xs(r,(l,c)=>{const d=dm(e,l,n);c=tt(c);const m=s.Nu(d);if(c instanceof Zc)i.push(d);else{const g=cl(c,m);g!=null&&(i.push(d),o.set(d,g))}});const u=new Ht(i);return new qE(o,u,s.fieldTransforms)}function LN(t,e,n,r,s,i){const o=t.Qu(1,e,n),u=[xf(e,r,n)],l=[s];if(i.length%2!=0)throw new W(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)u.push(xf(e,i[g])),l.push(i[g+1]);const c=[],d=Lt.empty();for(let g=u.length-1;g>=0;--g)if(!YE(c,u[g])){const _=u[g];let C=l[g];C=tt(C);const k=o.Nu(_);if(C instanceof Zc)c.push(_);else{const b=cl(C,k);b!=null&&(c.push(_),d.set(_,b))}}const m=new Ht(c);return new qE(d,m,o.fieldTransforms)}function MN(t,e,n,r=!1){return cl(n,t.Qu(r?4:3,e))}function cl(t,e){if(QE(t=tt(t)))return hm("Unsupported field value:",e,t),KE(t,e);if(t instanceof Xc)return function(r,s){if(!WE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let l=cl(u,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:lc(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lc(s.serializer,i)}}if(r instanceof am)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lo)return{bytesValue:yE(s.serializer,r._byteString)};if(r instanceof At){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof lm)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw u.Bu("VectorValues must only contain numeric values.");return zp(u.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Gc(r)}`)}(t,e)}function KE(t,e){const n={};return qw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xs(t,(r,s)=>{const i=cl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function QE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof am||t instanceof lo||t instanceof At||t instanceof Xc||t instanceof lm)}function hm(t,e,n){if(!QE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Gc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function xf(t,e,n){if((e=tt(e))instanceof Yc)return e._internalPath;if(typeof e=="string")return dm(t,e);throw dc("Field path arguments must be of type string or ",t,!1,void 0,n)}const VN=new RegExp("[~\\*/\\[\\]]");function dm(t,e,n){if(e.search(VN)>=0)throw dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yc(...e.split("."))._internalPath}catch{throw dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new W(M.INVALID_ARGUMENT,u+t+l)}function YE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(eh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jN extends XE{data(){return super.data()}}function eh(t,e){return typeof e=="string"?dm(t,e):e instanceof Yc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fm{}class ZE extends fm{}function jr(t,e,...n){let r=[];e instanceof fm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof pm).length,u=i.filter(l=>l instanceof th).length;if(o>1||o>0&&u>0)throw new W(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class th extends ZE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new th(e,n,r)}_apply(e){const n=this._parse(e);return eI(e._query,n),new us(e.firestore,e.converter,pf(e._query,n))}_parse(e){const n=Jc(e.firestore);return function(i,o,u,l,c,d,m){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new W(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){ev(m,d);const _=[];for(const C of m)_.push(Zy(l,i,C));g={arrayValue:{values:_}}}else g=Zy(l,i,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||ev(m,d),g=MN(u,o,m,d==="in"||d==="not-in");return qe.create(c,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function rr(t,e,n){const r=e,s=eh("where",t);return th._create(s,r,n)}class pm extends fm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:En.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const l of u)eI(o,l),o=pf(o,l)}(e._query,n),new us(e.firestore,e.converter,pf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mm extends ZE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $a(i,o)}(e._query,this._field,this._direction);return new us(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new mo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function FN(t,e="asc"){const n=e,r=eh("orderBy",t);return mm._create(r,n)}function Zy(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new W(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eE(e)&&n.indexOf("/")!==-1)throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ke.fromString(n));if(!Q.isDocumentKey(r))throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wy(t,new Q(r))}if(n instanceof At)return wy(t,n._key);throw new W(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gc(n)}.`)}function ev(t,e){if(!Array.isArray(t)||t.length===0)throw new W(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eI(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UN{convertValue(e,n="none"){switch(Ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new lm(i)}convertGeoPoint(e){return new am(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ua(e));default:return null}}convertTimestamp(e){const n=ns(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ke.fromString(e);we(TE(r));const s=new Ba(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||fr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nI extends XE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(eh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Su extends nI{data(e={}){return super.data(e)}}class rI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ra(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Su(this._firestore,this._userDataWriter,r.key,r,new ra(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const l=new Su(s._firestore,s._userDataWriter,u.doc.key,u.doc,new ra(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const l=new Su(s._firestore,s._userDataWriter,u.doc.key,u.doc,new ra(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return u.type!==0&&(c=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),d=o.indexOf(u.doc.key)),{type:BN(u.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function BN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t){t=Wt(t,At);const e=Wt(t.firestore,ss);return SN(Qc(e),t._key).then(n=>sI(e,t,n))}class gm extends UN{constructor(e){super(),this.firestore=e}convertBytes(e){return new lo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function en(t){t=Wt(t,us);const e=Wt(t.firestore,ss),n=Qc(e),r=new gm(e);return JE(t._query),AN(n,t._query).then(s=>new rI(e,r,t,s))}function tv(t,e,n){t=Wt(t,At);const r=Wt(t.firestore,ss),s=tI(t.converter,e);return ym(r,[GE(Jc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,_n.none())])}function Sf(t,e,n,...r){t=Wt(t,At);const s=Wt(t.firestore,ss),i=Jc(s);let o;return o=typeof(e=tt(e))=="string"||e instanceof Yc?LN(i,"updateDoc",t._key,e,n,r):ON(i,"updateDoc",t._key,e),ym(s,[o.toMutation(t._key,_n.exists(!0))])}function sa(t,e){const n=Wt(t.firestore,ss),r=Gi(t),s=tI(t.converter,e);return ym(n,[GE(Jc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,_n.exists(!1))]).then(()=>r)}function nv(t,...e){var n,r,s;t=tt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Jy(e[o])||(i=e[o],o++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Jy(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let l,c,d;if(t instanceof At)c=Wt(t.firestore,ss),d=jc(t._key.path),l={next:m=>{e[o]&&e[o](sI(c,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Wt(t,us);c=Wt(m.firestore,ss),d=m._query;const g=new gm(c);l={next:_=>{e[o]&&e[o](new rI(c,g,m,_))},error:e[o+1],complete:e[o+2]},JE(t._query)}return function(g,_,C,k){const b=new om(k),A=new sm(_,b,C);return g.asyncQueue.enqueueAndForget(async()=>tm(await hc(g),A)),()=>{b.Za(),g.asyncQueue.enqueueAndForget(async()=>nm(await hc(g),A))}}(Qc(c),d,u,l)}function ym(t,e){return function(r,s){const i=new ir;return r.asyncQueue.enqueueAndForget(async()=>pN(await xN(r),s,i)),i.promise}(Qc(t),e)}function sI(t,e,n){const r=n.docs.get(e._key),s=new gm(t);return new nI(t,s,e._key,r,new ra(n.hasPendingWrites,n.fromCache),e.converter)}function Ii(){return new cm("serverTimestamp")}(function(e,n=!0){(function(s){po=s})(Ys),zs(new Zr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new ss(new WC(r.getProvider("auth-internal")),new YC(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ba(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),bn(my,"4.7.3",e),bn(my,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="firebasestorage.googleapis.com",$N="storageBucket",HN=2*60*1e3,qN=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends Fn{constructor(e,n,r=0){super(nd(e),`Firebase Storage: ${n} (${nd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jn||(jn={}));function nd(t){return"storage/"+t}function WN(){const t="An unknown error occurred, please check the error payload for server response.";return new Un(jn.UNKNOWN,t)}function GN(){return new Un(jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KN(){return new Un(jn.CANCELED,"User canceled the upload/download.")}function QN(t){return new Un(jn.INVALID_URL,"Invalid URL '"+t+"'.")}function YN(t){return new Un(jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function rv(t){return new Un(jn.INVALID_ARGUMENT,t)}function oI(){return new Un(jn.APP_DELETED,"The Firebase app was deleted.")}function XN(t){return new Un(jn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=gn.makeFromUrl(e,n)}catch{return new gn(e,"")}if(r.path==="")return r;throw YN(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${m}/${d}/b/${s}/o${g}`,"i"),C={bucket:1,path:3},k=n===iI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",A=new RegExp(`^https?://${k}/${s}/${b}`,"i"),w=[{regex:u,indices:l,postModify:i},{regex:_,indices:C,postModify:c},{regex:A,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<w.length;D++){const V=w[D],F=V.regex.exec(e);if(F){const I=F[V.indices.bucket];let v=F[V.indices.path];v||(v=""),r=new gn(I,v),V.postModify(r);break}}if(r==null)throw QN(e);return r}}class JN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t,e,n){let r=1,s=null,i=null,o=!1,u=0;function l(){return u===2}let c=!1;function d(...b){c||(c=!0,e.apply(null,b))}function m(b){s=setTimeout(()=>{s=null,t(_,l())},b)}function g(){i&&clearTimeout(i)}function _(b,...A){if(c){g();return}if(b){g(),d.call(null,b,...A);return}if(l()||o){g(),d.call(null,b,...A);return}r<64&&(r*=2);let w;u===1?(u=2,w=0):w=(r+Math.random())*1e3,m(w)}let C=!1;function k(b){C||(C=!0,g(),!c&&(s!==null?(b||(u=2),clearTimeout(s),m(0)):b||(u=1)))}return m(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function eP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t){return t!==void 0}function sv(t,e,n,r){if(r<e)throw rv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw rv(`Invalid value for '${t}'. Expected ${n} or less.`)}function nP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var fc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fc||(fc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n,r,s,i,o,u,l,c,d,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,C)=>{this.resolve_=_,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new nu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=u=>{const l=u.loaded,c=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const u=i.getErrorCode()===fc.NO_ERROR,l=i.getStatus();if(!u||rP(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===fc.ABORT;r(!1,new nu(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new nu(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(u,u.getResponse());tP(l)?i(l):i()}catch(l){o(l)}else if(u!==null){const l=WN();l.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,l)):o(l)}else if(s.canceled){const l=this.appDelete_?oI():KN();o(l)}else{const l=GN();o(l)}};this.canceled_?n(!1,new nu(!1,null,!0)):this.backoffId_=ZN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&eP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function iP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function oP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function lP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function uP(t,e,n,r,s,i,o=!0){const u=nP(t.urlParams),l=t.url+u,c=Object.assign({},t.headers);return aP(c,e),iP(c,n),oP(c,i),lP(c,r),new sP(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function hP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this._service=e,n instanceof gn?this._location=n:this._location=gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new pc(e,n)}get root(){const e=new gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hP(this._location.path)}get storage(){return this._service}get parent(){const e=cP(this._location.path);if(e===null)return null;const n=new gn(this._location.bucket,e);return new pc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw XN(e)}}function iv(t,e){const n=e==null?void 0:e[$N];return n==null?null:gn.makeFromBucketSpec(n,t)}function dP(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:J0(s,t.app.options.projectId))}class fP{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=iI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=HN,this._maxUploadRetryTime=qN,this._requests=new Set,s!=null?this._bucket=gn.makeFromBucketSpec(s,this._host):this._bucket=iv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gn.makeFromBucketSpec(this._url,e):this._bucket=iv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pc(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new JN(oI());{const o=uP(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const ov="@firebase/storage",av="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="storage";function pP(t=Ap(),e){t=tt(t);const r=bc(t,aI).getImmediate({identifier:e}),s=Q0("storage");return s&&mP(r,...s),r}function mP(t,e,n,r={}){dP(t,e,n,r)}function gP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new fP(n,r,s,e,Ys)}function yP(){zs(new Zr(aI,gP,"PUBLIC").setMultipleInstances(!0)),bn(ov,av,""),bn(ov,av,"esm2017")}yP();const vP={apiKey:"AIzaSyC7fsX00zywhuvCzR_h8xTzv7V47ffy578",authDomain:"drk-attendance-app.firebaseapp.com",projectId:"drk-attendance-app",storageBucket:"drk-attendance-app.firebasestorage.app",messagingSenderId:"652472229762",appId:"1:652472229762:web:abe2cfa416c1ec6e0c799b"},vm=tw(vP),lv=zC(vm),Pe=kN(vm);pP(vm);const Gs="drk-attendance-app",_P=t=>{const e=document.createElement("canvas"),n=320;let r=t.videoWidth||t.naturalWidth||t.width,s=t.videoHeight||t.naturalHeight||t.height;if(!r||!s)return null;const i=n/r;return e.width=n,e.height=Math.round(s*i),e.getContext("2d").drawImage(t,0,0,e.width,e.height),e.toDataURL("image/jpeg",.7)},ru=t=>{if(!t)return t;const e={...t};for(const n in e)e[n]&&typeof e[n]=="object"&&e[n].toDate&&(e[n]=e[n].toDate().toISOString());return e},_m=async t=>{try{if(crypto&&crypto.subtle&&crypto.subtle.digest){console.log("[HASH] Using Web Crypto API");const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")}}catch(n){console.warn("[HASH] Web Crypto API failed:",n.message)}console.log("[HASH] Using fallback hash function");let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return"fallback_"+Math.abs(e).toString(16)},it="drk-attendance-app",wP="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js",rd="https://justadudewhohacks.github.io/face-api.js/models",lI="service_ymkaozj",su="template_6mzqj9h",Af="TGP_WBov-ZtaJ5Jsn",EP=!0,uv=async({username:t,password:e,rememberFlag:n,setStatusMsg:r,setLoading:s,setAppUser:i,setView:o,setLoginUser:u,setLoginPass:l})=>{var c;if(!t||!e){r({type:"error",text:"Enter username and password"});return}s(!0);try{console.log("[LOGIN] ===== LOGIN ATTEMPT ====="),console.log(`[LOGIN] Username: ${t}`),console.log(`[LOGIN] Device: ${navigator.userAgent}`),console.log(`[LOGIN] Online: ${navigator.onLine}`);const d=await _m(e);console.log("[LOGIN]  Password hashed"),console.log("[LOGIN] Trying hashed password...");let m=jr(Ke(Pe,"artifacts",Gs,"public","data","app_users"),rr("username","==",t.toLowerCase()),rr("password","==",d)),g=await en(m);if(console.log(`[LOGIN]   Result: ${g.size===0?" not found":` found ${g.size} users`}`),g.empty){console.log("[LOGIN] Trying plain text password...");const _=jr(Ke(Pe,"artifacts",Gs,"public","data","app_users"),rr("username","==",t.toLowerCase()),rr("password","==",e));g=await en(_),console.log(`[LOGIN]   Result: ${g.size===0?" not found":` found ${g.size} users`}`)}if(g.empty)console.warn(`[LOGIN]  User not found with username: "${t}"`),console.warn("[LOGIN]   Check: 1) Username exists? 2) Password correct? 3) Database has users?"),r({type:"error",text:`Invalid username or password
(Check console for details)`});else{const _=g.docs[0].data();console.log(`[LOGIN]  LOGIN SUCCESS! User: ${_.name||t}`),i({..._,id:g.docs[0].id}),r(null),o("home"),n?localStorage.setItem("drkAttendanceRemember",JSON.stringify({username:t.toLowerCase(),password:e,remember:!0})):localStorage.removeItem("drkAttendanceRemember")}}catch(d){console.error("[LOGIN]  EXCEPTION"),console.error(`[LOGIN] Type: ${d.constructor.name}`),console.error(`[LOGIN] Code: ${d.code}`),console.error(`[LOGIN] Message: ${d.message}`),console.error("[LOGIN] Stack:",d);let m="Login error";navigator.onLine?d.code==="permission-denied"?m="Access denied - ask admin to check Firestore rules":d.code==="unauthenticated"?m="Auth failed - refresh page and try again":(c=d.message)!=null&&c.includes("network")?m="Network error - check connection":m=d.message||"Unknown error":m="No internet - check WiFi",r({type:"error",text:m})}s(!1)},IP=async({token:t,setResetTokenStatus:e,setResetUserDocId:n,setResetDocId:r})=>{e("checking");try{const s=jr(Ke(Pe,"artifacts",Gs,"public","data","password_resets"),rr("token","==",t),rr("used","==",!1)),i=await en(s);if(i.empty){e("invalid");return}const o=i.docs[0],u=o.data();e("valid"),n(u.userDocId),r(o.id)}catch(s){console.error(s),e("invalid")}},TP=async({fpUser:t,setStatusMsg:e,setLoading:n})=>{if(!t){e({type:"error",text:"Please enter username"});return}n(!0);try{const r=jr(Ke(Pe,"artifacts",Gs,"public","data","app_users"),rr("username","==",t.toLowerCase())),s=await en(r);if(s.empty){e({type:"error",text:"Username not found"}),n(!1);return}const i=s.docs[0],o=i.data();if(!o.email){e({type:"error",text:"No email stored for this user"}),n(!1);return}const u=Math.random().toString(36).slice(2)+Date.now().toString(36),l=`${window.location.origin}?reset=${u}`;await sa(Ke(Pe,"artifacts",Gs,"public","data","password_resets"),{username:o.username,email:o.email,userDocId:i.id,token:u,used:!1,createdAt:Ii()}),await Zd.send(lI,"template_4hmf0cp",{to_email:o.email,to_name:o.name||o.username,reset_link:l},Af),e({type:"success",text:`Reset link sent to ${o.email}. Please check inbox or spam.`})}catch(r){console.error("EmailJS error:",r),e({type:"error",text:"Failed to send reset link. Check EmailJS config."})}n(!1)},xP=async({fpNewPass:t,resetUserDocId:e,resetDocId:n,setStatusMsg:r,setLoading:s,setForgotPasswordMode:i,setFpStep:o,setFpUser:u,setFpNewPass:l,setResetTokenStatus:c})=>{if(t.length<8){r({type:"error",text:"Password must be at least 8 characters."});return}if(!e||!n){r({type:"error",text:"Invalid reset link."});return}s(!0);try{const d=await _m(t),m=Gi(Pe,"artifacts",Gs,"public","data","app_users",e);await Sf(m,{password:d});const g=Gi(Pe,"artifacts",Gs,"public","data","password_resets",n);await Sf(g,{used:!0}),r({type:"success",text:"Password changed successfully! Please login."}),window.history.replaceState({},document.title,window.location.pathname),setTimeout(()=>{i(!1),o(1),u(""),l(""),c("idle")},1500)}catch(d){console.error(d),r({type:"error",text:"Failed to update password."})}s(!1)};function SP({appUser:t,students:e,setView:n,handleDashboardStartAttendance:r}){return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-red-800 to-red-900 rounded-2xl p-4 text-white shadow-xl",children:[f.jsxs("div",{className:"flex items-start justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-bold",children:"Good Evening,"}),f.jsx("h3",{className:"text-2xl font-extrabold",children:t==null?void 0:t.name})]}),f.jsx("div",{className:"text-sm bg-white/10 px-3 py-2 rounded-lg",children:f.jsx("div",{className:"font-bold text-right",children:new Date().toLocaleDateString()})})]}),f.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-3 gap-3",children:[f.jsxs("div",{className:"col-span-1 bg-white/8 p-3 rounded-lg",children:[f.jsx("div",{className:"font-bold text-lg",children:e.length}),f.jsx("div",{className:"text-xs",children:"Students Registered"})]}),f.jsx("div",{className:"col-span-2 bg-white/8 p-3 rounded-lg flex items-center justify-center text-xs text-slate-100"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("button",{onClick:()=>n("register"),className:"bg-white p-4 rounded-xl shadow text-left hover:shadow-lg transition",children:[f.jsx("div",{className:"font-bold",children:"Register Student"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Add new student profile"})]}),f.jsxs("button",{onClick:r,className:"bg-white p-4 rounded-xl shadow text-left hover:shadow-lg transition",children:[f.jsx("div",{className:"font-bold",children:"Take Attendance"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Start live scan"})]}),f.jsxs("button",{onClick:()=>n("reports"),className:"bg-white p-4 rounded-xl shadow text-left hover:shadow-lg transition",children:[f.jsx("div",{className:"font-bold",children:"View Reports"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Generate attendance reports"})]}),f.jsxs("button",{onClick:()=>n("database"),className:"bg-white p-4 rounded-xl shadow text-left hover:shadow-lg transition",children:[f.jsx("div",{className:"font-bold",children:"Search Database"}),f.jsx("div",{className:"text-xs text-slate-500",children:"Find students"})]})]}),f.jsx("div",{className:"grid grid-cols-2 gap-3",children:f.jsxs("button",{onClick:()=>n("history"),className:"bg-white p-4 rounded-xl shadow text-left hover:shadow-lg transition",children:[f.jsx("div",{className:"font-bold",children:"Attendance History"}),f.jsx("div",{className:"text-xs text-slate-500",children:"View past records"})]})})]})}function AP({regStep:t,setRegStep:e,regMode:n,setRegMode:r,regName:s,setRegName:i,regId:o,setRegId:u,regBranch:l,setRegBranch:c,regYear:d,setRegYear:m,regPhone:g,setRegPhone:_,regEmail:C,setRegEmail:k,uploadedImgSrc:b,videoRef:A,imgRef:E,loading:w,handleProceedToCamera:D,handleCheckAndRegister:V,handleFileChange:F,toggleCameraFacing:I}){return f.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 sm:gap-8",children:[f.jsxs("div",{className:"lg:w-1/2 space-y-4",children:[f.jsxs("div",{className:"flex bg-slate-200 p-1 rounded-lg",children:[f.jsx("button",{onClick:()=>r("live"),className:`flex-1 py-2 rounded-md ${n==="live"?"bg-white text-red-700 shadow":"text-slate-500"}`,children:"Live Camera"}),f.jsx("button",{onClick:()=>r("upload"),className:`flex-1 py-2 rounded-md ${n==="upload"?"bg-white text-red-700 shadow":"text-slate-500"}`,children:"Upload Photo"})]}),f.jsx("div",{className:"relative bg-slate-900 rounded-xl overflow-hidden shadow-lg aspect-video border-4 border-slate-200 flex items-center justify-center",children:n==="live"?f.jsxs(f.Fragment,{children:[f.jsx("video",{ref:A,autoPlay:!0,muted:!0,className:"w-full h-full object-cover"}),t==="details"&&f.jsxs("div",{className:"absolute inset-0 bg-slate-100/90 flex flex-col items-center justify-center z-10",children:[f.jsx(Jd,{className:"w-10 h-10 text-slate-400 mb-2"}),f.jsx("p",{className:"text-slate-600 font-semibold",children:"Enter Details First"})]}),t==="camera"&&f.jsx("button",{onClick:I,className:"absolute top-3 right-3 bg-black/40 text-white text-xs px-3 py-1 rounded-full",children:"Switch Camera"})]}):f.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-800",children:b?f.jsx("img",{ref:E,src:b,className:"h-full object-contain",alt:"Preview"}):f.jsxs("label",{className:"cursor-pointer flex flex-col items-center justify-center h-full w-full hover:bg-slate-700 transition-colors",children:[f.jsx($x,{className:"w-10 h-10 mb-2 text-slate-400"}),f.jsx("span",{className:"text-xs text-slate-400 font-semibold",children:"Click to Upload Image"}),f.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:F})]})})})]}),f.jsxs("div",{className:"lg:w-1/2 bg-white p-5 rounded-xl shadow border border-slate-200",children:[f.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[f.jsx(Jd,{className:"w-5 h-5 mr-2 text-red-700"})," New Registration"]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("input",{type:"text",maxLength:20,className:"w-full p-3 border rounded-lg uppercase",value:o,onChange:v=>u(v.target.value.toUpperCase()),placeholder:"ID (e.g. 21CSE01001)",disabled:t==="camera"}),f.jsx("input",{type:"text",className:"w-full p-3 border rounded-lg",value:s,onChange:v=>i(v.target.value),placeholder:"Full Name",disabled:t==="camera"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("select",{className:"w-full p-3 border rounded-lg",value:l,onChange:v=>c(v.target.value),disabled:t==="camera",children:[f.jsx("option",{children:"CSE"}),f.jsx("option",{children:"CSM"}),f.jsx("option",{children:"CSD"}),f.jsx("option",{children:"CSC"}),f.jsx("option",{children:"ECE"}),f.jsx("option",{children:"EEE"}),f.jsx("option",{children:"MECH"}),f.jsx("option",{children:"CIVIL"})]}),f.jsxs("select",{className:"w-full p-3 border rounded-lg",value:d,onChange:v=>m(v.target.value),disabled:t==="camera",children:[f.jsx("option",{children:"1st"}),f.jsx("option",{children:"2nd"}),f.jsx("option",{children:"3rd"}),f.jsx("option",{children:"4th"})]})]}),f.jsx("input",{type:"tel",maxLength:10,className:"w-full p-3 border rounded-lg",value:g,onChange:v=>_(v.target.value.replace(/\D/g,"")),placeholder:"Phone Number",disabled:t==="camera"}),f.jsx("input",{type:"email",className:"w-full p-3 border rounded-lg",value:C,onChange:v=>k(v.target.value),placeholder:"Email",disabled:t==="camera"}),t==="details"?f.jsxs("button",{onClick:D,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold",children:["Proceed to Camera ",f.jsx(Fx,{className:"w-4 h-4 inline-block ml-2"})]}):f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:()=>e("details"),className:"flex-1 border py-2 rounded-lg",children:"Edit Details"}),f.jsx("button",{onClick:()=>V(),disabled:w,className:"flex-1 bg-green-600 text-white py-2 rounded-lg",children:w?"Saving...":"Save Profile"})]})]})]})]})}function CP({attStep:t,setAttStep:e,videoRef:n,continuousScanActive:r,markedToday:s,students:i,handleEndSession:o}){return f.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[f.jsxs("div",{className:"w-full max-w-3xl bg-white p-5 rounded-2xl shadow border",children:[t==="setup"&&f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-bold mb-3",children:"Start Attendance Session"}),f.jsx("p",{className:"text-slate-600 text-sm mb-4",children:"Ensure all students are within camera range. The system will continuously scan for faces and mark them as present."})]}),t==="camera"&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-bold",children:"Attendance In Progress"}),f.jsx("div",{className:"text-xs text-slate-500 mt-1",children:r?f.jsx("span",{className:"text-green-600 font-semibold",children:" Live Scanning"}):f.jsx("span",{className:"text-yellow-600",children:"Initializing..."})})]}),f.jsx("button",{onClick:o,className:"bg-red-600 text-white px-4 py-2 rounded-lg",children:"End Session"})]}),f.jsxs("div",{className:"bg-slate-900 rounded-lg overflow-hidden border-4 border-slate-200 aspect-video flex items-center justify-center relative",children:[f.jsx("video",{ref:n,autoPlay:!0,muted:!0,className:"w-full h-full object-cover"}),!r&&f.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Xd,{className:"w-8 h-8 animate-spin text-white mx-auto mb-2"}),f.jsx("p",{className:"text-white text-sm font-semibold",children:"Starting camera..."})]})})]})]})]}),t==="camera"&&f.jsxs("div",{className:"w-full max-w-3xl bg-white p-4 rounded-2xl shadow border",children:[f.jsxs("h3",{className:"font-bold mb-3",children:["Present Students (",s.size,")"]}),f.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:s.size===0?f.jsx("p",{className:"text-slate-500 text-sm",children:"Waiting for students to be detected..."}):Array.from(s).map(u=>{const l=i.find(c=>c.studentId===u);return f.jsxs("div",{className:"p-2 bg-green-50 border border-green-200 rounded flex items-center gap-2",children:[f.jsx(T0,{className:"w-4 h-4 text-green-600"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-sm",children:(l==null?void 0:l.name)||u}),f.jsxs("div",{className:"text-xs text-slate-500",children:[l==null?void 0:l.branch,"  ",l==null?void 0:l.year]})]})]},u)})})]})]})}function RP({reportDate:t,setReportDate:e,reportBranch:n,setReportBranch:r,reportYear:s,setReportYear:i,reportData:o,handleGenerateReport:u,handleDownloadReport:l,sendReportToHODs:c,loading:d,SHOW_EMAIL_BUTTON:m}){return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-white p-4 rounded-xl shadow border border-slate-200",children:[f.jsxs("h2",{className:"text-lg font-bold flex items-center",children:[f.jsx(x0,{className:"w-5 h-5 mr-2 text-blue-700"})," Class Attendance Report"]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-6 gap-3 mt-3 items-end",children:[f.jsxs("div",{className:"sm:col-span-2",children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Date"}),f.jsx("input",{type:"date",className:"w-full p-2 border rounded",value:t,onChange:g=>e(g.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Branch"}),f.jsxs("select",{className:"w-full p-2 border rounded",value:n,onChange:g=>r(g.target.value),children:[f.jsx("option",{value:"All",children:"All"}),f.jsx("option",{value:"CSE",children:"CSE"}),f.jsx("option",{value:"CSM",children:"CSM"}),f.jsx("option",{value:"CSD",children:"CSD"}),f.jsx("option",{value:"CSC",children:"CSC"}),f.jsx("option",{value:"ECE",children:"ECE"}),f.jsx("option",{value:"EEE",children:"EEE"}),f.jsx("option",{value:"MECH",children:"MECH"}),f.jsx("option",{value:"CIVIL",children:"CIVIL"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Year"}),f.jsxs("select",{className:"w-full p-2 border rounded",value:s,onChange:g=>i(g.target.value),children:[f.jsx("option",{value:"All",children:"All"}),f.jsx("option",{children:"1st"}),f.jsx("option",{children:"2nd"}),f.jsx("option",{children:"3rd"}),f.jsx("option",{children:"4th"})]})]}),f.jsx("div",{className:"sm:col-span-2 flex gap-2",children:f.jsx("button",{onClick:u,className:"w-full bg-blue-600 text-white py-2 rounded font-bold",children:"Generate"})})]})]}),o&&f.jsxs("div",{className:"bg-white p-4 rounded-xl shadow border border-slate-200",children:[f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-bold",children:"Report Summary"}),f.jsxs("div",{className:"text-xs text-slate-500",children:[n,"-",s,"  ",t]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"p-2 bg-green-50 rounded",children:[f.jsx("div",{className:"font-bold text-green-700",children:o.filter(g=>g.status==="Present").length}),f.jsx("div",{className:"text-xs",children:"Present"})]}),f.jsxs("div",{className:"p-2 bg-red-50 rounded",children:[f.jsx("div",{className:"font-bold text-red-700",children:o.filter(g=>g.status==="Absent").length}),f.jsx("div",{className:"text-xs",children:"Absent"})]})]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase text-xs",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-2",children:"Roll No"}),f.jsx("th",{className:"p-2",children:"Name"}),f.jsx("th",{className:"p-2",children:"Time In"}),f.jsx("th",{className:"p-2",children:"Status"}),f.jsx("th",{className:"p-2",children:"Branch"}),f.jsx("th",{className:"p-2",children:"Year"})]})}),f.jsx("tbody",{children:o.map(g=>f.jsxs("tr",{className:"border-b",children:[f.jsx("td",{className:"p-2 font-mono",children:g.studentId}),f.jsx("td",{className:"p-2 font-bold",children:g.name}),f.jsx("td",{className:"p-2",children:g.timeIn||"-"}),f.jsx("td",{className:"p-2",children:f.jsx("span",{className:`px-2 py-1 rounded ${g.status==="Present"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:g.status})}),f.jsx("td",{className:"p-2",children:g.branch}),f.jsx("td",{className:"p-2",children:g.year})]},g.id||g.studentId))})]})}),f.jsxs("div",{className:"mt-4 flex gap-3",children:[f.jsxs("button",{onClick:l,className:"bg-blue-600 text-white px-4 py-2 rounded font-bold",children:[f.jsx(Ux,{className:"w-4 h-4 inline mr-2"})," Download CSV"]}),m&&f.jsxs("button",{onClick:()=>c(n,t,o),disabled:d,className:"bg-green-600 text-white px-4 py-2 rounded font-bold",children:[f.jsx(Wx,{className:"w-4 h-4 inline mr-2"})," ",d?"Sending...":"Upload & Email HOD"]})]})]})]})}function kP({searchQuery:t,setSearchQuery:e,searchResult:n,handleSearch:r,handleGenerateIDCard:s}){return f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"bg-white p-4 rounded-xl shadow border",children:[f.jsx("h2",{className:"font-bold",children:"Student Database Search"}),f.jsxs("div",{className:"mt-3 flex gap-3",children:[f.jsx("input",{type:"text",placeholder:"Enter Roll No or Name",className:"flex-1 p-3 border rounded",value:t,onChange:i=>e(i.target.value.toUpperCase())}),f.jsx("button",{onClick:()=>{r(),e("")},className:"bg-red-700 text-white px-4 py-3 rounded",children:"Search"})]}),n==="not-found"&&f.jsx("p",{className:"mt-3 text-red-600",children:"No student found for given query."}),n&&n!=="not-found"&&f.jsx("div",{className:"mt-4 bg-white rounded-xl overflow-hidden border shadow",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3",children:[f.jsx("div",{className:"md:col-span-1 bg-slate-100 p-3 flex items-center justify-center",children:n.photo?f.jsx("img",{src:n.photo,className:"w-full h-48 object-cover",alt:""}):"No Photo"}),f.jsxs("div",{className:"p-4 md:col-span-2",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-xl",children:n.name}),f.jsxs("div",{className:"text-sm",children:[n.branch,"  ",n.year]})]}),f.jsx("button",{onClick:()=>s(n),className:"bg-blue-600 text-white px-3 py-2 rounded",children:"Download ID"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3 text-sm",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-slate-400",children:"Roll No"}),f.jsx("div",{children:n.studentId})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-slate-400",children:"Phone"}),f.jsx("div",{children:n.phone})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-slate-400",children:"Email"}),f.jsx("div",{className:"break-all",children:n.email})]})]})]})]})})]})})}function NP({historyDate:t,setHistoryDate:e,historyBranch:n,setHistoryBranch:r,historyYear:s,setHistoryYear:i,historyLoading:o,historyList:u,fetchHistoryByDate:l,setView:c,fetchHistoryList:d}){return f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"bg-white p-4 rounded-xl shadow border",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h2",{className:"font-bold",children:"Attendance History (Student)"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:d,className:"px-3 py-2 border rounded",children:"Refresh Dates"}),f.jsx("button",{onClick:()=>c("home"),className:"px-3 py-2 border rounded",children:"Back"})]})]}),f.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-4 gap-3 items-end",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-slate-500",children:"Select Date"}),f.jsx("input",{type:"date",className:"w-full p-2 border rounded",value:t,onChange:m=>e(m.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-slate-500",children:"Branch (optional)"}),f.jsxs("select",{className:"w-full p-2 border rounded",value:n,onChange:m=>r(m.target.value),children:[f.jsx("option",{value:"",children:"All"}),f.jsx("option",{value:"CSE",children:"CSE"}),f.jsx("option",{value:"CSM",children:"CSM"}),f.jsx("option",{value:"CSD",children:"CSD"}),f.jsx("option",{value:"CSC",children:"CSC"}),f.jsx("option",{value:"ECE",children:"ECE"}),f.jsx("option",{value:"EEE",children:"EEE"}),f.jsx("option",{value:"MECH",children:"MECH"}),f.jsx("option",{value:"CIVIL",children:"CIVIL"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-slate-500",children:"Year (optional)"}),f.jsxs("select",{className:"w-full p-2 border rounded",value:s,onChange:m=>i(m.target.value),children:[f.jsx("option",{value:"",children:"All"}),f.jsx("option",{value:"1st",children:"1st"}),f.jsx("option",{value:"2nd",children:"2nd"}),f.jsx("option",{value:"3rd",children:"3rd"}),f.jsx("option",{value:"4th",children:"4th"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>l(t,n,s),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Show"}),f.jsx("button",{onClick:()=>{e(new Date().toISOString().split("T")[0]),l(new Date().toISOString().split("T")[0],n,s)},className:"px-4 py-2 border rounded",children:"Today"})]})]}),f.jsxs("div",{className:"mt-6",children:[f.jsx("h3",{className:"font-semibold mb-3",children:"Available Dates"}),o&&f.jsx("div",{className:"text-sm text-slate-500",children:"Loading..."}),!o&&!u.length&&f.jsx("div",{className:"text-sm text-slate-500",children:"No history found."}),!o&&u.length>0&&f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:u.map(m=>f.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-mono text-sm",children:m.dateId}),f.jsxs("div",{className:"text-xs text-slate-500",children:[m.count," present"]})]}),f.jsx("div",{className:"flex gap-2",children:f.jsx("button",{onClick:()=>l(m.dateId,n,s),className:"px-3 py-2 bg-blue-600 text-white rounded",children:"View"})})]},m.dateId))})]})]})})}function PP({appUser:t,profileEditMode:e,setProfileEditMode:n,profileEmail:r,setProfileEmail:s,profilePhone:i,setProfilePhone:o,profileDept:u,setProfileDept:l,profilePhotoPreview:c,handleProfilePhotoChange:d,handleSaveProfile:m,handleCancelProfileEdit:g,handleLogout:_,setView:C}){return f.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[f.jsxs("div",{className:"bg-red-900 text-white rounded-3xl p-6 shadow flex items-center gap-4",children:[f.jsx("div",{className:"w-14 h-14 rounded-full bg-white/20 flex items-center justify-center",children:c?f.jsx("img",{src:c,alt:"Profile",className:"w-full h-full object-cover rounded-full"}):f.jsx(S0,{className:"w-6 h-6"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h2",{className:"font-bold text-xl",children:t.name}),f.jsx("div",{className:"text-sm uppercase",children:t.role})]}),f.jsx("button",{onClick:_,className:"bg-red-800 px-3 py-2 rounded text-white",children:"Logout"})]}),f.jsxs("div",{className:"bg-white p-4 rounded-xl shadow border",children:[f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsx("h3",{className:"font-semibold text-slate-600",children:"Faculty Details"}),!e&&f.jsx("button",{onClick:()=>n(!0),className:"text-blue-600",children:"Edit Profile"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-slate-400",children:"Name"}),f.jsx("div",{className:"font-medium",children:t.name})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-slate-400",children:"Username"}),f.jsx("div",{className:"font-medium",children:t.username})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-slate-400",children:"Role"}),f.jsx("div",{className:"font-medium",children:t.role})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-slate-400",children:"Department"}),e?f.jsxs("select",{className:"w-full p-2 border rounded",value:u,onChange:k=>l(k.target.value),children:[f.jsx("option",{value:"",children:"Select Department"}),f.jsx("option",{value:"CSE",children:"CSE"}),f.jsx("option",{value:"CSM",children:"CSM"}),f.jsx("option",{value:"CSD",children:"CSD"}),f.jsx("option",{value:"CSC",children:"CSC"}),f.jsx("option",{value:"ECE",children:"ECE"}),f.jsx("option",{value:"EEE",children:"EEE"}),f.jsx("option",{value:"MECH",children:"MECH"}),f.jsx("option",{value:"CIVIL",children:"CIVIL"})]}):f.jsx("div",{className:"font-medium",children:t.department||"N/A"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-slate-400",children:"Email"}),e?f.jsx("input",{value:r,onChange:k=>s(k.target.value),className:"w-full p-2 border rounded"}):f.jsx("div",{className:"font-medium break-all",children:t.email||"Not linked"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-slate-400",children:"Phone"}),e?f.jsx("input",{value:i,onChange:k=>o(k.target.value),className:"w-full p-2 border rounded"}):f.jsx("div",{className:"font-medium",children:t.phone||"N/A"})]})]}),e&&f.jsxs("div",{className:"mt-3",children:[f.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Profile Photo"}),f.jsx("input",{type:"file",accept:"image/*",onChange:d}),f.jsxs("div",{className:"flex gap-3 mt-3",children:[f.jsx("button",{onClick:m,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Save Changes"}),f.jsx("button",{onClick:g,className:"border px-4 py-2 rounded",children:"Cancel"})]})]})]}),["admin","principal","hod"].includes(((t==null?void 0:t.role)||"").toLowerCase())&&f.jsx("div",{className:"bg-white p-4 rounded-xl shadow border",children:f.jsx("button",{onClick:()=>C("manage_users"),className:"w-full bg-red-700 text-white py-3 rounded",children:"Add Staff"})})]})}function bP({newUserFirstName:t,setNewUserFirstName:e,newUserLastName:n,setNewUserLastName:r,newUserUser:s,setNewUserUser:i,newUserEmail:o,setNewUserEmail:u,newUserDept:l,setNewUserDept:c,newUserDesignation:d,setNewUserDesignation:m,newUserPass:g,setNewUserPass:_,newUserConfirmPass:C,setNewUserConfirmPass:k,loading:b,handleCreateStaff:A,setView:E}){return f.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:f.jsxs("div",{className:"bg-white p-4 rounded-xl shadow border",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("h2",{className:"text-lg font-bold flex items-center",children:[f.jsx(Jd,{className:"w-5 h-5 mr-2 text-blue-700"})," Add Staff Member"]}),f.jsx("button",{onClick:()=>E("profile"),className:"px-3 py-2 border rounded text-sm",children:"Back"})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[f.jsx("input",{type:"text",className:"w-full p-3 border rounded-lg",value:t,onChange:w=>e(w.target.value),placeholder:"First Name"}),f.jsx("input",{type:"text",className:"w-full p-3 border rounded-lg",value:n,onChange:w=>r(w.target.value),placeholder:"Last Name"})]}),f.jsx("input",{type:"text",className:"w-full p-3 border rounded-lg",value:s,onChange:w=>i(w.target.value.toLowerCase()),placeholder:"Username"}),f.jsx("input",{type:"email",className:"w-full p-3 border rounded-lg",value:o,onChange:w=>u(w.target.value),placeholder:"Email"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[f.jsxs("select",{className:"w-full p-3 border rounded-lg",value:l,onChange:w=>c(w.target.value),children:[f.jsx("option",{value:"CSE",children:"CSE"}),f.jsx("option",{value:"CSM",children:"CSM"}),f.jsx("option",{value:"CSD",children:"CSD"}),f.jsx("option",{value:"CSC",children:"CSC"}),f.jsx("option",{value:"ECE",children:"ECE"}),f.jsx("option",{value:"EEE",children:"EEE"}),f.jsx("option",{value:"MECH",children:"MECH"}),f.jsx("option",{value:"CIVIL",children:"CIVIL"})]}),f.jsxs("select",{className:"w-full p-3 border rounded-lg",value:d,onChange:w=>m(w.target.value),children:[f.jsx("option",{value:"Faculty",children:"Faculty"}),f.jsx("option",{value:"HOD",children:"HOD"}),f.jsx("option",{value:"Principal",children:"Principal"}),f.jsx("option",{value:"Admin",children:"Admin"})]})]}),f.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg",value:g,onChange:w=>_(w.target.value),placeholder:"Password (min 8 chars)"}),f.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg",value:C,onChange:w=>k(w.target.value),placeholder:"Confirm Password"}),f.jsx("button",{onClick:A,disabled:b,className:"w-full bg-green-600 text-white py-3 rounded-lg font-bold",children:b?"Creating...":"Create Staff Member"})]})]})})}function DP({showModal:t,result:e,onClose:n}){return!t||!e?null:f.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[160] p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full overflow-auto",children:[f.jsxs("div",{className:"p-4 border-b flex items-start gap-3",children:[f.jsx("h3",{className:"text-lg font-bold",children:"Report send results"}),f.jsx("button",{onClick:n,className:"ml-auto text-slate-500",children:f.jsx(to,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"p-4 space-y-3",children:[f.jsxs("p",{className:"text-sm text-slate-600",children:["Uploaded: ",f.jsx("b",{children:e.uploaded?"Yes":"No"})]}),e.reportId&&f.jsxs("p",{className:"text-sm",children:["Report ID: ",f.jsx("span",{className:"font-mono",children:e.reportId})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold",children:"HOD results"}),f.jsxs("div",{className:"mt-2 space-y-2 max-h-60 overflow-auto",children:[(e.hodResults||[]).map((r,s)=>f.jsxs("div",{className:"p-2 border rounded",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"font-mono text-sm",children:r.email}),f.jsx("div",{className:`ml-auto text-xs font-semibold ${r.status==="sent"?"text-green-700":r.status==="failed"?"text-red-700":"text-slate-600"}`,children:r.status.toUpperCase()})]}),r.info&&f.jsx("div",{className:"text-xs text-slate-500 mt-1 break-all",children:typeof r.info=="string"?r.info:JSON.stringify(r.info)})]},s)),(!e.hodResults||!e.hodResults.length)&&f.jsx("p",{className:"text-xs text-slate-500",children:"No HODs found or no emails attempted."})]})]}),e.error&&f.jsxs("div",{className:"text-sm text-red-600",children:["Error: ",e.error]})]}),f.jsx("div",{className:"p-4 border-t flex justify-end gap-2",children:f.jsx("button",{onClick:n,className:"px-4 py-2 rounded border",children:"Close"})})]})})}function OP({showModal:t,detail:e,onClose:n}){return!t||!e?null:f.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[170] p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full overflow-auto",children:[f.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[f.jsxs("h3",{className:"text-lg font-bold",children:["Present List  ",e.dateId," ",e.branch?` ${e.branch}`:""," ",e.year?` ${e.year}`:""]}),f.jsx("button",{onClick:n,className:"ml-auto text-slate-500",children:f.jsx(to,{})})]}),f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"text-sm text-slate-600 mb-3",children:["Total present: ",f.jsx("b",{children:(e.rows||[]).length})]}),f.jsxs("div",{className:"space-y-2 max-h-96 overflow-auto",children:[(e.rows||[]).map(r=>f.jsxs("div",{className:"p-2 border rounded flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-bold",children:r.name}),f.jsxs("div",{className:"text-xs text-slate-500",children:[r.studentId,"  ",r.branch,"  ",r.year]})]}),f.jsx("div",{className:"text-xs text-slate-500",children:r.timeIn||"-"})]},r.id)),!(e.rows||[]).length&&f.jsx("div",{className:"text-sm text-slate-500",children:"No records for this date."})]})]}),f.jsx("div",{className:"p-4 border-t flex justify-end gap-2",children:f.jsx("button",{onClick:n,className:"px-4 py-2 border rounded",children:"Close"})})]})})}function LP({idCardData:t,onClose:e}){const n=B.useRef();if(!t)return null;const r=()=>{const s=window.open("","","height=600,width=800");s.document.write(`
      <html>
        <head>
          <title>ID Card</title>
          <style>
            body { margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: #f0f0f0; font-family: Arial, sans-serif; }
            .card { width: 400px; background: white; border: 1px solid #ccc; border-radius: 12px; padding: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
            .header { display: flex; gap: 12px; padding-bottom: 16px; border-bottom: 1px solid #e0e0e0; align-items: center; margin-bottom: 16px; }
            .logo { flex-shrink: 0; height: 48px; width: 48px; object-fit: contain; }
            .college-info h2 { margin: 0; font-size: 14px; font-weight: bold; color: #333; }
            .college-info p { margin: 4px 0 0 0; font-size: 11px; color: #666; }
            .content { display: flex; gap: 12px; }
            .left { flex: 1; }
            .photo { height: 100px; width: 80px; border: 1px solid #999; border-radius: 6px; object-fit: cover; display: block; margin-bottom: 12px; flex-shrink: 0; }
            .details { font-size: 12px; }
            .detail-row { margin-bottom: 8px; }
            .detail-label { font-size: 10px; font-weight: bold; color: #666; }
            .detail-value { font-size: 11px; color: #333; font-weight: 500; word-break: break-word; }
            .right { display: flex; flex-direction: column; align-items: center; justify-content: flex-end; }
            .qr-box { background: white; padding: 4px; border: 1px solid #999; border-radius: 4px; }
            .qr-label { font-size: 10px; color: #666; margin-top: 4px; text-align: center; }
            .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 4px; }
            @media print { body { background: white; } .card { box-shadow: none; } }
          </style>
        </head>
        <body>
          <div id="card"></div>
        </body>
      </html>
    `),setTimeout(()=>{s.document.getElementById("card").innerHTML=n.current.outerHTML,s.print(),s.close()},250)};return f.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[170] p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full",children:[f.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[f.jsx("h3",{className:"text-lg font-bold",children:"Student ID Card"}),f.jsx("button",{onClick:e,className:"ml-auto text-slate-500",children:f.jsx(to,{})})]}),f.jsx("div",{className:"p-8 flex justify-center",children:f.jsxs("div",{ref:n,className:"w-96 bg-white rounded-xl shadow-lg border border-slate-300",style:{height:"auto",padding:"16px"},children:[f.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-200",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("img",{src:"/logos/drk-logo.png",alt:"Logo",className:"h-12 w-12 object-contain"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-sm font-bold text-slate-800",children:"DRK Institute Of Science & Technology"}),f.jsx("div",{className:"text-xs text-slate-600",children:"(Approved by AICTE & Affiliated to JNTUH)"})]})]}),f.jsxs("div",{className:"flex gap-3 mt-4",children:[f.jsxs("div",{className:"flex-1",children:[t.photo&&f.jsx("div",{className:"mb-3 overflow-hidden rounded border border-slate-300",style:{height:"100px",width:"80px"},children:f.jsx("img",{src:t.photo,alt:"Photo",className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"space-y-1 text-xs",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold text-slate-600",children:"Name"}),f.jsx("div",{className:"font-bold text-slate-800 text-sm",children:t.name||"N/A"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold text-slate-600",children:"Roll No"}),f.jsx("div",{className:"font-bold text-slate-800",children:t.studentId||"N/A"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold text-slate-600",children:"Email"}),f.jsx("div",{className:"text-slate-800 truncate",children:t.email||"N/A"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold text-slate-600",children:"Branch"}),f.jsx("div",{className:"text-slate-800",children:t.branch||"N/A"})]}),f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold text-slate-600",children:"Year"}),f.jsx("div",{className:"text-slate-800",children:t.year||"N/A"})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold text-slate-600",children:"Phone"}),f.jsx("div",{className:"text-slate-800",children:t.phone||"N/A"})]})]})]}),f.jsxs("div",{className:"flex flex-col items-center justify-end",children:[f.jsx("div",{className:"bg-white p-1 rounded border border-slate-300",children:f.jsx(hS,{value:t.studentId||"ID",size:50,level:"H",includeMargin:!1})}),f.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"QR ID"})]})]})]})}),f.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[f.jsx("button",{onClick:e,className:"px-4 py-2 border rounded hover:bg-slate-50",children:"Close"}),f.jsxs("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2",children:[f.jsx(qx,{size:16})," Print"]})]})]})})}function MP({showModal:t,data:e,onConfirm:n,onCancel:r}){return!t||!e?null:f.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[170] p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-sm w-full",children:[f.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[f.jsx(I0,{className:"text-amber-500",size:20}),f.jsx("h3",{className:"text-lg font-bold",children:"Duplicate Entry"}),f.jsx("button",{onClick:r,className:"ml-auto text-slate-500",children:f.jsx(to,{})})]}),f.jsxs("div",{className:"p-6",children:[f.jsxs("p",{className:"text-slate-700 mb-4",children:["Student ",f.jsx("b",{children:e.name})," already exists in the database. Do you want to overwrite the existing record?"]}),f.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded p-3 text-sm text-amber-900 mb-4",children:[f.jsx("div",{className:"font-semibold mb-1",children:"Existing Record:"}),f.jsxs("div",{children:["ID: ",e.id]}),f.jsxs("div",{children:["Name: ",e.name]})]}),f.jsx("p",{className:"text-xs text-slate-500 mb-4",children:'Clicking "Overwrite" will replace the existing record with new data. This action cannot be undone.'})]}),f.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[f.jsx("button",{onClick:r,className:"px-4 py-2 border rounded hover:bg-slate-50",children:"Cancel"}),f.jsx("button",{onClick:()=>n(e),className:"px-4 py-2 bg-amber-500 text-white rounded hover:bg-amber-600",children:"Overwrite"})]})]})})}function VP({appUser:t,todayCount:e}){return f.jsx("header",{className:"bg-red-900 text-white p-3 shadow-lg sticky top-0 z-50 border-b-4 border-red-700",children:f.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between gap-2",children:[f.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[f.jsx("div",{className:"bg-white rounded-full w-14 h-14 flex items-center justify-center shadow-md border-2 border-red-700",children:f.jsx("img",{src:"/logos/header-logo.png",alt:"Header Logo",className:"w-10 h-10 object-contain"})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("h1",{className:"text-sm font-extrabold tracking-wide uppercase leading-tight",children:"DRK Institute of Science & Technology"}),f.jsx("div",{className:"text-xs text-red-200 mt-0.5",children:"(Approved by AICTE & Affiliated to JNTUH)"})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"hidden sm:block text-sm text-red-200",children:(t==null?void 0:t.name)||""}),f.jsxs("div",{title:"Students marked present today (database)",className:"inline-flex items-center gap-2 bg-white/10 border border-white/20 px-3 py-1 rounded-full text-sm",children:[f.jsxs("svg",{className:"w-4 h-4 text-white opacity-90",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),f.jsx("span",{className:"font-semibold",children:typeof e=="number"?e:0}),f.jsx("span",{className:"text-xs text-red-200",children:"Present"})]})]})]})})}function jP({view:t,setView:e}){const n=[{id:"home",label:"Dashboard",icon:Hx},{id:"database",label:"Database",icon:Gx},{id:"reports",label:"Reports",icon:x0},{id:"profile",label:"Profile",icon:S0}];return f.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow",children:f.jsx("div",{className:"max-w-6xl mx-auto flex items-center justify-between px-4 py-3",children:n.map(({id:r,label:s,icon:i})=>f.jsxs("button",{onClick:()=>e(r),className:`flex flex-col items-center text-xs gap-1 ${t===r?"text-red-700":"text-slate-400"} hover:text-red-600 transition`,children:[f.jsx(i,{className:"w-6 h-6"}),f.jsx("span",{children:s})]},r))})})}function FP(){const[t,e]=B.useState(null),[n,r]=B.useState(null),[s,i]=B.useState(""),[o,u]=B.useState(""),[l,c]=B.useState(!1),[d,m]=B.useState(!1),[g,_]=B.useState(!1),[C,k]=B.useState(1),[b,A]=B.useState(""),[E,w]=B.useState(""),[D,V]=B.useState("idle"),[F,I]=B.useState(null),[v,T]=B.useState(null),[S,R]=B.useState(!1),[N,x]=B.useState(!1),[xe,J]=B.useState(null),[Be,We]=B.useState("home"),[z,Z]=B.useState([]),[ie,Se]=B.useState([]),[ge,Ae]=B.useState("details"),[Dt,ln]=B.useState("live"),[Ut,Yt]=B.useState(""),[gr,hl]=B.useState(""),[cs,Zs]=B.useState("CSE"),[ei,vo]=B.useState("1st"),[yr,ti]=B.useState(""),[ni,dl]=B.useState(""),[fl,_o]=B.useState(null),[ri,hs]=B.useState(null),[ds,fs]=B.useState("setup"),[wo,Eo]=B.useState(!1),[ze,nt]=B.useState(new Date().toISOString().split("T")[0]),[In,pl]=B.useState("CSE"),[vr,nh]=B.useState("1st"),[Bn,ml]=B.useState(null),[Io,To]=B.useState(""),[rh,sh]=B.useState(null),[gl,xo]=B.useState([]),[yl,_r]=B.useState(null),[ps,si]=B.useState(""),[un,So]=B.useState(""),[wr,Ao]=B.useState(""),[zn,Co]=B.useState(""),[Ge,Ro]=B.useState("CSE"),[Xt,Er]=B.useState("Faculty"),[ms,vl]=B.useState(""),[Tn,_l]=B.useState(""),mt=B.useRef(null),Ir=B.useRef(null),[ko,No]=B.useState("user"),[ii,Jt]=B.useState(!1),[Po,bo]=B.useState(""),[oi,ai]=B.useState(""),[Do,Oo]=B.useState(""),[Lo,gs]=B.useState(null),[Mo,li]=B.useState(new Set),$n=B.useRef(new Set),[Hn,ys]=B.useState(0),[Zt,vs]=B.useState(null),[Vo,xn]=B.useState(!1),[jo,ui]=B.useState([]),[wl,Fo]=B.useState([]),[ih,Uo]=B.useState(!1),[El,_s]=B.useState(!1),[oh,qn]=B.useState(new Date().toISOString().split("T")[0]),[cn,ci]=B.useState(""),[hi,Il]=B.useState("");B.useEffect(()=>{(async()=>{try{await SA(lv)}catch(ne){console.error("Auth failed:",ne),J({type:"error",text:"Database Connection Error: "+ne.message})}})();const H=PA(lv,e),q=document.createElement("script");return q.src=wP,q.async=!0,q.onload=()=>Ee(),document.body.appendChild(q),()=>H()},[]);const Ee=async()=>{try{const O=window.faceapi;if(!O)throw new Error("Face API not loaded");await O.nets.ssdMobilenetv1.loadFromUri(rd),await O.nets.faceLandmark68Net.loadFromUri(rd),await O.nets.faceRecognitionNet.loadFromUri(rd),R(!0),console.log("Face-api models loaded")}catch(O){console.error(O),J({type:"error",text:"Failed to load AI models"})}};B.useEffect(()=>{if(!t)return;const O=jr(Ke(Pe,"artifacts",it,"public","data","students")),H=nv(O,Y=>{const oe=Y.docs.map(ae=>({id:ae.id,...ru(ae.data())}));Z(oe)}),q=jr(Ke(Pe,"artifacts",it,"public","data","attendance_logs"),FN("timestamp","desc")),ne=nv(q,Y=>{const oe=Y.docs.map(ae=>({id:ae.id,...ru(ae.data())}));Se(oe)});return()=>{H(),ne()}},[t]),B.useEffect(()=>{try{Zd.init(Af)}catch(O){console.error("EmailJS init error:",O)}},[]),B.useEffect(()=>{const O=localStorage.getItem("drkAttendanceRemember");if(O)try{const{username:H,password:q,remember:ne}=JSON.parse(O);ne&&H&&q&&(i(H),u(q),uv({username:H,password:q,rememberFlag:!0,setStatusMsg:J,setLoading:x,setAppUser:r,setView:We,setLoginUser:i,setLoginPass:u}))}catch(H){console.error("Remember me parse error",H)}},[]),B.useEffect(()=>{const H=new URLSearchParams(window.location.search).get("reset");H&&(_(!0),k(2),IP({token:H,setResetTokenStatus:V,setResetUserDocId:I,setResetDocId:T}))},[]);const Wn=()=>{mt.current&&mt.current.srcObject&&(mt.current.srcObject.getTracks().forEach(O=>O.stop()),mt.current.srcObject=null)},ws=()=>{Wn(),navigator.mediaDevices.getUserMedia({video:{facingMode:ko,width:{ideal:1280},height:{ideal:720}}}).then(O=>{mt.current&&(mt.current.srcObject=O)}).catch(O=>{console.error("Camera error:",O),J({type:"error",text:"Cannot access camera: "+O.message})})},Es=()=>{No(O=>O==="user"?"environment":"user")};B.useEffect(()=>{if(!S||!n){Wn();return}Be==="register"&&ge==="camera"&&Dt==="live"||Be==="attendance"&&ds==="camera"?ws():Wn()},[Be,S,ds,ge,Dt,n,ko]);const ah=async()=>{await uv({username:s,password:o,rememberFlag:d,setStatusMsg:J,setLoading:x,setAppUser:r,setView:We,setLoginUser:i,setLoginPass:u})},Tl=()=>{r(null),We("home"),i(""),u(""),localStorage.removeItem("drkAttendanceRemember")},lh=async()=>{await TP({fpUser:b,setStatusMsg:J,setLoading:x})},uh=async()=>{await xP({fpNewPass:E,resetUserDocId:F,resetDocId:v,setStatusMsg:J,setLoading:x,setForgotPasswordMode:_,setFpStep:k,setFpUser:A,setFpNewPass:w,setResetTokenStatus:V})},ch=O=>{const H=O.target.files[0];if(!H)return;const q=new FileReader;q.onload=()=>_o(q.result),q.readAsDataURL(H)},hh=()=>{if(!Ut||!gr||!yr||!ni){J({type:"error",text:"Please fill all fields"});return}if(gr.length<6||!/^\d{10}$/.test(yr)){J({type:"error",text:"Invalid ID or Phone (phone must be 10 digits)"});return}J(null),Ae("camera")},Tr=async(O,H=null)=>{x(!0);try{H?(await tv(Gi(Pe,"artifacts",it,"public","data","students",H),O),J({type:"success",text:`Updated profile for ${O.name}`})):(await sa(Ke(Pe,"artifacts",it,"public","data","students"),O),J({type:"success",text:`Student ${O.name} registered successfully`})),Yt(""),hl(""),ti(""),dl(""),_o(null),Ae("details"),hs(null)}catch(q){console.error(q),J({type:"error",text:"Database error"})}x(!1)},Sn=async(O=null)=>{if(!t)return;const H=window.faceapi;let q;if(Dt==="live"){if(!mt.current||mt.current.readyState<2){J({type:"warning",text:"Camera warming up..."});return}q=mt.current}else{if(!fl||!Ir.current){J({type:"error",text:"Please upload a photo"});return}q=Ir.current}x(!0);try{const ne=await H.detectSingleFace(q,new H.SsdMobilenetv1Options({minConfidence:.5})).withFaceLandmarks().withFaceDescriptor();if(!ne){J({type:"error",text:"No face detected. Try again."}),x(!1);return}const Y=z.filter(ye=>Array.isArray(ye.descriptor)&&ye.studentId&&ye.studentId.toLowerCase()!==gr.toLowerCase()).map(ye=>new H.LabeledFaceDescriptors(ye.studentId,[new Float32Array(ye.descriptor)]));if(Y.length>0){const Ve=new H.FaceMatcher(Y,.45).findBestMatch(ne.descriptor);if(Ve.label!=="unknown"){const Ce=z.find(Gn=>Gn.studentId===Ve.label);J({type:"error",text:`This face is already registered as ${(Ce==null?void 0:Ce.name)||""} (${(Ce==null?void 0:Ce.studentId)||Ve.label}). Duplicate faces are not allowed.`}),x(!1);return}}const oe=Array.from(ne.descriptor),ae=_P(q),fe={name:Ut,studentId:gr.toUpperCase(),branch:cs,year:ei,phone:yr,email:ni,photo:ae,descriptor:oe,createdAt:Ii()},ve=z.find(ye=>{var Ve;return((Ve=ye.studentId)==null?void 0:Ve.toLowerCase())===gr.toLowerCase()});if(ve&&!O){hs({docId:ve.id,name:ve.name,id:ve.studentId,newData:fe}),x(!1);return}await Tr(fe,O||null)}catch(ne){console.error(ne),J({type:"error",text:"Detection failed. Try again."}),x(!1)}},xl=async()=>{try{const O=new Date().toISOString().split("T")[0],H=Ke(Pe,"artifacts",it,"public","data","attendance_daily",O,"logs"),q=await en(H),ne=new Set;return q.forEach(Y=>ne.add(Y.id)),ne}catch(O){return console.error("getTodayMarkedSet error",O),new Set}},Sl=async(O,H)=>{try{const q=new Date().toISOString().split("T")[0],ne=(O.studentId||O).toString(),Y=Gi(Pe,"artifacts",it,"public","data","attendance_daily",q,"logs",ne),oe=await zN(Y);let ae=!1;oe.exists()||(await tv(Y,{name:O.name||"",studentId:O.studentId||O,branch:O.branch||"",year:O.year||"",status:H,timeIn:new Date().toLocaleTimeString(),timestamp:Ii()}),ae=!0),await sa(Ke(Pe,"artifacts",it,"public","data","attendance_logs"),{name:O.name||"",studentId:O.studentId||O,status:H,subject:"",branch:O.branch||"",year:O.year||"",timestamp:Ii(),date:q,timeIn:new Date().toLocaleTimeString()}),ae&&ys(fe=>typeof fe=="number"?fe+1:1)}catch(q){console.error("logAttendance error",q)}};B.useEffect(()=>{let O=null;const H=async()=>{if(!S||!mt.current||mt.current.readyState<2)return;const q=window.faceapi;if(q)try{const ne=z.filter(fe=>Array.isArray(fe.descriptor)&&fe.descriptor.length).map(fe=>new q.LabeledFaceDescriptors(fe.studentId,[new Float32Array(fe.descriptor)]));if(!ne.length)return;const Y=new q.FaceMatcher(ne,.6),oe=await q.detectAllFaces(mt.current,new q.SsdMobilenetv1Options({minConfidence:.5})).withFaceLandmarks().withFaceDescriptors();if(!oe||!oe.length)return;let ae=0;for(const fe of oe){const ve=Y.findBestMatch(fe.descriptor);if(ve.label==="unknown")continue;const ye=ve.label;if(Mo.has(ye)||$n.current.has(ye))continue;const Ve=z.find(Ce=>Ce.studentId===ye);Ve&&($n.current.add(ye),li(Ce=>new Set(Ce).add(ye)),await Sl(Ve,"Present"),ae++)}ae>0&&J({type:"success",text:`Marked ${ae} new students Present`})}catch(ne){console.error("scan error",ne)}};return Be==="attendance"&&ds==="camera"&&S?((async()=>{const q=await xl();li(q),$n.current=new Set})(),H(),O=setInterval(H,2500),Eo(!0)):Eo(!1),()=>{O&&clearInterval(O)}},[Be,ds,S,z]);const Al=()=>{We("attendance"),fs("camera"),J({type:"info",text:"Starting camera and scanning for faces..."})},xr=()=>{fs("setup"),Wn(),J({type:"info",text:"Attendance session ended."})},dh=async()=>{const O=In==="All"?null:In,H=vr==="All"?null:vr,q=z.filter(Y=>(O?Y.branch===O:!0)&&(H?Y.year===H:!0)),ne=ze;try{const Y=Ke(Pe,"artifacts",it,"public","data","attendance_daily",ne,"logs"),oe=await en(Y),ae=new Map;oe.forEach(ve=>{const ye=ve.data(),Ve=ru(ye);ae.set(ve.id,Ve)});const fe=q.map(ve=>{const ye=ae.get(ve.studentId),Ve=ye&&ye.status&&ye.status.includes("Present")?ye:null,Ce=Ve&&Ve.timeIn||"N/A";return{...ve,status:Ve?"Present":"Absent",timeIn:Ce,date:ne}});ml(fe),J({type:"success",text:`Report generated for ${In}-${vr}`})}catch(Y){console.error("generate report error",Y),J({type:"error",text:"Failed to generate report"})}},fh=()=>{if(!Bn)return;const O=`Date,Roll No,Name,Branch,Year,Time In,Status
`,H=Bn.map(oe=>`${oe.date},${oe.studentId||""},${(oe.name||"").replace(/,/g," ")},${oe.branch||""},${oe.year||""},${oe.timeIn||"N/A"},${oe.status}`).join(`
`),q="data:text/csv;charset=utf-8,"+O+H,ne=encodeURI(q),Y=document.createElement("a");Y.setAttribute("href",ne),Y.setAttribute("download",`Report_${In}_${vr}_${ze}.csv`),document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)},ph=async(O,H,q)=>{x(!0),vs(null),xn(!1);const ne=(Y,oe,ae="operation")=>{let fe;return Promise.race([Y,new Promise((ve,ye)=>{fe=setTimeout(()=>ye(new Error(`${ae} timed out after ${oe}ms`)),oe)})]).finally(()=>clearTimeout(fe))};try{if(!O||!H||!q||!q.length){const X="Missing branch/date or no report data.";return J({type:"error",text:X}),x(!1),{ok:!1,error:X}}if(!su||su.includes("xxxx")){const X="EMAILJS report template ID not configured.";return console.error(X,su),J({type:"error",text:X}),x(!1),{ok:!1,error:X}}const Y=["Date","Roll No","Name","Branch","Year","Time In","Status"],oe=q.map(X=>[X.date||H,X.studentId||"",X.name||"",X.branch||"",X.year||"",X.timeIn||"N/A",X.status||""]),ae=Y.join(",")+`
`+oe.map(X=>X.map(gt=>`"${String(gt).replace(/"/g,'""')}"`).join(",")).join(`
`),fe=await sa(Ke(Pe,"artifacts",it,"public","data","reports"),{branch:O,date:H,csv:ae,pdfUrl:"",createdAt:Ii()});let ve=[];try{const X=jr(Ke(Pe,"artifacts",it,"public","data","app_users"),rr("role","==","hod"));ve=(await en(X)).docs}catch(X){console.error("HOD query error (role==hod):",X)}if(!ve.length)try{const X=jr(Ke(Pe,"artifacts",it,"public","data","app_users"),rr("role","==","HOD"));ve=(await en(X)).docs}catch(X){console.error("HOD fallback query error:",X)}const ye=(O||"").trim().toLowerCase();let Ve=ve.map(X=>({id:X.id,...X.data()})).filter(X=>{const gt=(X.department||"").toString().trim().toLowerCase();return gt?gt===ye||gt.includes(ye)||ye.includes(gt):!1});if(Ve.length||(Ve=ve.map(X=>({id:X.id,...X.data()}))),!Ve.length){const X=`Report processed but no HOD found for ${O}. Report saved (id: ${fe.id}).`;return J({type:"warning",text:`Report processed but no HOD found for ${O}.`}),vs({uploaded:!1,downloadUrl:"",hodResults:[],error:X,reportId:fe.id}),xn(!0),x(!1),{ok:!1,uploaded:!1,downloadUrl:"",error:X}}const Ce=[];for(const X of Ve){if(!X.email){Ce.push({email:"(no-email)",status:"skipped",info:"HOD record missing email"});continue}const gt=Y.join(",")+`
`+oe.slice(0,20).map(rt=>rt.map(Kn=>`"${String(Kn).replace(/"/g,'""')}"`).join(",")).join(`
`),Nl=`
          <p>Hello ${X.name||""},</p>
          <p>Here is the attendance report preview for <strong>${O}</strong> on <strong>${H}</strong>.</p>
          <p>Preview (first rows):</p>
          <pre style="white-space:pre-wrap;font-size:12px;padding:8px;border:1px solid #eee;background:#fafafa;">${(gt||"").replace(/</g,"&lt;")}</pre>
          <p>The full report is saved in the system. Contact admin to access the full CSV if required.</p>
          <p>Regards,<br/>DRK Attendance System</p>
        `,pi={to_email:X.email,to_name:X.name||X.username||"HOD",branch:O,date:H,report_preview_csv:gt,message_html:Nl,subject:`Attendance Report - ${O} ${H}`,from_name:"DRK Attendance System"};try{console.log("Sending EmailJS to",X.email);const rt=await ne(Zd.send(lI,su,pi,Af),2e4,"EmailJS.send");console.log("EmailJS sent to",X.email,rt),Ce.push({email:X.email,status:"sent",info:rt&&rt.status?`status:${rt.status}`:"ok"})}catch(rt){console.error("EmailJS send failed for",X.email,rt);let Kn="";try{rt&&rt.text?Kn=rt.text:Kn=typeof rt=="string"?rt:JSON.stringify(rt)}catch{Kn=String(rt)}Ce.push({email:X.email,status:"failed",info:Kn})}}const Gn=Ce.filter(X=>X.status==="sent").length;return vs({uploaded:!1,downloadUrl:"",hodResults:Ce,reportId:fe.id}),xn(!0),Gn>0?J({type:"success",text:`Report preview emailed to ${Gn} HOD(s).`}):J({type:"warning",text:"Emails to HODs failed. Check results."}),x(!1),{ok:Gn>0,hodResults:Ce,reportId:fe.id}}catch(Y){console.error("sendReportToHODs unexpected exception",Y);const oe=Y&&Y.message?Y.message:String(Y);return J({type:"error",text:"Unexpected error sending report. Check console."}),vs({uploaded:!1,downloadUrl:"",hodResults:[],error:oe}),xn(!0),x(!1),{ok:!1,error:oe}}},An=async()=>{_s(!0);try{const O=Ke(Pe,"artifacts",it,"public","data","attendance_daily"),H=await en(O),q=[];for(const ne of H.docs){const Y=ne.id,oe=Ke(Pe,"artifacts",it,"public","data","attendance_daily",Y,"logs"),ae=await en(oe);q.push({dateId:Y,count:ae.size})}q.sort((ne,Y)=>Y.dateId.localeCompare(ne.dateId)),ui(q)}catch(O){console.error("fetchHistoryList error",O),ui([])}_s(!1)},mh=async(O,H="",q="")=>{_s(!0);try{const ne=Ke(Pe,"artifacts",it,"public","data","attendance_daily",O,"logs");let oe=(await en(ne)).docs.map(ae=>({id:ae.id,...ru(ae.data())}));if(H){const ae=H.toString().trim().toLowerCase();oe=oe.filter(fe=>(fe.branch||"").toString().trim().toLowerCase()===ae)}if(q){const ae=q.toString().trim().toLowerCase();oe=oe.filter(fe=>(fe.year||"").toString().trim().toLowerCase()===ae)}oe.sort((ae,fe)=>(ae.timeIn||"").localeCompare(fe.timeIn||"")),Fo({dateId:O,rows:oe,branch:H,year:q}),Uo(!0)}catch(ne){console.error("fetchHistoryByDate error",ne),Fo({dateId:O,rows:[],branch:H,year:q}),Uo(!0)}_s(!1)},Cl=async()=>{try{const O=new Date().toISOString().split("T")[0],H=Ke(Pe,"artifacts",it,"public","data","attendance_daily",O,"logs"),q=await en(H);ys(q.size||0)}catch(O){console.error("fetchTodayCount error",O),ys(0)}};B.useEffect(()=>{Cl();const O=setInterval(Cl,2e4);return()=>clearInterval(O)},[t]);const di=()=>{const O=Io.trim().toLowerCase();if(!O)return;const H=z.find(q=>{var ne,Y;return((ne=q.studentId)==null?void 0:ne.toLowerCase())===O||((Y=q.name)==null?void 0:Y.toLowerCase().includes(O))});if(sh(H||"not-found"),H){const q=ie.filter(ne=>{var Y;return((Y=ne.studentId)==null?void 0:Y.toLowerCase())===H.studentId.toLowerCase()});xo(q)}else xo([])},fi=O=>{_r(O)},Rl=async()=>{if(!ps||!un||!wr||!zn||!Ge||!Xt||!ms||!Tn){J({type:"error",text:"Fill all fields"});return}if(ms.length<8){J({type:"error",text:"Password must be at least 8 characters"});return}if(ms!==Tn){J({type:"error",text:"Password and Confirm Password do not match"});return}try{const O=`${ps} ${un}`.trim();let H="faculty";Xt.toLowerCase()==="hod"&&(H="hod"),Xt.toLowerCase()==="principal"&&(H="principal"),Xt.toLowerCase()==="admin"&&(H="admin");const q=await _m(ms);await sa(Ke(Pe,"artifacts",it,"public","data","app_users"),{username:wr.toLowerCase(),password:q,role:H,name:O,department:Ge,designation:Xt,email:zn,createdBy:n==null?void 0:n.username,createdAt:Ii()}),J({type:"success",text:`Staff member ${O} created successfully`}),si(""),So(""),Ao(""),Co(""),Ro("CSE"),Er("Faculty"),vl(""),_l("")}catch(O){console.error(O),J({type:"error",text:"Failed to create staff"})}},Is=O=>{const H=O.target.files[0];if(!H)return;const q=new FileReader;q.onload=()=>gs(q.result),q.readAsDataURL(H)},Ts=async()=>{if(n)try{const O=Gi(Pe,"artifacts",it,"public","data","app_users",n.id),H={email:Po,phone:oi,department:Do};Lo&&(H.photo=Lo),await Sf(O,H),r(q=>q&&{...q,...H}),J({type:"success",text:"Profile updated successfully"}),Jt(!1)}catch(O){console.error(O),J({type:"error",text:"Failed to update profile"})}},kl=()=>{n&&(Jt(!1),bo(n.email||""),ai(n.phone||""),Oo(n.department||""),gs(n.photo||null))},xs=()=>xe?f.jsxs("div",{className:`p-3 mb-4 rounded-lg text-sm flex items-center gap-2 ${xe.type==="error"?"bg-red-100 text-red-800":xe.type==="warning"?"bg-yellow-100 text-yellow-800":xe.type==="info"?"bg-sky-100 text-sky-800":"bg-green-100 text-green-800"}`,children:[xe.type==="error"&&f.jsx(jx,{className:"w-4 h-4"}),xe.type==="warning"&&f.jsx(I0,{className:"w-4 h-4"}),xe.type==="success"&&f.jsx(T0,{className:"w-4 h-4"}),xe.type==="info"&&f.jsx(Xd,{className:"w-4 h-4"}),f.jsx("span",{children:xe.text}),f.jsx("button",{onClick:()=>J(null),className:"ml-auto",children:f.jsx(to,{className:"w-4 h-4"})})]}):null;return!S||!t?f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50 text-red-900",children:[f.jsx(Xd,{className:"w-12 h-12 animate-spin mb-4 text-red-700"}),f.jsx("h2",{className:"text-2xl font-bold",children:"DRK Institute System Loading..."})]}):!n&&!g?f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-start justify-start p-6",children:f.jsxs("div",{className:"w-full max-w-md mx-auto",children:[f.jsxs("div",{className:"flex flex-col items-center mb-6",children:[f.jsx("img",{src:"/logos/login-logo.png",alt:"Login Logo",className:"h-33 w-41 object-contain mb-5"}),f.jsx("h2",{className:"text-center text-xl font-bold text-slate-800",children:"Faculty Portal"})]}),f.jsx(xs,{}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{children:f.jsx("input",{type:"text",className:"w-full p-4 border rounded-xl text-sm",placeholder:"Username",value:s,onChange:O=>i(O.target.value.toLowerCase())})}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:l?"text":"password",className:"w-full p-4 border rounded-xl text-sm",placeholder:"Password",value:o,onChange:O=>u(O.target.value)}),f.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-4 top-3 text-slate-400",children:l?f.jsx(Bx,{className:"w-5 h-5"}):f.jsx(zx,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:d,onChange:O=>m(O.target.checked)}),f.jsx("span",{className:"text-slate-600",children:"Remember Me"})]}),f.jsx("button",{onClick:()=>{_(!0),J(null),k(1)},className:"text-red-700 hover:underline",children:"Forgot Password?"})]}),f.jsx("button",{onClick:ah,disabled:N,className:"w-full bg-red-800 text-white py-4 rounded-xl font-bold mt-3",children:N?"Verifying...":"LOGIN"})]})]})}):g?f.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-2xl shadow-2xl w-full max-w-md border-t-8 border-blue-600",children:[f.jsx("h2",{className:"text-2xl font-bold text-center text-slate-800 mb-6",children:"Reset Password"}),f.jsx(xs,{}),C===1&&f.jsxs("div",{className:"space-y-4",children:[f.jsx("label",{className:"block text-sm font-bold text-slate-500",children:"Enter Username"}),f.jsx("input",{type:"text",className:"w-full p-3 border rounded-lg",placeholder:"username",value:b,onChange:O=>A(O.target.value.toLowerCase())}),f.jsx("button",{onClick:lh,disabled:N,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700",children:N?"Sending link...":"Send Reset Link"})]}),C===2&&f.jsxs("div",{className:"space-y-4",children:[D==="checking"&&f.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Verifying reset link..."}),D==="invalid"&&f.jsx("p",{className:"text-red-600 font-semibold mb-4",children:"This reset link is invalid or expired."}),D==="valid"&&f.jsxs(f.Fragment,{children:[f.jsx("label",{className:"block text-sm font-bold text-slate-500",children:"New Password (Min 8 chars)"}),f.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg",placeholder:"New Password",value:E,onChange:O=>w(O.target.value)}),f.jsx("button",{onClick:uh,disabled:N,className:"w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700",children:N?"Updating...":"Change Password"})]})]}),f.jsx("button",{onClick:()=>{_(!1),k(1),A(""),w(""),V("idle")},className:"w-full text-center text-sm text-slate-500 mt-4 hover:underline",children:"Back to Login"})]})}):f.jsxs("div",{className:"app-shell min-h-screen bg-slate-50 pb-24",children:[f.jsx(xs,{statusMsg:xe,setStatusMsg:J}),f.jsx(DP,{showModal:Vo,result:Zt,onClose:()=>xn(!1)}),f.jsx(OP,{showModal:ih,detail:wl,onClose:()=>Uo(!1)}),f.jsx(LP,{idCardData:yl,onClose:()=>_r(null)}),f.jsx(MP,{showModal:ri!==null,data:ri,onConfirm:O=>{hs(null),Tr(O.newData,O.docId)},onCancel:()=>hs(null)}),f.jsx(VP,{appUser:n,todayCount:Hn}),f.jsxs("main",{className:"max-w-6xl mx-auto p-3 sm:p-4",children:[Be==="home"&&f.jsx(SP,{appUser:n,students:z,setView:We,handleDashboardStartAttendance:Al}),Be==="register"&&f.jsx(AP,{regStep:ge,setRegStep:Ae,regMode:Dt,setRegMode:ln,regName:Ut,setRegName:Yt,regId:gr,setRegId:hl,regBranch:cs,setRegBranch:Zs,regYear:ei,setRegYear:vo,regPhone:yr,setRegPhone:ti,regEmail:ni,setRegEmail:dl,uploadedImgSrc:fl,videoRef:mt,imgRef:Ir,loading:N,handleProceedToCamera:hh,handleCheckAndRegister:Sn,handleFileChange:ch,toggleCameraFacing:Es}),Be==="reports"&&f.jsx(RP,{reportDate:ze,setReportDate:nt,reportBranch:In,setReportBranch:pl,reportYear:vr,setReportYear:nh,reportData:Bn,handleGenerateReport:dh,handleDownloadReport:fh,sendReportToHODs:ph,loading:N,SHOW_EMAIL_BUTTON:EP}),Be==="attendance"&&f.jsx(CP,{attStep:ds,setAttStep:fs,videoRef:mt,continuousScanActive:wo,markedToday:Mo,students:z,handleEndSession:xr}),Be==="database"&&f.jsx(kP,{searchQuery:Io,setSearchQuery:To,searchResult:rh,handleSearch:di,handleGenerateIDCard:fi}),Be==="history"&&f.jsx(NP,{historyDate:oh,setHistoryDate:qn,historyBranch:cn,setHistoryBranch:ci,historyYear:hi,setHistoryYear:Il,historyLoading:El,historyList:jo,fetchHistoryByDate:mh,setView:We,fetchHistoryList:An}),Be==="profile"&&f.jsx(PP,{appUser:n,profileEditMode:ii,setProfileEditMode:Jt,profileEmail:Po,setProfileEmail:bo,profilePhone:oi,setProfilePhone:ai,profileDept:Do,setProfileDept:Oo,profilePhotoPreview:Lo,handleProfilePhotoChange:Is,handleSaveProfile:Ts,handleCancelProfileEdit:kl,handleLogout:Tl,setView:We}),Be==="manage_users"&&f.jsx(bP,{newUserFirstName:ps,setNewUserFirstName:si,newUserLastName:un,setNewUserLastName:So,newUserUser:wr,setNewUserUser:Ao,newUserEmail:zn,setNewUserEmail:Co,newUserDept:Ge,setNewUserDept:Ro,newUserDesignation:Xt,setNewUserDesignation:Er,newUserPass:ms,setNewUserPass:vl,newUserConfirmPass:Tn,setNewUserConfirmPass:_l,loading:N,handleCreateStaff:Rl,setView:We})]}),Vo&&Zt&&f.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[160] p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full overflow-auto",children:[f.jsxs("div",{className:"p-4 border-b flex items-start gap-3",children:[f.jsx("h3",{className:"text-lg font-bold",children:"Report send results"}),f.jsx("button",{onClick:()=>xn(!1),className:"ml-auto text-slate-500",children:f.jsx(to,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"p-4 space-y-3",children:[f.jsxs("p",{className:"text-sm text-slate-600",children:["Uploaded: ",f.jsx("b",{children:Zt.uploaded?"Yes":"No"})]}),Zt.reportId&&f.jsxs("p",{className:"text-sm",children:["Report ID: ",f.jsx("span",{className:"font-mono",children:Zt.reportId})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold",children:"HOD results"}),f.jsxs("div",{className:"mt-2 space-y-2 max-h-60 overflow-auto",children:[(Zt.hodResults||[]).map((O,H)=>f.jsxs("div",{className:"p-2 border rounded",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"font-mono text-sm",children:O.email}),f.jsx("div",{className:`ml-auto text-xs font-semibold ${O.status==="sent"?"text-green-700":O.status==="failed"?"text-red-700":"text-slate-600"}`,children:O.status.toUpperCase()})]}),O.info&&f.jsx("div",{className:"text-xs text-slate-500 mt-1 break-all",children:typeof O.info=="string"?O.info:JSON.stringify(O.info)})]},H)),(!Zt.hodResults||!Zt.hodResults.length)&&f.jsx("p",{className:"text-xs text-slate-500",children:"No HODs found or no emails attempted."})]})]}),Zt.error&&f.jsxs("div",{className:"text-sm text-red-600",children:["Error: ",Zt.error]})]}),f.jsx("div",{className:"p-4 border-t flex justify-end gap-2",children:f.jsx("button",{onClick:()=>xn(!1),className:"px-4 py-2 rounded border",children:"Close"})})]})}),f.jsx(jP,{view:Be,setView:We})]})}sd.createRoot(document.getElementById("root")).render(f.jsx(It.StrictMode,{children:f.jsx(FP,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("[PWA] Service Worker registered:",t)}).catch(t=>{console.error("[PWA] Service Worker registration failed:",t)})});
